(function(e){function t(t){for(var a,r,o=t[0],l=t[1],c=t[2],d=0,m=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&m.push(i[r][0]),i[r]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);u&&u(t);while(m.length)m.shift()();return n.push.apply(n,c||[]),s()}function s(){for(var e,t=0;t<n.length;t++){for(var s=n[t],a=!0,o=1;o<s.length;o++){var l=s[o];0!==i[l]&&(a=!1)}a&&(n.splice(t--,1),e=r(r.s=s[0]))}return e}var a={},i={app:0},n=[];function r(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=a,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(s,a,function(t){return e[t]}.bind(null,a));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;n.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"136c":function(e,t,s){},2319:function(e,t,s){},4678:function(e,t,s){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-ps":"4c98","./ar-ps.js":"4c98","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku-kmr":"7558","./ku-kmr.js":"7558","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(e){var t=n(e);return s(t)}function n(e){if(!s.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=n,e.exports=i,i.id="4678"},"4d64a":function(e,t,s){"use strict";s("136c")},"56d7":function(e,t,s){"use strict";s.r(t);var a=s("2b0e"),i=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("Navbar"),t("router-view"),t("b-loading",{ref:"loader",attrs:{active:e.isLoading,"can-cancel":!0}})],1)},n=[],r=function(){var e=this,t=e._self._c;return t("div",[t("b-navbar",{attrs:{type:"is-dark"},scopedSlots:e._u([{key:"brand",fn:function(){return[t("b-navbar-item",{attrs:{tag:"div"}},[t("div",{staticClass:"tag is-primary"},[e._v(" Tournaments API ")])])]},proxy:!0},e.loggedUser?{key:"start",fn:function(){return[t("b-navbar-item",{attrs:{tag:"router-link",to:{name:"home"}}},[t("i",{staticClass:"fas fa-home fa-fw fa-lg"}),e._v(" Home ")]),"admin"==e.userRole?t("b-navbar-item",{attrs:{tag:"router-link",to:{name:"users"}}},[t("i",{staticClass:"fas fa-users fa-fw fa-lg"}),e._v(" Users ")]):e._e(),["admin","user"].includes(e.userRole)?t("b-navbar-item",{attrs:{tag:"router-link",to:{name:"tournaments"}}},[t("i",{staticClass:"fas fa-trophy fa-fw fa-lg"}),e._v(" Tournaments ")]):e._e(),t("b-navbar-dropdown",{scopedSlots:e._u([{key:"label",fn:function(){return[t("i",{staticClass:"fas fa-line-chart fa-fw fa-lg"}),e._v(" Reports ")]},proxy:!0}],null,!1,1604693747)},[["admin","reporter"].includes(e.userRole)?t("b-navbar-item",{attrs:{tag:"router-link",to:{name:"tournaments-report"}}},[e._v(" Tournaments ")]):e._e(),["admin","reporter"].includes(e.userRole)?t("b-navbar-item",{attrs:{tag:"router-link",to:{name:"tournaments-currency-spent-report"}}},[e._v(" Currency Spent ")]):e._e()],1)]},proxy:!0}:{key:"start",fn:function(){},proxy:!0},{key:"end",fn:function(){return[e.isLogged?t("b-navbar-item",{on:{click:e.logout}},[t("i",{staticClass:"fas fa-sign-out fa-lg fa-fw fa-lg"}),e._v(" Salir ")]):t("b-navbar-item",{attrs:{tag:"router-link",to:{name:"login"}}},[t("i",{staticClass:"fas fa-sign-in fa-fw fa-lg"}),e._v(" Log in ")])]},proxy:!0}],null,!0)})],1)},o=[],l={name:"TheNavbar",data(){return{}},methods:{logout(){this.$http.get("/user/logout").then(()=>{this.$store.dispatch("logout")})}},computed:{isLogged(){return this.$store.getters.isLogged},userRole(){return this.$store.getters.getLoggedUserRole}}},c=l,u=s("2877"),d=Object(u["a"])(c,r,o,!1,null,null,null),m=d.exports,p={components:{Navbar:m},data(){return{checkLoginInterval:null}},mounted(){},computed:{isLoading(){return this.$store.state.isLoading},loggedUser(){return this.$store.state.loggedUser}}},h=p,f=(s("d340"),Object(u["a"])(h,i,n,!1,null,null,null)),b=f.exports,C=s("289d"),v=s("8c4f"),g=function(){var e=this,t=e._self._c;return t("section",{staticClass:"hero is-white is-fullheight-with-navbar"},[t("div",{staticClass:"hero-body"},[t("div",{staticClass:"container has-text-centered"},[t("div",{staticClass:"columns is-centered is-mobile"},[t("div",{staticClass:"column is-6-desktop is-8-tablet is-12-mobile"},[t("h1",{staticClass:"title is-2"},[e._v(" 👋 ")]),t("h1",{staticClass:"title is-4"},[e._v(" Welcome! ")]),t("h1",{staticClass:"subtitle is-6"},[e._v(" MotoGP Tournament Admin ")]),t("div",{staticClass:"columns is-centered is-multiline"},["admin"===e.userRole?t("div",{staticClass:"column is-half"},[t("router-link",{staticClass:"button is-dark is-outlined is-block",attrs:{to:{name:"users"}}},[t("i",{staticClass:"fas fa-users"}),e._v(" Users ")])],1):e._e(),["admin","user"].includes(e.userRole)?t("div",{staticClass:"column is-half"},[t("router-link",{staticClass:"button is-dark is-outlined is-block",attrs:{to:{name:"tournaments"}}},[t("i",{staticClass:"fas fa-trophy"}),e._v(" Tournaments ")])],1):e._e(),["admin","reporter"].includes(e.userRole)?t("div",{staticClass:"column is-half"},[t("router-link",{staticClass:"button is-dark is-outlined is-block",attrs:{to:{name:"tournaments-report"}}},[t("i",{staticClass:"fas fa-line-chart"}),e._v(" Tournament Report ")])],1):e._e(),["admin","reporter"].includes(e.userRole)?t("div",{staticClass:"column is-half"},[t("router-link",{staticClass:"button is-dark is-outlined is-block",attrs:{to:{name:"tournaments-currency-spent-report"}}},[t("i",{staticClass:"fas fa-line-chart"}),e._v(" Currency Spent Report ")])],1):e._e()])])])])])])},y=[],k={name:"HomeComponent",computed:{userRole(){return this.$store.getters.getLoggedUserRole}}},z=k,_=Object(u["a"])(z,g,y,!1,null,null,null),D=_.exports,I=function(){var e=this,t=e._self._c;return t("section",{staticClass:"hero is-light is-fullheight-with-navbar"},[t("div",{staticClass:"hero-body"},[t("div",{staticClass:"container"},[t("div",{staticClass:"columns is-centered"},[t("div",{staticClass:"column is-3-fullhd is-4-desktop is-6-tablet"},[t("div",{staticClass:"box has-text-centered"},[e._m(0),t("h1",{staticClass:"subtitle is-6"},[e._v(" MotoGP Tournament Admin ")]),t("form",{on:{submit:function(t){return t.preventDefault(),e.login.apply(null,arguments)}}},[t("div",{staticClass:"field has-text-white"},[t("div",{staticClass:"control"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"input",attrs:{type:"email",placeholder:"email@company.com",required:"",disabled:e.isLoading},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})])]),t("div",{staticClass:"field has-text-white"},[t("div",{staticClass:"control"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"input",attrs:{type:"password",placeholder:"Your password",required:"",disabled:e.isLoading},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})])]),t("button",{staticClass:"button is-primary is-fullwidth",class:{"is-loading":e.isLoading}},[e._v("Enter "),t("i",{staticClass:"fas fa-paper-plane"})])])])])])])])])},S=[function(){var e=this,t=e._self._c;return t("h1",{staticClass:"title is-4"},[t("i",{staticClass:"fas fa-sign-in"}),e._v("  Sign in ")])}],w=(s("14d9"),s("2f62")),R=s("2c4e");a["b"].use(w["a"]);var T=new w["a"].Store({state:{isLoading:!1,loggedUser:null,lastTimeUpdated:(new Date).getTime()},mutations:{lastTimeUpdated(e,t){e.lastTimeUpdated=t},setLoading(e,t){e.isLoading=t},setLoggedUser(e,t){e.loggedUser=t},logout(e){e.loggedUser=null}},actions:{logout({commit:e}){e("logout"),e("setLoading",!1),R["a"].open({message:"You have been logged out",type:"is-warning",duration:5e3,queue:!0}),Zt.replace("/login")}},getters:{loggedUser(e){return e.loggedUser},isLogged(e){return null!==e.loggedUser},getLoggedUserRole(e){return e.loggedUser?e.loggedUser.user_role:null}},modules:{}}),L={data(){return{isLoading:!1,email:"",password:""}},methods:{login(){this.startLoading(),this.isLoading=!0,this.$http.post("/user/login",{email:this.email,password:this.password}).then(e=>{this.$store.commit("setLoggedUser",e.data),this.$router.push("/")}).catch(e=>{console.log(e)}).finally(()=>{this.stopLoading(),this.isLoading=!1})}},beforeRouteEnter:(e,t,s)=>{T.state.loggedUser?s("/"):s()}},x=L,N=Object(u["a"])(x,I,S,!1,null,null,null),P=N.exports,A=function(){var e=this,t=e._self._c;return t("div",{staticClass:"section"},[t("div",{staticClass:"container"},[t("div",{staticClass:"columns is-centered"},[t("div",{staticClass:"column is-6"},[t("div",{staticClass:"is-clearfix"},[t("h1",{staticClass:"title is-pulled-left"},[e._v("Users")]),t("div",{staticClass:"is-pulled-right"},[t("div",{staticClass:"buttons"},[t("button",{staticClass:"button is-light",on:{click:e.getUsers}},[t("i",{staticClass:"fas fa-sync"})]),t("router-link",{staticClass:"button is-primary",attrs:{to:{name:"users-new"}}},[t("i",{staticClass:"fas fa-user-plus"})])],1)])]),t("b-table",{attrs:{data:e.users,loading:e.isLoading,paginated:!0,"per-page":10},scopedSlots:e._u([{key:"empty",fn:function(){return[t("p",{staticClass:"is-size-7 has-text-centered py-5 is-family-code"},[e._v("No users")])]},proxy:!0}])},[t("b-table-column",{attrs:{field:"email",sortable:"",label:"Email"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.email)+" ")]}}])}),t("b-table-column",{attrs:{field:"role",label:"Role",sortable:""},scopedSlots:e._u([{key:"default",fn:function(s){return[t("i",{staticClass:"fas fa-fw",class:{"fa-shield":"admin"==s.row.role,"fa-user":"user"==s.row.role,"fa-line-chart":"reporter"==s.row.role}}),e._v(" "+e._s(s.row.role&&s.row.role.toUpperCase())+" ")]}}])}),t("b-table-column",{attrs:{label:"Action",centered:""},scopedSlots:e._u([{key:"default",fn:function(s){return[t("a",{staticClass:"has-text-danger",on:{click:function(t){return e.confirmDeleteUser(s.row)}}},[t("span",{staticClass:"icon"},[t("i",{staticClass:"fas fa-trash"})])])]}}])})],1)],1)])])])},M=[],E={data(){return{users:[],isLoading:!1}},methods:{getUsers(){this.isLoading=!0,this.$http.get("/user/list").then(e=>{this.users=e.data}).catch(e=>{console.error(e)}).finally(()=>{this.isLoading=!1})},confirmDeleteUser(e){this.$buefy.dialog.confirm({title:"Delete User",message:`Are you sure you want to delete user <b>${e.email}</b>?`,confirmText:"Delete",type:"is-danger",hasIcon:!0,onConfirm:()=>this.deleteUser(e.id)})},deleteUser(e){this.$http.post("/user/delete",{id:e}).then(()=>{this.showSuccessNotification("User deleted successfully"),this.getUsers()}).catch(e=>{this.showErrorNotification("Error deleting user"),console.error(e)})}},mounted(){this.getUsers()}},O=E,B=Object(u["a"])(O,A,M,!1,null,null,null),j=B.exports,U=function(){var e=this,t=e._self._c;return t("section",{staticClass:"section"},[t("div",{staticClass:"container"},[t("div",{staticClass:"columns is-centered"},[t("div",{staticClass:"column is-6"},[t("div",{staticClass:"is-clearfix"},[t("h1",{staticClass:"title is-pulled-left"},[t("router-link",{attrs:{to:{name:"users"}}},[t("i",{staticClass:"fas fa-arrow-left"})]),e._v(" New user")],1),e._m(0)]),t("br"),t("div",{staticClass:"box"},[t("ValidationObserver",{ref:"observer"},[t("BInputWithValidation",{attrs:{rules:"required|email",type:"email",label:"Email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),t("BInputWithValidation",{attrs:{rules:"required",type:"password",label:"Password",vid:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),t("BInputWithValidation",{attrs:{rules:"required|confirmed:password",name:"Password",type:"password",label:"Confirm Password"},model:{value:e.confirmation,callback:function(t){e.confirmation=t},expression:"confirmation"}}),t("BSelectWithValidation",{attrs:{rules:"required",label:"Role"},model:{value:e.role,callback:function(t){e.role=t},expression:"role"}},[t("option",{attrs:{value:"",disabled:""}},[e._v("- Please select a role... -")]),t("option",{attrs:{value:"reporter"}},[e._v("Reporter")]),t("option",{attrs:{value:"user"}},[e._v("User")]),t("option",{attrs:{value:"admin"}},[e._v("Admin")])]),t("br"),t("div",{staticClass:"buttons"},[t("button",{staticClass:"button is-success",on:{click:e.validateForm}},[t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fas fa-check"})]),t("span",[e._v("Submit")])]),t("button",{staticClass:"button",on:{click:e.resetForm}},[t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fas fa-redo"})]),t("span",[e._v("Reset")])])])],1)],1)])])])])},V=[function(){var e=this,t=e._self._c;return t("h1",{staticClass:"title is-pulled-right"},[t("i",{staticClass:"fas fa-user-plus"})])}],$=s("7bb1"),W=function(){var e=this,t=e._self._c;return t("ValidationProvider",{attrs:{vid:e.vid,name:e.$attrs.label,rules:e.rules},scopedSlots:e._u([{key:"default",fn:function({errors:s,valid:a}){return[t("b-field",e._b({attrs:{type:{"is-danger":s[0],"is-success":a},message:s}},"b-field",e.$attrs,!1),[t("b-select",{attrs:{expanded:"",placeholder:"Select an option"},model:{value:e.innerValue,callback:function(t){e.innerValue=t},expression:"innerValue"}},[e._t("default")],2)],1),e.help?t("div",{staticClass:"message mb-2"},[t("div",{staticClass:"message-body p-2"},[t("p",{staticClass:"is-size-7"},[e._v(e._s(e.help))])])]):e._e()]}}],null,!0)})},F=[],Y={components:{ValidationProvider:$["b"]},props:{vid:{type:String},rules:{type:[Object,String],default:""},value:{type:null},help:{type:String,default:""}},data:()=>({innerValue:""}),watch:{innerValue(e){this.$emit("input",e)},value(e){this.innerValue=e}},created(){this.value&&(this.innerValue=this.value)}},G=Y,q=Object(u["a"])(G,W,F,!1,null,null,null),H=q.exports,K=function(){var e=this,t=e._self._c;return t("ValidationProvider",{attrs:{vid:e.vid,name:e.$attrs.name||e.$attrs.label,rules:e.rules},scopedSlots:e._u([{key:"default",fn:function({errors:s,valid:a}){return[t("b-field",e._b({attrs:{type:{"is-danger":s[0],"is-success":a},message:s}},"b-field",e.$attrs,!1),[t("b-input",e._b({model:{value:e.innerValue,callback:function(t){e.innerValue=t},expression:"innerValue"}},"b-input",e.$attrs,!1))],1),e.help?t("div",{staticClass:"message mb-2"},[t("div",{staticClass:"message-body p-2"},[t("p",{staticClass:"is-size-7"},[e._v(e._s(e.help))])])]):e._e()]}}])})},J=[],X={components:{ValidationProvider:$["b"]},props:{vid:{type:String},rules:{type:[Object,String],default:""},value:{type:null},help:{type:String,default:""}},data:()=>({innerValue:""}),watch:{innerValue(e){this.$emit("input",e)},value(e){this.innerValue=e}},created(){this.value&&(this.innerValue=this.value)}},Z=X,Q=Object(u["a"])(Z,K,J,!1,null,null,null),ee=Q.exports,te={data(){return{email:"",password:"",confirmation:"",role:"",choices:[]}},components:{ValidationObserver:$["a"],BSelectWithValidation:H,BInputWithValidation:ee},methods:{validateForm(){this.startLoading(),this.$refs.observer.validate().then(e=>{e?(this.showSuccessNotification("Form is valid!"),this.submit()):this.showErrorNotification("Form is invalid!")}).catch(e=>{this.showErrorNotification("An unexpected error occurred. Please try again later."),console.error(e)}).finally(()=>{this.stopLoading()})},submit(){this.startLoading(),this.$http.post("/user/new",{email:this.email,password:this.password,role:this.role}).then(e=>{console.log(e),this.showSuccessNotification("User created successfully!"),this.$router.push({name:"users"})}).catch(e=>{this.showErrorNotification("An unexpected error occurred. Please try again later."),console.error(e)}).finally(()=>{this.stopLoading()})},resetForm(){this.email="",this.password="",this.confirmation="",this.role="",requestAnimationFrame(()=>{this.$refs.observer.reset()})}}},se=te,ae=Object(u["a"])(se,U,V,!1,null,null,null),ie=ae.exports,ne=function(){var e=this,t=e._self._c;return t("div",{staticClass:"section"},[t("div",{staticClass:"container is-fluid"},[t("div",{staticClass:"is-clearfix mb-4"},[t("h1",{staticClass:"title is-pulled-left"},[e._v("Tournaments")]),t("div",{staticClass:"is-pulled-right"},[t("div",{staticClass:"buttons"},[t("button",{staticClass:"button is-light",on:{click:e.getTournaments}},[t("i",{staticClass:"fas fa-sync"})]),t("router-link",{staticClass:"button is-primary",attrs:{to:{name:"tournaments-new"}}},[t("i",{staticClass:"fas fa-plus"})])],1)])]),t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-8"},[t("b-field",{attrs:{label:"Search by name"}},[t("b-input",{attrs:{type:"text",placeholder:"Search",clearable:""},on:{input:e.debouncedSearch},model:{value:e.searchTerm,callback:function(t){e.searchTerm=t},expression:"searchTerm"}})],1)],1),t("div",{staticClass:"column is-2"},[t("b-field",{attrs:{label:"Page size"}},[t("b-select",{attrs:{disabled:e.isLoading,expanded:""},model:{value:e.pageSize,callback:function(t){e.pageSize=t},expression:"pageSize"}},[t("option",{attrs:{value:"10"}},[e._v("10")]),t("option",{attrs:{value:"25"}},[e._v("25")]),t("option",{attrs:{value:"50"}},[e._v("50")]),t("option",{attrs:{value:"100"}},[e._v("100")])])],1)],1),t("div",{staticClass:"column is-2"},[t("b-field",{attrs:{label:"Timezone"}},[t("b-select",{attrs:{disabled:e.isLoading,expanded:""},model:{value:e.timezone,callback:function(t){e.timezone=t},expression:"timezone"}},[t("option",{attrs:{value:"local"}},[e._v("Local ("+e._s(e.myTimezone)+")")]),t("option",{attrs:{value:"philippines"}},[e._v("Philippines (GMT +8)")])])],1)],1)]),t("div",{},[t("b-table",{attrs:{data:e.filteredTournaments,loading:e.isLoading,paginated:!0,"per-page":e.pageSize,striped:"",bordered:"",hoverable:"","pagination-simple":!0},scopedSlots:e._u([{key:"empty",fn:function(){return[t("p",{staticClass:"is-size-7 has-text-centered py-5 is-family-code"},[e._v("No tournaments")])]},proxy:!0}])},[t("b-table-column",{attrs:{centered:""},scopedSlots:e._u([{key:"header",fn:function({}){return[t("i",{staticClass:"fas fa-edit"})]}},{key:"default",fn:function(e){return[t("router-link",{staticClass:"has-text-info",attrs:{to:{name:"tournaments-edit",params:{id:e.row.id}}}},[t("i",{staticClass:"fas fa-pencil"})])]}}])}),t("b-table-column",{attrs:{field:"id",sortable:"",label:"ID",centered:""},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",{staticClass:"is-family-code"},[e._v(e._s(s.row.id))])]}}])}),t("b-table-column",{attrs:{field:"name",sortable:"",label:"Name"},scopedSlots:e._u([{key:"default",fn:function(s){var a;return["*"!==s.row.name[0]?t("b-tooltip",{attrs:{label:s.row.name,position:"is-right"}},[t("i",{staticClass:"fas fa-info-circle has-text-link fa-fw"}),e._v("  ")]):e._e(),t("span",{class:"*"!==s.row.name[0]?"is-underlined":"is-italic"},[e._v(e._s(null!==(a=e.getString(s.row.name))&&void 0!==a?a:"❓ (STRING NOT FOUND)"))])]}}])}),t("b-table-column",{attrs:{field:"startTimestamp",sortable:"",label:"Start"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.toSelectedTimezone(t.row.startTimestamp))+" ")]}}])}),t("b-table-column",{attrs:{field:"endTimestamp",sortable:"",label:"End"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.toSelectedTimezone(t.row.endTimestamp))+" ")]}}])}),t("b-table-column",{attrs:{field:"timeOffsetHours",sortable:"",centered:"",numeric:"",label:"Time Offset"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.timeOffsetHours)+" ")]}}])}),t("b-table-column",{attrs:{field:"restartFrequency",sortable:"",centered:"",numeric:"",label:"Restart Frequency"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.restartFrequency)+" ")]}}])}),t("b-table-column",{attrs:{field:"duration",sortable:"",centered:"",label:"Duration"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.duration)+" ")]}}])}),t("b-table-column",{attrs:{field:"isActivated",sortable:"",centered:"",label:"Activated"},scopedSlots:e._u([{key:"default",fn:function(s){return[s.row.isActivated?t("span",{staticClass:"tag is-success has-text-weight-bold"},[t("i",{staticClass:"fas fa-power-off"}),e._v(" ON")]):t("span",{staticClass:"tag is-dark"},[t("i",{staticClass:"fas fa-power-off"}),e._v(" OFF")])]}}])})],1)],1)])])},re=[],oe=s("2ef0"),le=s("7f45"),ce=s.n(le),ue={data(){return{strings:[],tournaments:[],filteredTournaments:[],searchTerm:"",debouncedSearch:Object(oe["debounce"])(this.search,500),isLoading:!1,pageSize:"25",timezone:"local"}},mounted(){this.getTournaments()},methods:{getTournaments(){this.isLoading=!0;const e=[this.$http.get("/tournaments/list"),this.$http.get("/stringTable/list")];Promise.all(e).then(e=>{this.tournaments=e[0].data,this.filteredTournaments=e[0].data,this.strings=e[1].data,this.searchTerm=""}).catch(e=>{console.error(e)}).finally(()=>{this.isLoading=!1})},getString(e){if(e.startsWith("*"))return e;const t=this.strings.find(t=>t.name===e);return t?t.value:"???????????"},search(){this.searchTerm||(this.filteredTournaments=this.tournaments),this.filteredTournaments=this.tournaments.filter(e=>e.name.toLowerCase().includes(this.searchTerm.toLowerCase()))},toSelectedTimezone(e){const t=e.split(" ")[0]+"T"+e.split(" ")[1]+"+08:00";let s=new Date(t);return"local"===this.timezone?ce()(s).format("YYYY-MM-DD HH:mm:ss"):"philippines"===this.timezone?ce()(s).tz("Asia/Manila").format("YYYY-MM-DD HH:mm:ss"):void 0}},computed:{myTimezone:function(){return ce.a.tz.guess()}}},de=ue,me=Object(u["a"])(de,ne,re,!1,null,null,null),pe=me.exports,he=function(){var e=this,t=e._self._c;return t("section",{staticClass:"section"},[t("div",{staticClass:"container"},[t("div",{staticClass:"columns is-centered"},[t("div",{staticClass:"column is-8"},[t("div",{staticClass:"is-clearfix"},[t("h1",{staticClass:"title is-pulled-left"},[t("router-link",{attrs:{to:{name:"tournaments"}}},[t("i",{staticClass:"fas fa-arrow-left"})]),e._v(" New tournament")],1),e._m(0)]),t("br"),e.isLoading?t("div",{staticClass:"notification has-text-centered px-2"},[e._m(1)]):!e.isLoading&&e.cantRender?t("div",{staticClass:"notification is-warning"},[e._m(2)]):e.isLoading||e.cantRender?e._e():t("TournamentForm",{attrs:{strings:e.stringList,bikes:e.bikeList,circuits:e.circuitList},on:{submit:e.submit}})],1)])])])},fe=[function(){var e=this,t=e._self._c;return t("h1",{staticClass:"title is-pulled-right"},[t("i",{staticClass:"fas fa-plus"}),e._v(" "),t("i",{staticClass:"fas fa-trophy"})])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"block"},[t("p",{},[t("i",{staticClass:"fas fa-spin fa-sync"})]),t("p",{staticClass:"is-size-7"},[e._v("Loading")])])},function(){var e=this,t=e._self._c;return t("p",[t("i",{staticClass:"fas fa-exclamation-triangle"}),e._v(" An error ocurred")])}],be=function(){var e=this,t=e._self._c;return t("div",[t("div",{directives:[{name:"show",rawName:"v-show",value:e.warningEdits.length>0,expression:"warningEdits.length > 0"}],staticClass:"message is-warning"},[t("div",{staticClass:"message-body is-clearfix"},[t("i",{staticClass:"fas fa-times-circle is-size-5 is-clickable is-pulled-right",on:{click:function(t){e.warningEdits=[]}}}),t("div",{staticClass:"content"},[t("p",[e._v("Please note the following warning:")]),t("ul",e._l(e.warningEdits,(function(s,a){return t("li",{key:`warning-${a}-${s.slice(0,10)}`},[e._v(e._s(s))])})),0)])])]),t("ValidationObserver",{ref:"observer"},[t("div",{staticClass:"field"},[t("label",{staticClass:"label",attrs:{for:""}},[e._v("ID tournament")]),t("div",{staticClass:"control"},[t("input",{staticClass:"input",attrs:{type:"text",disabled:"",placeholder:"Autogenerated after creation"},domProps:{value:""+(e.edit?e.id:"")}})])]),t("b-field",{staticClass:"my-4",attrs:{label:"Name"}},[t("b-autocomplete",{ref:"nameAutocomplete",attrs:{placeholder:"Start typing to find a name or create a new one","keep-first":!1,"open-on-focus":!1,data:e.filteredNameStrings,field:"value",clearable:!0},on:{select:t=>e.nameSelected=t},model:{value:e.nameInput,callback:function(t){e.nameInput=t},expression:"nameInput"}})],1),t("div",{staticClass:"columns"},[t("div",{staticClass:"column"},[t("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function({errors:s,valid:a}){return[t("b-field",{attrs:{label:"Start date & time (In local timezone)",type:{"is-danger":s[0],"is-success":a},message:s}},[t("b-datetimepicker",{attrs:{placeholder:"Type or select a date...",icon:"calendar",timepicker:{"hour-format":"24"},"datetime-formatter":e.datetimeToReadableFormat,"icon-pack":"fas",editable:""},model:{value:e.startTimestamp,callback:function(t){e.startTimestamp=t},expression:"startTimestamp"}})],1)]}}])}),e.startTimestamp?t("div",{staticClass:"message mb-2"},[t("div",{staticClass:"message-body p-2"},[t("p",{staticClass:"is-size-7"},[e._v("In local time ("+e._s(e.myTimezone)+"): "),t("b",[e._v(e._s(e.datetimeToReadableFormat(e.startTimestamp)))])]),t("p",{staticClass:"is-size-7"},[e._v("In Philippines time (GMT+8): "),t("b",[e._v(e._s(e.datetimeToPhilippinesToReadableFormat(e.startTimestamp)))])])])]):e._e()],1),t("div",{staticClass:"column"},[t("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function({errors:s,valid:a}){return[t("b-field",{attrs:{label:"End date & time (In local timezone)",type:{"is-danger":s[0],"is-success":a},message:s}},[t("b-datetimepicker",{attrs:{placeholder:"Type or select a date...",icon:"calendar",timepicker:{"hour-format":"24"},"datetime-formatter":e.datetimeToReadableFormat,"hour-format":24,"icon-pack":"fas",editable:""},model:{value:e.endTimestamp,callback:function(t){e.endTimestamp=t},expression:"endTimestamp"}})],1)]}}])}),e.endTimestamp?t("div",{staticClass:"message mb-2"},[t("div",{staticClass:"message-body p-2"},[t("p",{staticClass:"is-size-7"},[e._v("In local time ("+e._s(e.myTimezone)+"): "),t("b",[e._v(e._s(e.datetimeToReadableFormat(e.endTimestamp)))])]),t("p",{staticClass:"is-size-7"},[e._v("In Philippines time (GMT+8): "),t("b",[e._v(e._s(e.datetimeToPhilippinesToReadableFormat(e.endTimestamp)))])])])]):e._e()],1)]),t("div",{staticClass:"columns"},[t("div",{staticClass:"column"},[t("BInputNumberWithValidation",{attrs:{rules:"integer|max_value:24|min_value:-24",type:"number",label:"Time offset (Hours)",help:"Can be between -24 and 24. If empty, by default is 0 (no offset)."},model:{value:e.timeOffsetHours,callback:function(t){e.timeOffsetHours=t},expression:"timeOffsetHours"}})],1),t("div",{staticClass:"column"},[t("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0",type:"number",label:"Last entry (In minutes)",help:"If empty, by default is 15"},model:{value:e.lastEntryInMinutes,callback:function(t){e.lastEntryInMinutes=t},expression:"lastEntryInMinutes"}})],1)]),t("div",{staticClass:"columns"},[t("div",{staticClass:"column"},[t("BInputNumberWithValidation",{attrs:{rules:"required|integer|min_value:0",type:"number",label:"Restart Frequency",help:"In hours, when a new version of the tournament will start"},model:{value:e.restartFrequency,callback:function(t){e.restartFrequency=t},expression:"restartFrequency"}})],1),t("div",{staticClass:"column"},[t("BInputNumberWithValidation",{attrs:{rules:"required|integer|min_value:1",type:"number",label:"Duration",help:"In hours, how long this tournament will run once started. Must be a value equal or greater than 1"},model:{value:e.duration,callback:function(t){e.duration=t},expression:"duration"}})],1)]),t("BCheckboxesWithValidation",{attrs:{rules:"required|oneOf:0,1",label:"isActivated"}},[t("b-field",{staticClass:"my-4",attrs:{label:"Is tournament activated?"}},[t("b-radio",{attrs:{"native-value":"0"},model:{value:e.isActivated,callback:function(t){e.isActivated=t},expression:"isActivated"}},[e._v("Deactivated")]),t("b-radio",{attrs:{"native-value":"1"},model:{value:e.isActivated,callback:function(t){e.isActivated=t},expression:"isActivated"}},[e._v("Activated")])],1)],1),t("b-field",{staticClass:"my-4",attrs:{label:"Country Whitelist"}},[t("b-autocomplete",{attrs:{placeholder:"Search a country...","keep-first":!1,"open-on-focus":!1,data:e.filteredCountriesWhitelist,field:"name"},on:{select:t=>e.pushCountryWhitelist(t)},scopedSlots:e._u([{key:"empty",fn:function(){return[e._v('No country called "'+e._s(e.countryWhitelistInput)+'"')]},proxy:!0}]),model:{value:e.countryWhitelistInput,callback:function(t){e.countryWhitelistInput=t},expression:"countryWhitelistInput"}})],1),t("div",{staticClass:"message"},[0==e.countryWhitelistArray.length?t("div",{staticClass:"message-body"},[t("p",{staticClass:"is-size-7"},[e._v("If the country whitelist is empty, ALL countries are allowed.")])]):t("div",{staticClass:"message-body"},[t("p",{staticClass:"is-size-7 mb-3"},[e._v("The following countries are allowed:")]),t("b-taglist",e._l(e.countryWhitelistArray,(function(s){return t("b-tag",{key:"whitelist-"+s.code,attrs:{type:"is-primary",closable:!0},on:{close:function(t){return e.removeCountryFromWhitelist(s.code)}}},[e._v(" "+e._s(s.name)+" ")])})),1)],1)]),t("b-field",{staticClass:"my-4",attrs:{label:"Country Blacklist"}},[t("b-autocomplete",{attrs:{placeholder:"Start typing to find a name","keep-first":!1,"open-on-focus":!1,data:e.filteredCountriesBlacklist,field:"name"},on:{select:t=>e.pushCountryBlacklist(t)},scopedSlots:e._u([{key:"empty",fn:function(){return[e._v('No country called "'+e._s(e.countryWhitelistInput)+'"')]},proxy:!0}]),model:{value:e.countryBlacklistInput,callback:function(t){e.countryBlacklistInput=t},expression:"countryBlacklistInput"}})],1),t("div",{staticClass:"message"},[0==e.countryBlacklistArray.length?t("div",{staticClass:"message-body"},[t("p",{staticClass:"is-size-7"},[e._v("If the country blacklilst is empty, -NO- countries are blocked.")])]):t("div",{staticClass:"message-body"},[t("p",{staticClass:"is-size-7 mb-3"},[e._v("The following countries are not allowed:")]),t("b-taglist",e._l(e.countryBlacklistArray,(function(s){return t("b-tag",{key:"blacklist-"+s.code,attrs:{type:"is-danger",closable:!0},on:{close:function(t){return e.removeCountryFromBlacklist(s.code)}}},[e._v(" "+e._s(s.name)+" ")])})),1)],1)]),t("BSelectWithValidation",{attrs:{rules:"required|oneOf:NONE,OPEN,TEAM,PRO TEAM,PROVIDED,SELECT",label:"Bike restriction"},model:{value:e.bikeRestriction,callback:function(t){e.bikeRestriction=t},expression:"bikeRestriction"}},[t("option",{attrs:{value:"NONE"}},[e._v("None")]),t("option",{attrs:{value:"SELECT"}},[e._v("Select bikes")]),t("option",{attrs:{value:"OPEN"}},[e._v("Open")]),t("option",{attrs:{value:"TEAM"}},[e._v("Team")]),t("option",{attrs:{value:"PRO TEAM"}},[e._v("Pro Team")]),t("option",{attrs:{value:"PROVIDED"}},[e._v("Provided")])]),"SELECT"==e.bikeRestriction?t("div",[t("b-field",{staticClass:"my-4",attrs:{label:"Bikes to restrict (Select)"}},[t("b-autocomplete",{attrs:{placeholder:"Start typing to find a bike","keep-first":!1,"open-on-focus":!1,data:e.filteredBikeRestriction,field:"name"},on:{select:t=>e.pushBikeRestrictionArray(t)},scopedSlots:e._u([{key:"empty",fn:function(){return[e._v('No circuit found with name "'+e._s(e.bikeRestrictionInput)+'"')]},proxy:!0}],null,!1,1300342243),model:{value:e.bikeRestrictionInput,callback:function(t){e.bikeRestrictionInput=t},expression:"bikeRestrictionInput"}})],1),t("div",{staticClass:"message",class:{"is-danger":0==e.bikeRestrictionArray.length}},[0==e.bikeRestrictionArray.length?t("div",{staticClass:"message-body"},[t("p",{staticClass:"is-size-7"},[t("b",[e._v("REQUIRED")]),e._v(". Please, select at least one bike.")])]):t("div",{staticClass:"message-body"},[t("p",{staticClass:"is-size-7 mb-3"},[e._v("Restricted to the following bikes:")]),t("b-taglist",e._l(e.bikeRestrictionArray,(function(s){return t("b-tag",{key:"bike-restricted-"+s.id,attrs:{type:"is-primary",closable:!0},on:{close:function(t){return e.removeBikeFromRestriction(e.circuit.id)}}},[e._v(" "+e._s(s.name)+" ")])})),1)],1)])],1):e._e(),"PROVIDED"===e.bikeRestriction?t("div",[t("b-field",{staticClass:"my-4",attrs:{label:"Bike restriction (Provided)"}},[t("b-autocomplete",{ref:"bikeProvidedAutocomplete",attrs:{placeholder:"Start typing to find a bike","keep-first":!1,"open-on-focus":!1,data:e.filteredBikeProvided,field:"name",clearable:!0},on:{select:t=>e.bikeProvidedSelected=t},scopedSlots:e._u([{key:"empty",fn:function(){return[e._v('No bike found with name "'+e._s(e.bikeProvidedInput)+'"')]},proxy:!0}],null,!1,1673519830),model:{value:e.bikeProvidedInput,callback:function(t){e.bikeProvidedInput=t},expression:"bikeProvidedInput"}})],1)],1):e._e(),t("BCheckboxesWithValidation",{attrs:{rules:"required|oneOf:0,1",label:"isBikeUpgradesAllowed"}},[t("b-field",{staticClass:"my-4",attrs:{label:"Is bike upgrades allowed?"}},[t("b-radio",{attrs:{"native-value":"0"},model:{value:e.isBikeUpgradesAllowed,callback:function(t){e.isBikeUpgradesAllowed=t},expression:"isBikeUpgradesAllowed"}},[e._v("Don't allow bike upgrades")]),t("b-radio",{attrs:{"native-value":"1"},model:{value:e.isBikeUpgradesAllowed,callback:function(t){e.isBikeUpgradesAllowed=t},expression:"isBikeUpgradesAllowed"}},[e._v("Allow bike upgrades")])],1)],1),t("BSelectWithValidation",{attrs:{rules:"required",label:"Is compulsives allowed?"},model:{value:e.isCompulsivesAllowed,callback:function(t){e.isCompulsivesAllowed=t},expression:"isCompulsivesAllowed"}},[t("option",{attrs:{value:"ALL"}},[e._v("All")]),t("option",{attrs:{value:"NONE"}},[e._v("None")])]),t("BCheckboxesWithValidation",{attrs:{rules:"required|oneOf:1,2,3,4,5",label:"winningCondition"}},[t("b-field",{staticClass:"my-4",attrs:{label:"Winning condition"}},[t("b-radio",{attrs:{"native-value":"1"},model:{value:e.winningCondition,callback:function(t){e.winningCondition=t},expression:"winningCondition"}},[e._v("High Score")]),t("b-radio",{attrs:{"native-value":"2"},model:{value:e.winningCondition,callback:function(t){e.winningCondition=t},expression:"winningCondition"}},[e._v("Accumulated Score")]),t("b-radio",{attrs:{"native-value":"3"},model:{value:e.winningCondition,callback:function(t){e.winningCondition=t},expression:"winningCondition"}},[e._v("Total Circuit Score")]),t("b-radio",{attrs:{"native-value":"4"},model:{value:e.winningCondition,callback:function(t){e.winningCondition=t},expression:"winningCondition"}},[e._v("Best Daily Score")]),t("b-radio",{attrs:{"native-value":"5"},model:{value:e.winningCondition,callback:function(t){e.winningCondition=t},expression:"winningCondition"}},[e._v("Lottery Tickets")])],1)],1),t("BCheckboxesWithValidation",{attrs:{rules:"required|oneOf:0,1,2",label:"scoreDisplay"}},[t("b-field",{staticClass:"my-4",attrs:{label:"Display score?"}},[t("b-radio",{attrs:{"native-value":"0"},model:{value:e.scoreDisplay,callback:function(t){e.scoreDisplay=t},expression:"scoreDisplay"}},[e._v("Don't display")]),t("b-radio",{attrs:{"native-value":"1"},model:{value:e.scoreDisplay,callback:function(t){e.scoreDisplay=t},expression:"scoreDisplay"}},[e._v("Display Score")]),t("b-radio",{attrs:{"native-value":"2"},model:{value:e.scoreDisplay,callback:function(t){e.scoreDisplay=t},expression:"scoreDisplay"}},[e._v("Display Percent Increase")])],1)],1),t("BInputNumberWithValidation",{attrs:{rules:"integer|max_value:24|min_value:0",type:"number",label:"Lap limit",help:"Zero (0) is normal behaviour, otherwise enter the number of laps in race"},model:{value:e.lapLimit,callback:function(t){e.lapLimit=t},expression:"lapLimit"}}),t("BSelectWithValidation",{attrs:{rules:"required",label:"Circuit restrictions"},model:{value:e.selectedOptionCircuitRestriction,callback:function(t){e.selectedOptionCircuitRestriction=t},expression:"selectedOptionCircuitRestriction"}},[t("option",{attrs:{value:"NONE"}},[e._v("None")]),t("option",{attrs:{value:"RANDOM"}},[e._v("Random")]),t("option",{attrs:{value:"LIMITED"}},[e._v("Limited (Choose circuits...)")])]),"LIMITED"==e.selectedOptionCircuitRestriction?t("div",[t("b-field",{staticClass:"my-4",attrs:{label:"Circuit restriction (Limited)"}},[t("b-autocomplete",{attrs:{placeholder:"Start typing to find a circuit","keep-first":!1,"open-on-focus":!1,data:e.filteredCircuitRestriction,field:"name"},on:{select:t=>e.pushCircuitRestrictionArray(t)},scopedSlots:e._u([{key:"empty",fn:function(){return[e._v('No circuit found with name "'+e._s(e.circuitRestrictionInput)+'"')]},proxy:!0}],null,!1,2892632981),model:{value:e.circuitRestrictionInput,callback:function(t){e.circuitRestrictionInput=t},expression:"circuitRestrictionInput"}})],1),t("div",{staticClass:"message",class:{"is-danger":0==e.circuitRestrictionArray.length}},[0==e.circuitRestrictionArray.length?t("div",{staticClass:"message-body"},[t("p",{staticClass:"is-size-7"},[t("b",[e._v("REQUIRED")]),e._v(". Please, select at least one circuit to restrict.")])]):t("div",{staticClass:"message-body"},[t("p",{staticClass:"is-size-7 mb-3"},[e._v("Restricted to the following circuits:")]),t("b-taglist",e._l(e.circuitRestrictionArray,(function(s){return t("b-tag",{key:"circuit-"+s.id,attrs:{type:"is-primary",closable:!0},on:{close:function(t){return e.removeCircuitFromRestriction(s.id)}}},[e._v(" "+e._s(s.name)+" ")])})),1)],1)])],1):e._e(),t("div",{staticClass:"columns my-2 is-multiline"},[t("div",{staticClass:"column is-6"},[t("BInputNumberWithValidation",{attrs:{rules:"integer|max_value:32|min_value:0",type:"number",label:"Player starting position",help:"Min: 0 / Max: 32"},model:{value:e.playerStartingPosition,callback:function(t){e.playerStartingPosition=t},expression:"playerStartingPosition"}})],1),t("div",{staticClass:"column is-6"},[t("BInputNumberWithValidation",{attrs:{rules:"integer|max_value:31|min_value:-1",type:"number",label:"Opponents Limit",help:"Min: -1 / Max: 31"},model:{value:e.opponentsLimit,callback:function(t){e.opponentsLimit=t},expression:"opponentsLimit"}})],1),t("div",{staticClass:"column is-6"},[t("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0",type:"number",label:"Player MIN level"},model:{value:e.playerMinLevel,callback:function(t){e.playerMinLevel=t},expression:"playerMinLevel"}})],1),t("div",{staticClass:"column is-6"},[t("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0",type:"number",label:"Player MAX level"},model:{value:e.playerMaxLevel,callback:function(t){e.playerMaxLevel=t},expression:"playerMaxLevel"}})],1),t("div",{staticClass:"column is-6"},[t("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0",type:"number",label:"Bike MIN level"},model:{value:e.bikeMinLevel,callback:function(t){e.bikeMinLevel=t},expression:"bikeMinLevel"}})],1),t("div",{staticClass:"column is-6"},[t("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0",type:"number",label:"Bike MAX level"},model:{value:e.bikeMaxLevel,callback:function(t){e.bikeMaxLevel=t},expression:"bikeMaxLevel"}})],1),t("div",{staticClass:"column is-6"},[t("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0",type:"number",label:"Player MIN race"},model:{value:e.playerMinRace,callback:function(t){e.playerMinRace=t},expression:"playerMinRace"}})],1),t("div",{staticClass:"column is-6"},[t("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0",type:"number",label:"Player MAX race"},model:{value:e.playerMaxRace,callback:function(t){e.playerMaxRace=t},expression:"playerMaxRace"}})],1)]),t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-6"},[t("BInputNumberWithValidation",{attrs:{rules:"required|integer|min_value:0|multipleOf100",type:"number",label:"Entry cost"},model:{value:e.entryCost,callback:function(t){e.entryCost=t},expression:"entryCost"}})],1),t("div",{staticClass:"column is-6"},[t("BSelectWithValidation",{attrs:{rules:"required",label:"Entry cost currency"},model:{value:e.entryCurrency,callback:function(t){e.entryCurrency=t},expression:"entryCurrency"}},[t("option",{attrs:{value:"1"}},[e._v("Coins")]),t("option",{attrs:{value:"2"}},[e._v("Diamons")]),t("option",{attrs:{value:"3"}},[e._v("Dollars")]),t("option",{attrs:{value:"4"}},[e._v("Race Tickets")])])],1)]),t("BCheckboxesWithValidation",{attrs:{rules:"required",label:"isEntryFeeOnlyOnce"}},[t("b-field",{staticClass:"my-4",attrs:{label:"Is entry free only one"}},[t("b-radio",{attrs:{"native-value":"0"},model:{value:e.isEntryFeeOnlyOnce,callback:function(t){e.isEntryFeeOnlyOnce=t},expression:"isEntryFeeOnlyOnce"}},[e._v("No")]),t("b-radio",{attrs:{"native-value":"1"},model:{value:e.isEntryFeeOnlyOnce,callback:function(t){e.isEntryFeeOnlyOnce=t},expression:"isEntryFeeOnlyOnce"}},[e._v("Yes")])],1)],1),t("div",{staticClass:"card my-3"},[t("div",{staticClass:"card-content"},[t("h5",{staticClass:"title is-5"},[e._v("Prize Class 1")]),t("BSelectWithValidation",{attrs:{rules:"required",label:"Prize type"},model:{value:e.prizeClass1ID,callback:function(t){e.prizeClass1ID=t},expression:"prizeClass1ID"}},[t("option",{attrs:{value:"0"}},[e._v("No prize")]),t("option",{attrs:{value:"1"}},[e._v("Coins")]),t("option",{attrs:{value:"2"}},[e._v("Diamonds")]),t("option",{attrs:{value:"3"}},[e._v("Bike (Select bike...)")]),t("option",{attrs:{value:"4"}},[e._v("Physical Prize (Upload image...)")])]),"0"!==e.prizeClass1ID?t("b-field",{staticClass:"my-4",attrs:{label:"Prize description"}},[t("b-autocomplete",{ref:"prizeClass1DescAutocomplete",attrs:{placeholder:"Start typing to find a name or create a new one","keep-first":!1,"open-on-focus":!1,data:e.filteredStringsPrizeClass1Desc,field:"value",clearable:!0},on:{select:t=>e.prizeClass1DescSelected=t},model:{value:e.prizeClass1DescInput,callback:function(t){e.prizeClass1DescInput=t},expression:"prizeClass1DescInput"}})],1):e._e(),"1"===e.prizeClass1ID||"2"===e.prizeClass1ID?t("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0",type:"number",label:"Amount to win "},model:{value:e.prizeClass1Number,callback:function(t){e.prizeClass1Number=t},expression:"prizeClass1Number"}}):e._e(),"3"===e.prizeClass1ID?t("b-field",{staticClass:"my-4",attrs:{label:"Bike to win"}},[t("b-autocomplete",{ref:"prizeClass1BikeAutocomplete",attrs:{placeholder:"Start typing to find a bike","keep-first":!1,"open-on-focus":!1,data:e.filteredPrizeClass1Bike,field:"name",clearable:!0},on:{select:t=>e.selectPrizeClass1Bike(t)},scopedSlots:e._u([{key:"empty",fn:function(){return[e._v('No bike found with name "'+e._s(e.prizeClass1BikeInput)+'"')]},proxy:!0}],null,!1,2558047978),model:{value:e.prizeClass1BikeInput,callback:function(t){e.prizeClass1BikeInput=t},expression:"prizeClass1BikeInput"}})],1):e._e(),"4"===e.prizeClass1ID&&null!=e.prizeClass1URL?t("div",{staticClass:"box"},[t("label",{staticClass:"label"},[e._v("Prize Class 1 - Picture")]),t("p",{staticClass:"is-size-7 mb-3"},[e._v("(Original picture)")]),t("img",{staticClass:"image mt-3",attrs:{src:`${e.apiUrl}/images/${e.prizeClass1URL}`}}),t("div",{staticClass:"buttons mt-3"},[t("button",{staticClass:"button is-danger is-small",on:{click:function(t){e.prizeClass1URL=null}}},[e._v("Remove")])])]):e._e(),"4"===e.prizeClass1ID&&null==e.prizeClass1URL?t("div",{staticClass:"box"},[t("label",{staticClass:"label"},[e._v("Prize Class 1 - Picture")]),t("p",{staticClass:"is-size-7 mb-3"},[e._v("Only PNG. Minimum size required: 234x129 px.")]),e.prizeClass1ImageResultData?t("div",[t("img",{staticClass:"image",attrs:{src:e.prizeClass1ImageResultData}})]):e._e(),e.prizeClass1Image.src?t("div",{staticClass:"notification-cropper is-size-7"},[e._v(" Please crop the image to the correct."),t("br"),e._v(" You can use the wheel mouse to zoom in and out. ")]):e._e(),e.prizeClass1Image.src?t("cropper",{ref:"cropperPrize1Image",staticClass:"prize-cropper",attrs:{backgroundClass:"cropper-background",canvas:e.theCanvas,"stencil-props":e.theStencil,src:e.prizeClass1Image.src,roundResult:!1},on:{error:function(t){e.prizeClass1ImageLoaded=!1},ready:function(t){e.prizeClass1ImageLoaded=!0}}}):e._e(),e.prizeClass1ImageResultData?e._e():t("div",{staticClass:"buttons mt-3"},[t("button",{staticClass:"button is-small",class:{"is-primary":!e.prizeClass1Image.src,"is-light":e.prizeClass1Image.src},on:{click:function(t){return e.$refs.prizeClass1ImageInput.click()}}},[e.prizeClass1Image.src?t("span",[t("i",{staticClass:"fas fa-undo"}),e._v(" Upload another image")]):t("span",[t("i",{staticClass:"fas fa-search"}),e._v(" Upload file")]),t("input",{ref:"prizeClass1ImageInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/png"},on:{change:function(t){return e.uploadPrizeImage(t,1)}}})]),e.prizeClass1Image.src?t("button",{staticClass:"button is-primary is-small",attrs:{disabled:!e.prizeClass1ImageLoaded},on:{click:function(t){return e.cropPrizeClassImage(1)}}},[t("i",{staticClass:"fas fa-crop"}),e._v(" Crop image")]):e._e()]),e.prizeClass1ImageResultData&&!e.prizeClass1Image.src?t("div",{staticClass:"buttons mt-3"},[t("button",{staticClass:"button is-danger is-small",on:{click:function(t){e.prizeClass1ImageResultData=null}}},[t("i",{staticClass:"fas fa-trash"}),e._v(" Remove image")])]):e._e()],1):e._e(),"0"!==e.prizeClass1ID?t("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0",type:"number",label:"Min Rank to win prize"},model:{value:e.prizeClass1Rank,callback:function(t){e.prizeClass1Rank=t},expression:"prizeClass1Rank"}}):e._e()],1)]),t("div",{staticClass:"card my-3"},[t("div",{staticClass:"card-content"},[t("h5",{staticClass:"title is-5"},[e._v("Prize Class 2")]),t("BSelectWithValidation",{attrs:{rules:"required",label:"Prize type"},model:{value:e.prizeClass2ID,callback:function(t){e.prizeClass2ID=t},expression:"prizeClass2ID"}},[t("option",{attrs:{value:"0"}},[e._v("No prize")]),t("option",{attrs:{value:"1"}},[e._v("Coins")]),t("option",{attrs:{value:"2"}},[e._v("Diamonds")]),t("option",{attrs:{value:"3"}},[e._v("Bike (Select bike...)")]),t("option",{attrs:{value:"4"}},[e._v("Physical Prize (Upload image...)")])]),"0"!==e.prizeClass2ID?t("b-field",{staticClass:"my-4",attrs:{label:"Prize description"}},[t("b-autocomplete",{ref:"prizeClass2DescAutocomplete",attrs:{placeholder:"Start typing to find a name or create a new one","keep-first":!1,"open-on-focus":!1,data:e.filteredStringsPrizeClass2Desc,field:"value",clearable:!0},on:{select:t=>e.prizeClass2DescSelected=t},model:{value:e.prizeClass2DescInput,callback:function(t){e.prizeClass2DescInput=t},expression:"prizeClass2DescInput"}})],1):e._e(),"1"===e.prizeClass2ID||"2"===e.prizeClass2ID?t("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0",type:"number",label:"Amount to win "},model:{value:e.prizeClass2Number,callback:function(t){e.prizeClass2Number=t},expression:"prizeClass2Number"}}):e._e(),"3"===e.prizeClass2ID?t("b-field",{staticClass:"my-4",attrs:{label:"Bike to win"}},[t("b-autocomplete",{ref:"prizeClass2BikeAutocomplete",attrs:{placeholder:"Start typing to find a name","keep-first":!1,"open-on-focus":!1,data:e.filteredPrizeClass2Bike,field:"name"},on:{select:t=>e.selectPrizeClass2Bike(t)},scopedSlots:e._u([{key:"empty",fn:function(){return[e._v('No bike found with name "'+e._s(e.prizeClass2BikeInput)+'"')]},proxy:!0}],null,!1,2990955177),model:{value:e.prizeClass2BikeInput,callback:function(t){e.prizeClass2BikeInput=t},expression:"prizeClass2BikeInput"}})],1):e._e(),"4"===e.prizeClass2ID&&null!=e.prizeClass2URL?t("div",{staticClass:"box"},[t("label",{staticClass:"label"},[e._v("Prize Class 2 - Picture")]),t("p",{staticClass:"is-size-7 mb-3"},[e._v("(Original picture)")]),t("img",{staticClass:"image mt-3",attrs:{src:`${e.apiUrl}/images/${e.prizeClass2URL}`}}),t("div",{staticClass:"buttons mt-3"},[t("button",{staticClass:"button is-danger is-small",on:{click:function(t){e.prizeClass2URL=null}}},[e._v("Remove")])])]):e._e(),"4"===e.prizeClass2ID&&null==e.prizeClass2URL?t("div",{staticClass:"box"},[t("label",{staticClass:"label"},[e._v("Prize Class 2 - Picture")]),t("p",{staticClass:"is-size-7 mb-3"},[e._v("Only PNG. Minimum size required: 234x129 px.")]),e.prizeClass2ImageResultData?t("div",[t("img",{staticClass:"image",attrs:{src:e.prizeClass2ImageResultData}})]):e._e(),e.prizeClass2Image.src?t("div",{staticClass:"notification-cropper is-size-7"},[e._v(" Please crop the image to the correct."),t("br"),e._v(" You can use the wheel mouse to zoom in and out. ")]):e._e(),e.prizeClass2Image.src?t("cropper",{ref:"cropperPrize2Image",staticClass:"prize-cropper",attrs:{backgroundClass:"cropper-background",canvas:e.theCanvas,"stencil-props":e.theStencil,src:e.prizeClass2Image.src,roundResult:!1},on:{error:function(t){e.prizeClass2ImageLoaded=!1},ready:function(t){e.prizeClass2ImageLoaded=!0}}}):e._e(),e.prizeClass2ImageResultData?e._e():t("div",{staticClass:"buttons mt-3"},[t("button",{staticClass:"button is-small",class:{"is-primary":!e.prizeClass2Image.src,"is-light":e.prizeClass2Image.src},on:{click:function(t){return e.$refs.prizeClass2ImageInput.click()}}},[e.prizeClass2Image.src?t("span",[t("i",{staticClass:"fas fa-undo"}),e._v(" Upload another image")]):t("span",[t("i",{staticClass:"fas fa-search"}),e._v(" Upload file")]),t("input",{ref:"prizeClass2ImageInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/png"},on:{change:function(t){return e.uploadPrizeImage(t,2)}}})]),e.prizeClass2Image.src?t("button",{staticClass:"button is-primary is-small",attrs:{disabled:!e.prizeClass2ImageLoaded},on:{click:function(t){return e.cropPrizeClassImage(2)}}},[t("i",{staticClass:"fas fa-crop"}),e._v(" Crop image")]):e._e()]),e.prizeClass2ImageResultData&&!e.prizeClass2Image.src?t("div",{staticClass:"buttons mt-3"},[t("button",{staticClass:"button is-danger is-small",on:{click:function(t){e.prizeClass2ImageResultData=null}}},[t("i",{staticClass:"fas fa-trash"}),e._v(" Remove image")])]):e._e()],1):e._e(),"0"!==e.prizeClass2ID?t("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0",type:"number",label:"Min Rank to win prize"},model:{value:e.prizeClass2Rank,callback:function(t){e.prizeClass2Rank=t},expression:"prizeClass2Rank"}}):e._e()],1)]),t("div",{staticClass:"card my-3"},[t("div",{staticClass:"card-content"},[t("h5",{staticClass:"title is-5"},[e._v("Prize Class 3")]),t("BSelectWithValidation",{attrs:{rules:"required",label:"Prize type"},model:{value:e.prizeClass3ID,callback:function(t){e.prizeClass3ID=t},expression:"prizeClass3ID"}},[t("option",{attrs:{value:"0"}},[e._v("No prize")]),t("option",{attrs:{value:"1"}},[e._v("Coins (Enter amount...)")]),t("option",{attrs:{value:"2"}},[e._v("Diamonds (Enter amount...)")]),t("option",{attrs:{value:"3"}},[e._v("Bike (Select bike...)")]),t("option",{attrs:{value:"4"}},[e._v("Physical Prize (Upload image...)")])]),"0"!==e.prizeClass3ID?t("b-field",{staticClass:"my-4",attrs:{label:"Prize description"}},[t("b-autocomplete",{ref:"prizeClass3DescAutocomplete",attrs:{placeholder:"Start typing to find a name or create a new one","keep-first":!1,"open-on-focus":!1,data:e.filteredStringsPrizeClass3Desc,field:"value",clearable:!0},on:{select:t=>e.prizeClass3DescSelected=t},model:{value:e.prizeClass3DescInput,callback:function(t){e.prizeClass3DescInput=t},expression:"prizeClass3DescInput"}})],1):e._e(),"1"===e.prizeClass3ID||"2"===e.prizeClass3ID?t("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0",type:"number",label:"Amount to win "},model:{value:e.prizeClass3Number,callback:function(t){e.prizeClass3Number=t},expression:"prizeClass3Number"}}):e._e(),"3"===e.prizeClass3ID?t("b-field",{staticClass:"my-4",attrs:{label:"Bike to win"}},[t("b-autocomplete",{ref:"prizeClass3BikeAutocomplete",attrs:{placeholder:"Start typing to find a name","keep-first":!1,"open-on-focus":!1,data:e.filteredPrizeClass3Bike,field:"name"},on:{select:t=>e.selectPrizeClass3Bike(t)},scopedSlots:e._u([{key:"empty",fn:function(){return[e._v('No bike found with name "'+e._s(e.prizeClass3BikeInput)+'"')]},proxy:!0}],null,!1,1229788776),model:{value:e.prizeClass3BikeInput,callback:function(t){e.prizeClass3BikeInput=t},expression:"prizeClass3BikeInput"}})],1):e._e(),"4"===e.prizeClass3ID&&null!=e.prizeClass3URL?t("div",{staticClass:"box"},[t("label",{staticClass:"label"},[e._v("Prize Class 3 - Picture")]),t("p",{staticClass:"is-size-7 mb-3"},[e._v("(Original picture)")]),t("img",{staticClass:"image mt-3",attrs:{src:`${e.apiUrl}/images/${e.prizeClass3URL}`}}),t("div",{staticClass:"buttons mt-3"},[t("button",{staticClass:"button is-danger is-small",on:{click:function(t){e.prizeClass3URL=null}}},[e._v("Remove")])])]):e._e(),"4"===e.prizeClass3ID&&null==e.prizeClass3URL?t("div",{staticClass:"box"},[t("label",{staticClass:"label"},[e._v("Prize Class 3 - Picture")]),t("p",{staticClass:"is-size-7 mb-3"},[e._v("Only PNG. Minimum size required: 234x129 px.")]),e.prizeClass3ImageResultData?t("div",[t("img",{staticClass:"image",attrs:{src:e.prizeClass3ImageResultData}})]):e._e(),e.prizeClass3Image.src?t("div",{staticClass:"notification-cropper is-size-7"},[e._v(" Please crop the image to the correct."),t("br"),e._v(" You can use the wheel mouse to zoom in and out. ")]):e._e(),e.prizeClass3Image.src?t("cropper",{ref:"cropperPrize3Image",staticClass:"prize-cropper",attrs:{backgroundClass:"cropper-background",canvas:e.theCanvas,"stencil-props":e.theStencil,src:e.prizeClass3Image.src,roundResult:!1},on:{error:function(t){e.prizeClass3ImageLoaded=!1},ready:function(t){e.prizeClass3ImageLoaded=!0}}}):e._e(),e.prizeClass3ImageResultData?e._e():t("div",{staticClass:"buttons mt-3"},[t("button",{staticClass:"button is-small",class:{"is-primary":!e.prizeClass3Image.src,"is-light":e.prizeClass3Image.src},on:{click:function(t){return e.$refs.prizeClass3ImageInput.click()}}},[e.prizeClass3Image.src?t("span",[t("i",{staticClass:"fas fa-undo"}),e._v(" Upload another image")]):t("span",[t("i",{staticClass:"fas fa-search"}),e._v(" Upload file")]),t("input",{ref:"prizeClass3ImageInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/png"},on:{change:function(t){return e.uploadPrizeImage(t,3)}}})]),e.prizeClass3Image.src?t("button",{staticClass:"button is-primary is-small",attrs:{disabled:!e.prizeClass3ImageLoaded},on:{click:function(t){return e.cropPrizeClassImage(3)}}},[t("i",{staticClass:"fas fa-crop"}),e._v(" Crop image")]):e._e()]),e.prizeClass3ImageResultData&&!e.prizeClass3Image.src?t("div",{staticClass:"buttons mt-3"},[t("button",{staticClass:"button is-danger is-small",on:{click:function(t){e.prizeClass3ImageResultData=null}}},[t("i",{staticClass:"fas fa-trash"}),e._v(" Remove image")])]):e._e()],1):e._e(),"0"!==e.prizeClass3ID?t("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0",type:"number",label:"Min Rank to win prize"},model:{value:e.prizeClass3Rank,callback:function(t){e.prizeClass3Rank=t},expression:"prizeClass3Rank"}}):e._e()],1)]),t("b-field",{staticClass:"my-4",attrs:{label:"Sponsor Name"}},[t("b-autocomplete",{ref:"sponsorNameAutocomplete",attrs:{placeholder:"Start typing to find a string or create a new one","keep-first":!1,"open-on-focus":!1,data:e.filteredSponsorNameStrings,field:"value"},on:{select:t=>e.sponsorNameSelected=t},scopedSlots:e._u([{key:"empty",fn:function(){return[e._v('No string in MST found with "'+e._s(e.sponsorNameInput)+'"')]},proxy:!0}]),model:{value:e.sponsorNameInput,callback:function(t){e.sponsorNameInput=t},expression:"sponsorNameInput"}})],1),t("b-field",{staticClass:"my-4",attrs:{label:"Sponsor Slogan"}},[t("b-autocomplete",{ref:"sponsorSloganAutocomplete",attrs:{placeholder:"Start typing to find a string or create a new one","keep-first":!1,"open-on-focus":!1,data:e.filteredSponsorSloganStrings,field:"value"},on:{select:t=>e.sponsorSloganSelected=t},scopedSlots:e._u([{key:"empty",fn:function(){return[e._v('No string in MST found with "'+e._s(e.sponsorSloganInput)+'"')]},proxy:!0}]),model:{value:e.sponsorSloganInput,callback:function(t){e.sponsorSloganInput=t},expression:"sponsorSloganInput"}})],1),t("BCheckboxesWithValidation",{attrs:{rules:"required|",label:"filterable"}},[t("b-field",{staticClass:"my-4",attrs:{label:"Filterable?"}},[t("b-radio",{attrs:{"native-value":"0"},model:{value:e.filterable,callback:function(t){e.filterable=t},expression:"filterable"}},[e._v("No")]),t("b-radio",{attrs:{"native-value":"1"},model:{value:e.filterable,callback:function(t){e.filterable=t},expression:"filterable"}},[e._v("Yes")])],1)],1),t("BSelectWithValidation",{attrs:{rules:"required",label:"Rules modifications"},model:{value:e.rulesModification,callback:function(t){e.rulesModification=t},expression:"rulesModification"}},[t("option",{attrs:{value:"NONE"}},[e._v("None")]),t("option",{attrs:{value:"no_coins"}},[e._v("No coins")]),t("option",{attrs:{value:"brakes_2xcombo"}},[e._v("Brakes 2x combo")])]),"4"==e.prizeClass1ID?t("div",{staticClass:"my-4"},[t("BInputWithValidation",{attrs:{rules:"",label:"Helpshift Link Display"},model:{value:e.helpshiftLinkDisplay,callback:function(t){e.helpshiftLinkDisplay=t},expression:"helpshiftLinkDisplay"}})],1):e._e(),t("div",{staticClass:"columns is-multiline my-4"},[t("div",{staticClass:"column is-6"},[t("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0",type:"number",label:"Sort Order"},model:{value:e.sortOrder,callback:function(t){e.sortOrder=t},expression:"sortOrder"}})],1),t("div",{staticClass:"column is-6"},[t("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0",type:"number",label:"Min IAP"},model:{value:e.minIAP,callback:function(t){e.minIAP=t},expression:"minIAP"}})],1),t("div",{staticClass:"column is-6"},[t("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0|max_value:10",type:"number",label:"Worst Division"},model:{value:e.worstDivision,callback:function(t){e.worstDivision=t},expression:"worstDivision"}})],1),t("div",{staticClass:"column is-6"},[t("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0|max_value:"+(e.worstDivision?e.worstDivision:"10"),type:"number",label:"Best Division"},model:{value:e.bestDivision,callback:function(t){e.bestDivision=t},expression:"bestDivision"}})],1)]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.customValidationErrors.length>0,expression:"customValidationErrors.length > 0"}],staticClass:"message is-danger"},[t("div",{staticClass:"message-body is-clearfix"},[t("i",{staticClass:"fas fa-times-circle is-size-5 is-clickable is-pulled-right",on:{click:function(t){e.customValidationErrors=[]}}}),t("div",{staticClass:"content"},[t("p",[e._v("Please note the following errors:")]),t("ul",e._l(e.customValidationErrors,(function(s,a){return t("li",{key:`error-${a}-${s.slice(0,10)}`},[e._v(e._s(s))])})),0)])])]),t("div",{staticClass:"buttons"},[t("button",{staticClass:"button is-primary is-fullwidth",on:{click:e.handleSubmit}},[t("i",{staticClass:"fas fa-save"}),e._v(" Save")])])],1)],1)},Ce=[],ve=(s("907a"),s("986a"),s("1d02"),s("3c5d"),s("6ce5"),s("2834"),s("4ea1"),s("669d"),s("109c"),s("b2c1"),s("88a7"),s("271a"),s("5494"),function(){var e=this,t=e._self._c;return t("ValidationProvider",{attrs:{vid:e.vid,name:e.$attrs.name||e.$attrs.label,rules:e.rules},scopedSlots:e._u([{key:"default",fn:function({errors:s,valid:a}){return[t("b-field",e._b({attrs:{type:{"is-danger":s[0],"is-success":a},message:s}},"b-field",e.$attrs,!1),[t("b-input",e._b({model:{value:e.innerValue,callback:function(t){e.innerValue=e._n(t)},expression:"innerValue"}},"b-input",e.$attrs,!1))],1),e.help?t("div",{staticClass:"message mb-2"},[t("div",{staticClass:"message-body p-2"},[t("p",{staticClass:"is-size-7"},[e._v(e._s(e.help))])])]):e._e()]}}])})}),ge=[],ye={components:{ValidationProvider:$["b"]},props:{vid:{type:String},rules:{type:[Object,String],default:""},value:{type:null},help:{type:String,default:""}},data:()=>({innerValue:""}),watch:{innerValue(e){this.$emit("input",e)},value(e){this.innerValue=e}},created(){void 0!==this.value&&(this.innerValue=this.value)}},ke=ye,ze=Object(u["a"])(ke,ve,ge,!1,null,null,null),_e=ze.exports,De=function(){var e=this,t=e._self._c;return t("ValidationProvider",{attrs:{vid:e.vid,name:e.$attrs.label,rules:e.rules},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("div",{staticClass:"block"},[e._t("default"),t("p",{staticClass:"has-text-danger"},[e._v(e._s(s[0]))])],2)]}}],null,!0)})},Ie=[],Se={components:{ValidationProvider:$["b"]},props:{vid:{type:String},rules:{type:[Object,String],default:""}}},we=Se,Re=Object(u["a"])(we,De,Ie,!1,null,null,null),Te=Re.exports,Le=s("a2c1");const xe=[{name:"Afghanistan",code:"AF"},{name:"Åland Islands",code:"AX"},{name:"Albania",code:"AL"},{name:"Algeria",code:"DZ"},{name:"American Samoa",code:"AS"},{name:"AndorrA",code:"AD"},{name:"Angola",code:"AO"},{name:"Anguilla",code:"AI"},{name:"Antarctica",code:"AQ"},{name:"Antigua and Barbuda",code:"AG"},{name:"Argentina",code:"AR"},{name:"Armenia",code:"AM"},{name:"Aruba",code:"AW"},{name:"Australia",code:"AU"},{name:"Austria",code:"AT"},{name:"Azerbaijan",code:"AZ"},{name:"Bahamas",code:"BS"},{name:"Bahrain",code:"BH"},{name:"Bangladesh",code:"BD"},{name:"Barbados",code:"BB"},{name:"Belarus",code:"BY"},{name:"Belgium",code:"BE"},{name:"Belize",code:"BZ"},{name:"Benin",code:"BJ"},{name:"Bermuda",code:"BM"},{name:"Bhutan",code:"BT"},{name:"Bolivia",code:"BO"},{name:"Bosnia and Herzegovina",code:"BA"},{name:"Botswana",code:"BW"},{name:"Bouvet Island",code:"BV"},{name:"Brazil",code:"BR"},{name:"British Indian Ocean Territory",code:"IO"},{name:"Brunei Darussalam",code:"BN"},{name:"Bulgaria",code:"BG"},{name:"Burkina Faso",code:"BF"},{name:"Burundi",code:"BI"},{name:"Cambodia",code:"KH"},{name:"Cameroon",code:"CM"},{name:"Canada",code:"CA"},{name:"Cape Verde",code:"CV"},{name:"Cayman Islands",code:"KY"},{name:"Central African Republic",code:"CF"},{name:"Chad",code:"TD"},{name:"Chile",code:"CL"},{name:"China",code:"CN"},{name:"Christmas Island",code:"CX"},{name:"Cocos (Keeling) Islands",code:"CC"},{name:"Colombia",code:"CO"},{name:"Comoros",code:"KM"},{name:"Congo",code:"CG"},{name:"Congo, The Democratic Republic of the",code:"CD"},{name:"Cook Islands",code:"CK"},{name:"Costa Rica",code:"CR"},{name:'Cote D"Ivoire',code:"CI"},{name:"Croatia",code:"HR"},{name:"Cuba",code:"CU"},{name:"Cyprus",code:"CY"},{name:"Czech Republic",code:"CZ"},{name:"Denmark",code:"DK"},{name:"Djibouti",code:"DJ"},{name:"Dominica",code:"DM"},{name:"Dominican Republic",code:"DO"},{name:"Ecuador",code:"EC"},{name:"Egypt",code:"EG"},{name:"El Salvador",code:"SV"},{name:"Equatorial Guinea",code:"GQ"},{name:"Eritrea",code:"ER"},{name:"Estonia",code:"EE"},{name:"Ethiopia",code:"ET"},{name:"Falkland Islands (Malvinas)",code:"FK"},{name:"Faroe Islands",code:"FO"},{name:"Fiji",code:"FJ"},{name:"Finland",code:"FI"},{name:"France",code:"FR"},{name:"French Guiana",code:"GF"},{name:"French Polynesia",code:"PF"},{name:"French Southern Territories",code:"TF"},{name:"Gabon",code:"GA"},{name:"Gambia",code:"GM"},{name:"Georgia",code:"GE"},{name:"Germany",code:"DE"},{name:"Ghana",code:"GH"},{name:"Gibraltar",code:"GI"},{name:"Greece",code:"GR"},{name:"Greenland",code:"GL"},{name:"Grenada",code:"GD"},{name:"Guadeloupe",code:"GP"},{name:"Guam",code:"GU"},{name:"Guatemala",code:"GT"},{name:"Guernsey",code:"GG"},{name:"Guinea",code:"GN"},{name:"Guinea-Bissau",code:"GW"},{name:"Guyana",code:"GY"},{name:"Haiti",code:"HT"},{name:"Heard Island and Mcdonald Islands",code:"HM"},{name:"Holy See (Vatican City State)",code:"VA"},{name:"Honduras",code:"HN"},{name:"Hong Kong",code:"HK"},{name:"Hungary",code:"HU"},{name:"Iceland",code:"IS"},{name:"India",code:"IN"},{name:"Indonesia",code:"ID"},{name:"Iran, Islamic Republic Of",code:"IR"},{name:"Iraq",code:"IQ"},{name:"Ireland",code:"IE"},{name:"Isle of Man",code:"IM"},{name:"Israel",code:"IL"},{name:"Italy",code:"IT"},{name:"Jamaica",code:"JM"},{name:"Japan",code:"JP"},{name:"Jersey",code:"JE"},{name:"Jordan",code:"JO"},{name:"Kazakhstan",code:"KZ"},{name:"Kenya",code:"KE"},{name:"Kiribati",code:"KI"},{name:'Korea, Democratic People"S Republic of',code:"KP"},{name:"Korea, Republic of",code:"KR"},{name:"Kuwait",code:"KW"},{name:"Kyrgyzstan",code:"KG"},{name:'Lao People"S Democratic Republic',code:"LA"},{name:"Latvia",code:"LV"},{name:"Lebanon",code:"LB"},{name:"Lesotho",code:"LS"},{name:"Liberia",code:"LR"},{name:"Libyan Arab Jamahiriya",code:"LY"},{name:"Liechtenstein",code:"LI"},{name:"Lithuania",code:"LT"},{name:"Luxembourg",code:"LU"},{name:"Macao",code:"MO"},{name:"Macedonia, The Former Yugoslav Republic of",code:"MK"},{name:"Madagascar",code:"MG"},{name:"Malawi",code:"MW"},{name:"Malaysia",code:"MY"},{name:"Maldives",code:"MV"},{name:"Mali",code:"ML"},{name:"Malta",code:"MT"},{name:"Marshall Islands",code:"MH"},{name:"Martinique",code:"MQ"},{name:"Mauritania",code:"MR"},{name:"Mauritius",code:"MU"},{name:"Mayotte",code:"YT"},{name:"Mexico",code:"MX"},{name:"Micronesia, Federated States of",code:"FM"},{name:"Moldova, Republic of",code:"MD"},{name:"Monaco",code:"MC"},{name:"Mongolia",code:"MN"},{name:"Montserrat",code:"MS"},{name:"Morocco",code:"MA"},{name:"Mozambique",code:"MZ"},{name:"Myanmar",code:"MM"},{name:"Namibia",code:"NA"},{name:"Nauru",code:"NR"},{name:"Nepal",code:"NP"},{name:"Netherlands",code:"NL"},{name:"Netherlands Antilles",code:"AN"},{name:"New Caledonia",code:"NC"},{name:"New Zealand",code:"NZ"},{name:"Nicaragua",code:"NI"},{name:"Niger",code:"NE"},{name:"Nigeria",code:"NG"},{name:"Niue",code:"NU"},{name:"Norfolk Island",code:"NF"},{name:"Northern Mariana Islands",code:"MP"},{name:"Norway",code:"NO"},{name:"Oman",code:"OM"},{name:"Pakistan",code:"PK"},{name:"Palau",code:"PW"},{name:"Palestinian Territory, Occupied",code:"PS"},{name:"Panama",code:"PA"},{name:"Papua New Guinea",code:"PG"},{name:"Paraguay",code:"PY"},{name:"Peru",code:"PE"},{name:"Philippines",code:"PH"},{name:"Pitcairn",code:"PN"},{name:"Poland",code:"PL"},{name:"Portugal",code:"PT"},{name:"Puerto Rico",code:"PR"},{name:"Qatar",code:"QA"},{name:"Reunion",code:"RE"},{name:"Romania",code:"RO"},{name:"Russian Federation",code:"RU"},{name:"RWANDA",code:"RW"},{name:"Saint Helena",code:"SH"},{name:"Saint Kitts and Nevis",code:"KN"},{name:"Saint Lucia",code:"LC"},{name:"Saint Pierre and Miquelon",code:"PM"},{name:"Saint Vincent and the Grenadines",code:"VC"},{name:"Samoa",code:"WS"},{name:"San Marino",code:"SM"},{name:"Sao Tome and Principe",code:"ST"},{name:"Saudi Arabia",code:"SA"},{name:"Senegal",code:"SN"},{name:"Serbia and Montenegro",code:"CS"},{name:"Seychelles",code:"SC"},{name:"Sierra Leone",code:"SL"},{name:"Singapore",code:"SG"},{name:"Slovakia",code:"SK"},{name:"Slovenia",code:"SI"},{name:"Solomon Islands",code:"SB"},{name:"Somalia",code:"SO"},{name:"South Africa",code:"ZA"},{name:"South Georgia and the South Sandwich Islands",code:"GS"},{name:"Spain",code:"ES"},{name:"Sri Lanka",code:"LK"},{name:"Sudan",code:"SD"},{name:"Suriname",code:"SR"},{name:"Svalbard and Jan Mayen",code:"SJ"},{name:"Swaziland",code:"SZ"},{name:"Sweden",code:"SE"},{name:"Switzerland",code:"CH"},{name:"Syrian Arab Republic",code:"SY"},{name:"Taiwan",code:"TW"},{name:"Tajikistan",code:"TJ"},{name:"Tanzania, United Republic of",code:"TZ"},{name:"Thailand",code:"TH"},{name:"Timor-Leste",code:"TL"},{name:"Togo",code:"TG"},{name:"Tokelau",code:"TK"},{name:"Tonga",code:"TO"},{name:"Trinidad and Tobago",code:"TT"},{name:"Tunisia",code:"TN"},{name:"Turkey",code:"TR"},{name:"Turkmenistan",code:"TM"},{name:"Turks and Caicos Islands",code:"TC"},{name:"Tuvalu",code:"TV"},{name:"Uganda",code:"UG"},{name:"Ukraine",code:"UA"},{name:"United Arab Emirates",code:"AE"},{name:"United Kingdom",code:"GB"},{name:"United States",code:"US"},{name:"United States Minor Outlying Islands",code:"UM"},{name:"Uruguay",code:"UY"},{name:"Uzbekistan",code:"UZ"},{name:"Vanuatu",code:"VU"},{name:"Venezuela",code:"VE"},{name:"Viet Nam",code:"VN"},{name:"Virgin Islands, British",code:"VG"},{name:"Virgin Islands, U.S.",code:"VI"},{name:"Wallis and Futuna",code:"WF"},{name:"Western Sahara",code:"EH"},{name:"Yemen",code:"YE"},{name:"Zambia",code:"ZM"},{name:"Zimbabwe",code:"ZW"}];var Ne={props:{edit:{type:Boolean,default:!1},strings:{type:Array,default:()=>[]},bikes:{type:Array,default:()=>[]},circuits:{type:Array,default:()=>[]},tournament:{type:Object,default:()=>{}}},components:{ValidationObserver:$["a"],ValidationProvider:$["b"],BSelectWithValidation:H,BInputWithValidation:ee,BInputNumberWithValidation:_e,BCheckboxesWithValidation:Te,Cropper:Le["a"]},data(){return{initializated:!1,nameInput:"",nameSelected:null,countryWhitelistInput:"",countryBlacklistInput:"",countryWhitelistArray:[],countryBlacklistArray:[],bikeRestrictionInput:"",bikeRestrictionArray:[],bikeProvidedInput:"",bikeProvidedSelected:null,selectedOptionCircuitRestriction:"RANDOM",circuitRestrictionInput:"",circuitRestrictionArray:[],prizeClass1DescInput:"",prizeClass1DescSelected:null,prizeClass1BikeInput:"",prizeClass1BikeSelected:null,prizeClass2DescInput:"",prizeClass2DescSelected:null,prizeClass3DescInput:"",prizeClass3DescSelected:null,prizeClass1Image:{src:null,type:null},prizeClass1ImageLoaded:!1,prizeClass1ImageResultData:null,prizeClass2Image:{src:null,type:null},prizeClass2ImageLoaded:!1,prizeClass2ImageResultData:null,prizeClass3Image:{src:null,type:null},prizeClass3ImageLoaded:!1,prizeClass3ImageResultData:null,theCanvas:{minHeight:129,maxHeight:129,maxWidth:234,minWidth:234},theStencil:{aspectRatio:78/43},sponsorNameInput:"",sponsorNameSelected:null,sponsorSloganInput:"",sponsorSloganSelected:null,isLoading:!1,customValidationErrors:[],warningEdits:[],id:null,startTimestamp:null,endTimestamp:null,timeOffsetHours:null,restartFrequency:null,duration:null,lastEntryInMinutes:15,isActivated:"0",bikeRestriction:"NONE",isBikeUpgradesAllowed:"1",isCompulsivesAllowed:"ALL",winningCondition:"1",scoreDisplay:"0",lapLimit:0,playerStartingPosition:null,opponentsLimit:-1,playerMaxLevel:null,playerMinLevel:null,bikeMaxLevel:null,bikeMinLevel:null,playerMaxRace:null,playerMinRace:null,entryCost:0,entryCurrency:"1",isEntryFeeOnlyOnce:"0",prizeClass1ID:"0",prizeClass1Desc:null,prizeClass1URL:null,prizeClass1Number:null,prizeClass1Rank:null,prizeClass2ID:"0",prizeClass2Desc:null,prizeClass2URL:null,prizeClass2Number:null,prizeClass2Rank:null,prizeClass3ID:"0",prizeClass3Desc:null,prizeClass3URL:null,prizeClass3Number:null,prizeClass3Rank:null,filterable:"1",rulesModification:"NONE",helpshiftLinkDisplay:"",sortOrder:"0",minIAP:"0",worstDivision:"10",bestDivision:"1"}},beforeMount(){this.edit?this.loadTournamentData():this.initializated=!0},mounted(){this.edit&&this.updateRefs()},destroyed(){this.prizeClass1Image.src&&URL.revokeObjectURL(this.prizeClass1Image.src),this.prizeClass2Image.src&&URL.revokeObjectURL(this.prizeClass2Image.src),this.prizeClass3Image.src&&URL.revokeObjectURL(this.prizeClass3Image.src)},methods:{datetimeToReadableFormat(e){return ce()(e).format("YYYY-MM-DD HH:mm:ss")},datetimeToPhilippinesToReadableFormat(e){return ce()(e).tz("Asia/Manila").format("YYYY-MM-DD HH:mm:ss")},handleSubmit(){this.customValidationErrors=[],this.$refs.observer.validate().then(e=>!e&&(this.showErrorNotification("Some fields are invalid or missing, please check the form"),this.customValidationErrors.push("Some fields are invalid or missing, please check the form"),!0)).then(e=>{let t=e;return null==this.nameSelected&&""==this.nameInput&&(this.customValidationErrors.push("Tournament name not selected or defined: You must select a string from the MST or define a new one"),t=!0),null==this.startTimestamp&&(this.customValidationErrors.push("Start date not selected: You must select a date"),t=!0),null==this.endTimestamp&&(this.customValidationErrors.push("End date not selected: You must select a date"),t=!0),"PROVIDED"===this.bikeRestriction&&(this.bikeProvidedSelected||(this.customValidationErrors.push('No bike for bike restriction "PROVIDED": You must provide a bike to the restriction'),t=!0)),"SELECT"===this.bikeRestriction&&0===this.bikeRestrictionArray.length&&(this.customValidationErrors.push('No bike(s) for bike restriction "SELECT": You must select at least one bike'),t=!0),"LIMITED"===this.selectedOptionCircuitRestriction&&0===this.circuitRestrictionArray.length&&(this.customValidationErrors.push("Circuit restriction not selected: You must select at least one circuit"),t=!0),"1"===this.prizeClass1ID||"2"===this.prizeClass1ID?this.prizeClass1Number||(this.customValidationErrors.push("Prize 1: No prize amount given - You must enter a value"),t=!0):"3"===this.prizeClass1ID&&(this.prizeClass1BikeSelected||(this.customValidationErrors.push("Prize 1: No bike selected: You must select a bike as a prize"),t=!0)),"1"===this.prizeClass2ID||"2"===this.prizeClass2ID?this.prizeClass2Number||(this.customValidationErrors.push("Prize 2: No prize amount given - You must enter a value"),t=!0):"3"===this.prizeClass2ID&&(this.prizeClass2BikeSelected||(this.customValidationErrors.push("Prize 2: No bike selected: You must select a bike as a prize"),t=!0)),"1"===this.prizeClass3ID||"2"===this.prizeClass3ID?this.prizeClass3Number||(this.customValidationErrors.push("Prize 3: No prize amount given - You must enter a value"),t=!0):"3"===this.prizeClass3ID&&(this.prizeClass3BikeSelected||(this.customValidationErrors.push("Prize 3: No bike selected: You must select a bike as a prize"),t=!0)),t}).then(e=>{e?this.showErrorNotification("Some fields are invalid or missing, please check the form"):this.makePayload()}).catch(e=>{this.showErrorNotification(e.message?e.message:"Validation failed, please check the form"),console.error(e)})},makePayload(){const e={};this.nameInput&&null==this.nameSelected?e.name="*"+this.nameInput:e.name=this.nameSelected.name,e.startTimestamp=ce()(this.startTimestamp).unix(),e.endTimestamp=ce()(this.endTimestamp).unix(),e.restartFrequency=parseInt(this.restartFrequency),e.duration=parseInt(this.duration),this.timeOffsetHours&&(e.timeOffsetHours=parseInt(this.timeOffsetHours)),this.lastEntryInMinutes&&(e.lastEntryInMinutes=parseInt(this.lastEntryInMinutes)),e.isActivated=parseInt(this.isActivated),this.countryWhitelistArray.length>0?e.countryWhiteList=this.countryWhitelistArray.map(e=>e.code).join("|"):e.countryWhiteList="ALL",this.countryBlacklistArray.length>0&&(e.countryBlackList=this.countryBlacklistArray.map(e=>e.code).join("|")),"SELECT"===this.bikeRestriction?e.bikeRestriction=this.bikeRestrictionArray.map(e=>e.id).join("|"):"PROVIDED"===this.bikeRestriction&&this.bikeProvidedSelected?(e.bikeRestriction="PROVIDED",e.bikeProvided=this.bikeProvidedSelected.id):"PRO TEAM"===this.bikeRestriction?e.bikeRestriction="Pro Team":e.bikeRestriction=this.bikeRestriction,"PROVIDED"!==this.bikeRestriction&&(e.bikeProvided=0),e.isBikeUpgradesAllowed=parseInt(this.isBikeUpgradesAllowed),e.isCompulsivesAllowed=this.isCompulsivesAllowed,e.winningCondition=parseInt(this.winningCondition),e.scoreDisplay=parseInt(this.scoreDisplay),this.lapLimit&&(e.lapLimit=parseInt(this.lapLimit)),"LIMITED"===this.selectedOptionCircuitRestriction&&this.circuitRestrictionArray.length>0?e.circuitRestriction=this.circuitRestrictionArray.map(e=>e.id).join("|"):"NONE"===this.selectedOptionCircuitRestriction?e.circuitRestriction="":"RANDOM"===this.selectedOptionCircuitRestriction&&(e.circuitRestriction="RANDOM"),this.isOptional(this.playerStartingPosition)&&(e.playerStartingPosition=parseInt(this.playerStartingPosition)),this.isOptional(this.opponentsLimit)&&(e.opponentsLimit=parseInt(this.opponentsLimit)),this.isOptional(this.playerMaxLevel)&&(e.playerMaxLevel=parseInt(this.playerMaxLevel)),this.isOptional(this.playerMinLevel)&&(e.playerMinLevel=parseInt(this.playerMinLevel)),this.isOptional(this.bikeMaxLevel)&&(e.bikeMaxLevel=parseInt(this.bikeMaxLevel)),this.isOptional(this.bikeMinLevel)&&(e.bikeMinLevel=parseInt(this.bikeMinLevel)),this.isOptional(this.playerMaxRace)&&(e.playerMaxRace=parseInt(this.playerMaxRace)),this.isOptional(this.playerMinRace)&&(e.playerMinRace=parseInt(this.playerMinRace)),e.entryCost=parseInt(this.entryCost),e.entryCurrency=parseInt(this.entryCurrency),e.isEntryFeeOnlyOnce=parseInt(this.isEntryFeeOnlyOnce),e.prizeClass1ID=parseInt(this.prizeClass1ID),"0"!==this.prizeClass1ID&&(""!=this.prizeClass1DescInput&&null==this.prizeClass1DescSelected?e.prizeClass1Desc="*"+this.prizeClass1DescInput:null!=this.prizeClass1DescSelected&&(e.prizeClass1Desc=this.prizeClass1DescSelected.name),"1"===this.prizeClass1ID||"2"===this.prizeClass1ID?e.prizeClass1Number=parseInt(this.prizeClass1Number):"3"===this.prizeClass1ID?e.prizeClass1Number=parseInt(this.prizeClass1BikeSelected.id):"4"===this.prizeClass1ID&&(this.prizeClass1ImageResultData?e.prizeClass1URL=this.prizeClass1ImageResultData:this.prizeClass1URL&&(e.prizeClass1URL=this.prizeClass1URL)),this.isOptional(this.prizeClass1Rank)&&(e.prizeClass1Rank=parseInt(this.prizeClass1Rank))),e.prizeClass2ID=parseInt(this.prizeClass2ID),"0"!==this.prizeClass2ID&&(""!=this.prizeClass2DescInput&&null==this.prizeClass2DescSelected?e.prizeClass2Desc="*"+this.prizeClass2DescInput:null!=this.prizeClass2DescSelected&&(e.prizeClass2Desc=this.prizeClass2DescSelected.name),"1"===this.prizeClass2ID||"2"===this.prizeClass2ID?e.prizeClass2Number=parseInt(this.prizeClass2Number):"3"===this.prizeClass2ID?e.prizeClass2Number=parseInt(this.prizeClass2BikeSelected.id):"4"===this.prizeClass2ID&&(this.prizeClass2ImageResultData?e.prizeClass2URL=this.prizeClass2ImageResultData:this.prizeClass2URL&&(e.prizeClass2URL=this.prizeClass2URL)),this.isOptional(this.prizeClass2Rank)&&(e.prizeClass2Rank=parseInt(this.prizeClass2Rank))),e.prizeClass3ID=parseInt(this.prizeClass3ID),"0"!==this.prizeClass3ID&&(""!=this.prizeClass3DescInput&&null==this.prizeClass3DescSelected?e.prizeClass3Desc="*"+this.prizeClass3DescInput:null!=this.prizeClass3DescSelected&&(e.prizeClass3Desc=this.prizeClass3DescSelected.name),"1"===this.prizeClass3ID||"2"===this.prizeClass3ID?e.prizeClass3Number=parseInt(this.prizeClass3Number):"3"===this.prizeClass3ID?e.prizeClass3Number=parseInt(this.prizeClass3BikeSelected.id):"4"===this.prizeClass3ID&&(this.prizeClass3ImageResultData?e.prizeClass3URL=this.prizeClass3ImageResultData:this.prizeClass3URL&&(e.prizeClass3URL=this.prizeClass3URL)),this.isOptional(this.prizeClass3Rank)&&(e.prizeClass3Rank=parseInt(this.prizeClass3Rank))),null!=this.sponsorNameSelected?e.sponsorName=this.sponsorNameSelected.name:""!=this.sponsorNameInput&&null==this.sponsorNameSelected?e.sponsorName="*"+this.sponsorNameInput:e.sponsorName="",null!=this.sponsorNameSelected?e.sponsorSlogan=this.sponsorSloganSelected.name:""!=this.sponsorSloganInput||null!=this.sponsorSloganSelected?e.sponsorSlogan="*"+this.sponsorSloganInput:e.sponsorSlogan="",e.filterable=parseInt(this.filterable),e.rulesModification=this.rulesModification,"4"===this.prizeClass1ID&&this.isOptional(this.helpshiftLinkDisplay)&&(e.helpshiftLinkDisplay=this.helpshiftLinkDisplay),this.isOptional(this.sortOrder)&&(e.sortOrder=parseInt(this.sortOrder)),this.isOptional(this.minIAP)&&(e.minIAP=parseInt(this.minIAP)),this.isOptional(this.worstDivision)&&(e.worstDivision=parseInt(this.worstDivision)),this.isOptional(this.bestDivision)&&(e.bestDivision=parseInt(this.bestDivision)),this.$emit("submit",e)},loadTournamentData(){if(this.id=this.tournament.id,void 0!==this.tournament.name)if("*"===this.tournament.name[0])this.nameInput=this.tournament.name.slice(1);else{let e=this.strings.find(e=>e.name===this.tournament.name);void 0===e?this.warningEdits.push(`Tournament name "${this.tournament.name}" is not a custom string and is not in the MST list. Please assign a correct string or write a new custom name.`):(this.nameSelected=e,this.nameInput=e.value)}if(void 0!=this.tournament.isActivated&&(this.isActivated=this.tournament.isActivated.toString()),this.tournament.startTimestamp){let e=this.tournament.startTimestamp.split(" ")[0]+"T"+this.tournament.startTimestamp.split(" ")[1]+"+08:00",t=new Date(e);this.startTimestamp=t}if(this.tournament.endTimestamp){let e=this.tournament.endTimestamp.split(" ")[0]+"T"+this.tournament.endTimestamp.split(" ")[1]+"+08:00",t=new Date(e);this.endTimestamp=t}if(void 0!=this.tournament.timeOffsetHours&&(this.timeOffsetHours=this.tournament.timeOffsetHours.toString()),void 0!=this.tournament.lastEntryInMinutes&&(this.lastEntryInMinutes=this.tournament.lastEntryInMinutes.toString()),void 0!=this.tournament.restartFrequency&&(this.restartFrequency=this.tournament.restartFrequency.toString()),void 0!=this.tournament.duration&&(this.duration=this.tournament.duration.toString()),"ALL"!=this.tournament.countryWhiteList&&void 0!=this.tournament.countryWhiteList&&""!=this.tournament.countryWhiteList){let e=this.tournament.countryWhiteList.split("|");this.countryWhitelistArray=e.map(e=>{let t=xe.find(t=>t.code===e);return void 0===t?(this.warningEdits.push(`Country code "${e}" for the "countryWhiteList" not found. Might be a wrong country code or not in the countries list. Please check with admin.`),{code:e,name:"?????????"}):t})}if("ALL"!=this.tournament.countryBlackList&&void 0!=this.tournament.countryBlackList&&""!=this.tournament.countryBlackList){let e=this.tournament.countryBlackList.split("|");this.countryBlacklistArray=e.map(e=>{let t=xe.find(t=>t.code===e);return void 0===t?(this.warningEdits.push(`Country code "${e}" for the "countryBlackList" not found. Might be a wrong country code or not in the countries list. Please check with admin.`),{code:e,name:"?????????"}):t})}if(void 0!=this.tournament.bikeRestriction){const e=this.tournament.bikeRestriction.toUpperCase();let t=["NONE","OPEN","TEAM","PRO TEAM","PROVIDED"];if(t.includes(e)&&(this.bikeRestriction=e),"PROVIDED"===e&&0!==this.tournament.bikeProvided){let e=this.bikes.find(e=>e.id==this.tournament.bikeProvided);void 0===e?this.warningEdits.push(`Bike ID "${this.tournament.bikeProvided}" for the "bikeProvided" not found. Might be a wrong bike ID or not in the bikes list. Please check with admin.`):(this.bikeProvidedSelected=e,this.bikeProvidedInput=e.name)}if(this.stringHasDigits(e)){let e=this.tournament.bikeRestriction.split("|");this.bikeRestriction="SELECT",this.bikeRestrictionArray=e.map(e=>{let t=this.bikes.find(t=>t.id==e);return void 0===t?(this.warningEdits.push(`Bike ID "${e}" for the "bikeRestriction" not found. Might be a wrong bike ID or not in the bikes list. Please check with admin.`),{id:e,name:"?????????"}):t})}}if(void 0!=this.tournament.isBikeUpgradesAllowed&&(this.isBikeUpgradesAllowed=this.tournament.isBikeUpgradesAllowed.toString()),void 0!=this.tournament.isCompulsivesAllowed&&(this.isCompulsivesAllowed=this.tournament.isCompulsivesAllowed.toUpperCase()),void 0!=this.tournament.winningCondition&&(this.winningCondition=this.tournament.winningCondition.toString()),void 0!=this.tournament.scoreDisplay&&(this.scoreDisplay=this.tournament.scoreDisplay.toString()),void 0!=this.tournament.lapLimit&&(this.lapLimit=this.tournament.lapLimit.toString()),void 0!=this.tournament.circuitRestriction){let e=this.tournament.circuitRestriction.toUpperCase();if("RANDOM"===e)this.selectedOptionCircuitRestriction="RANDOM";else if(""===e)this.selectedOptionCircuitRestriction="NONE";else if(this.stringHasDigits(this.tournament.circuitRestriction)){this.selectedOptionCircuitRestriction="LIMITED";let e=this.tournament.circuitRestriction.split("|");this.circuitRestrictionArray=e.map(e=>{let t=this.circuits.find(t=>t.id==e);return void 0===t?(this.warningEdits.push(`Circuit ID "${e}" for the "circuitRestriction" not found. Might be a wrong circuit ID or not in the circuits list. Please check with admin.`),{id:e,name:"?????????"}):t})}}if(void 0!=this.tournament.playerStartingPosition&&(this.playerStartingPosition=this.tournament.playerStartingPosition.toString()),void 0!=this.tournament.opponentsLimit&&(this.opponentsLimit=this.tournament.opponentsLimit.toString()),void 0!=this.tournament.playerMinLevel&&(this.playerMinLevel=this.tournament.playerMinLevel.toString()),void 0!=this.tournament.playerMaxLevel&&(this.playerMaxLevel=this.tournament.playerMaxLevel.toString()),void 0!=this.tournament.bikeMinLevel&&(this.bikeMinLevel=this.tournament.bikeMinLevel.toString()),void 0!=this.tournament.bikeMaxLevel&&(this.bikeMaxLevel=this.tournament.bikeMaxLevel.toString()),void 0!=this.tournament.playerMinRace&&(this.playerMinRace=this.tournament.playerMinRace.toString()),void 0!=this.tournament.playerMaxRace&&(this.playerMaxRace=this.tournament.playerMaxRace.toString()),void 0!=this.tournament.entryCost&&(this.entryCost=this.tournament.entryCost.toString()),void 0!=this.tournament.entryCurrency&&(this.entryCurrency=this.tournament.entryCurrency.toString()),void 0!=this.tournament.isEntryFeeOnlyOnce&&(this.isEntryFeeOnlyOnce=this.tournament.isEntryFeeOnlyOnce.toString()),void 0!==this.tournament.prizeClass1ID){if(this.prizeClass1ID=this.tournament.prizeClass1ID.toString(),3===this.tournament.prizeClass1ID){let e=this.bikes.find(e=>e.id==this.tournament.prizeClass1Number);void 0===e?this.warningEdits.push(`Bike ID "${this.tournament.prizeClass1Number}" for the "prizeClass1Number" not found. Might be a wrong bike ID or not in the bikes list. Please check with admin.`):(this.prizeClass1BikeSelected=e,this.prizeClass1BikeInput=e.name)}4===this.tournament.prizeClass1ID&&this.tournament.prizeClass1URL&&(this.prizeClass1URL=this.tournament.prizeClass1URL)}if(void 0!==this.tournament.prizeClass1Desc)if(""===this.tournament.prizeClass1Desc)this.prizeClass1DescInput="";else if("*"===this.tournament.prizeClass1Desc[0])this.prizeClass1DescInput=this.tournament.prizeClass1Desc.slice(1);else{let e=this.strings.find(e=>e.name===this.tournament.prizeClass1Desc);void 0===e?this.warningEdits.push(`String "${this.tournament.prizeClass1Desc}" for the "prizeClass1Desc" not found. Might be a wrong string or not in the strings list. Please check with admin.`):(this.prizeClass1DescSelected=e,this.prizeClass1DescInput=e.value)}if(void 0!==this.tournament.prizeClass1Number&&(this.prizeClass1Number=this.tournament.prizeClass1Number.toString()),void 0!==this.tournament.prizeClass1Rank&&(this.prizeClass1Rank=this.tournament.prizeClass1Rank.toString()),void 0!==this.tournament.prizeClass2ID){if(this.prizeClass2ID=this.tournament.prizeClass2ID.toString(),3===this.tournament.prizeClass2ID){let e=this.bikes.find(e=>e.id==this.tournament.prizeClass2Number);void 0===e?this.warningEdits.push(`Bike ID "${this.tournament.prizeClass2Number}" for the "prizeClass2Number" not found. Might be a wrong bike ID or not in the bikes list. Please check with admin.`):(this.prizeClass2BikeSelected=e,this.prizeClass2BikeInput=e.name)}4===this.tournament.prizeClass2ID&&(this.prizeClass2URL=this.tournament.prizeClass2URL)}if(void 0!==this.tournament.prizeClass2Desc)if(""===this.tournament.prizeClass2Desc)this.prizeClass2DescInput="";else if("*"===this.tournament.prizeClass2Desc[0])this.prizeClass2DescInput=this.tournament.prizeClass2Desc.slice(1);else{let e=this.strings.find(e=>e.name===this.tournament.prizeClass2Desc);void 0===e?this.warningEdits.push(`String "${this.tournament.prizeClass2Desc}" for the "prizeClass2Desc" not found. Might be a wrong string or not in the strings list. Please check with admin.`):(this.prizeClass2DescSelected=e,this.prizeClass2DescInput=e.value)}if(void 0!==this.tournament.prizeClass2Number&&(this.prizeClass2Number=this.tournament.prizeClass2Number.toString()),void 0!==this.tournament.prizeClass2Rank&&(this.prizeClass2Rank=this.tournament.prizeClass2Rank.toString()),void 0!==this.tournament.prizeClass3ID){if(this.prizeClass3ID=this.tournament.prizeClass3ID.toString(),3===this.tournament.prizeClass3ID){let e=this.bikes.find(e=>e.id==this.tournament.prizeClass3Number);void 0===e?this.warningEdits.push(`Bike ID "${this.tournament.prizeClass3Number}" for the "prizeClass3Number" not found. Might be a wrong bike ID or not in the bikes list. Please check with admin.`):(this.prizeClass3BikeSelected=e,this.prizeClass3BikeInput=e.name)}4===this.tournament.prizeClass3ID&&(this.prizeClass3URL=this.tournament.prizeClass3URL)}if(void 0!==this.tournament.prizeClass3Desc)if(""===this.tournament.prizeClass3Desc)this.prizeClass3DescInput="";else if("*"===this.tournament.prizeClass3Desc[0])this.prizeClass3DescInput=this.tournament.prizeClass3Desc.slice(1);else{let e=this.strings.find(e=>e.name===this.tournament.prizeClass3Desc);void 0===e?this.warningEdits.push(`String "${this.tournament.prizeClass3Desc}" for the "prizeClass3Desc" not found. Might be a wrong string or not in the strings list. Please check with admin.`):(this.prizeClass3DescSelected=e,this.prizeClass3DescInput=e.value)}if(void 0!==this.tournament.prizeClass3Number&&(this.prizeClass3Number=this.tournament.prizeClass3Number.toString()),void 0!==this.tournament.prizeClass3Rank&&(this.prizeClass3Rank=this.tournament.prizeClass3Rank.toString()),void 0!==this.tournament.sponsorName)if(""===this.tournament.sponsorName)this.sponsorNameInput="";else if("*"===this.tournament.sponsorName[0])this.sponsorNameInput=this.tournament.sponsorName.slice(1);else{let e=this.strings.find(e=>e.name===this.tournament.sponsorName);void 0===e?this.warningEdits.push(`String "${this.tournament.sponsorName}" for the "sponsorName" not found. Might be a wrong string or not in the strings list. Please check with admin.`):(this.sponsorNameSelected=e,this.sponsorNameInput=e.value)}if(void 0!==this.tournament.sponsorSlogan)if(""===this.tournament.sponsorSlogan)this.sponsorSloganInput="";else if("*"===this.tournament.sponsorSlogan[0])this.sponsorSloganInput=this.tournament.sponsorSlogan.slice(1);else{let e=this.strings.find(e=>e.name===this.tournament.sponsorSlogan);void 0===e?this.warningEdits.push(`String "${this.tournament.sponsorSlogan}" for the "sponsorSlogan" not found. Might be a wrong string or not in the strings list. Please check with admin.`):(this.sponsorSloganSelected=e,this.sponsorSloganInput=e.value)}void 0!=this.tournament.filterable&&(this.filterable=this.tournament.filterable.toString()),void 0!=this.tournament.rulesModification&&("none"===this.tournament.rulesModification.toLowerCase()?this.rulesModification="NONE":this.rulesModification=this.tournament.rulesModification.toString()),void 0!=this.tournament.helpshiftLinkDisplay&&(this.helpshiftLinkDisplay=this.tournament.helpshiftLinkDisplay.toString()),void 0!=this.tournament.sortOrder&&(this.sortOrder=this.tournament.sortOrder.toString()),void 0!=this.tournament.minIAP&&(this.minIAP=this.tournament.minIAP.toString()),void 0!=this.tournament.worstDivision&&(this.worstDivision=this.tournament.worstDivision.toString()),void 0!=this.tournament.bestDivision&&(this.bestDivision=this.tournament.bestDivision.toString()),setTimeout(()=>{this.initializated=!0},3e3)},updateRefs(){this.nameSelected&&this.$refs.nameAutocomplete.setSelected(this.nameSelected),this.bikeProvidedSelected&&"PROVIDED"===this.bikeRestriction&&this.$refs.bikeProvidedAutocomplete.setSelected(this.bikeProvidedSelected),this.prizeClass1DescSelected&&"0"!==this.prizeClass1ID&&this.$refs.prizeClass1DescAutocomplete.setSelected(this.prizeClass1DescSelected),this.prizeClass2DescSelected&&"0"!==this.prizeClass2ID&&this.$refs.prizeClass2DescAutocomplete.setSelected(this.prizeClass2DescSelected),this.prizeClass3DescSelected&&"0"!==this.prizeClass3ID&&this.$refs.prizeClass3DescAutocomplete.setSelected(this.prizeClass3DescSelected),this.prizeClass1BikeSelected&&"3"===this.prizeClass1ID&&this.$refs.prizeClass1BikeAutocomplete.setSelected(this.prizeClass1BikeSelected),this.prizeClass2BikeSelected&&"3"===this.prizeClass2ID&&this.$refs.prizeClass2BikeAutocomplete.setSelected(this.prizeClass2BikeSelected),this.prizeClass3BikeSelected&&"3"===this.prizeClass3ID&&this.$refs.prizeClass3BikeAutocomplete.setSelected(this.prizeClass3BikeSelected),this.sponsorNameSelected&&this.$refs.sponsorNameAutocomplete.setSelected(this.sponsorNameSelected),this.sponsorSloganSelected&&this.$refs.sponsorSloganAutocomplete.setSelected(this.sponsorSloganSelected)},getMimeType(e,t=null){const s=new Uint8Array(e).subarray(0,4);let a="";for(let i=0;i<s.length;i++)a+=s[i].toString(16);switch(a){case"89504e47":return"image/png";case"47494638":return"image/gif";case"ffd8ffe0":case"ffd8ffe1":case"ffd8ffe2":case"ffd8ffe3":case"ffd8ffe8":return"image/jpeg";default:return t}},uploadPrizeImage(e,t){const{files:s}=e.target;if(s&&s[0]){this[`prizeClass${t}Image`].src&&URL.revokeObjectURL(this[`prizeClass${t}Image`].src);const e=URL.createObjectURL(s[0]),a=new FileReader;a.onload=a=>{this[`prizeClass${t}Image`]={src:e,type:this.getMimeType(a.target.result,s[0].type)}},a.readAsArrayBuffer(s[0])}},cropPrizeClassImage(e){const t=this.$refs[`cropperPrize${e}Image`].getResult(),s=t.canvas.toDataURL("image/png");this[`prizeClass${e}ImageResultData`]=s,this[`prizeClass${e}Image`]={src:null,type:null}},pushCountryWhitelist(e){e&&(this.countryBlacklistArray=this.countryBlacklistArray.filter(t=>t.code!==e.code),this.countryWhitelistArray.find(t=>t.code===e.code)||(this.countryWhitelistArray.push(e),this.countryWhitelistInput=""))},pushCountryBlacklist(e){e&&(this.countryWhitelistArray=this.countryWhitelistArray.filter(t=>t.code!==e.code),this.countryBlacklistArray.find(t=>t.code===e.code)||(this.countryBlacklistArray.push(e),this.countryBlacklistInput=""))},pushBikeRestrictionArray(e){e&&(this.bikeRestrictionArray.find(t=>t.id===e.id)||(this.bikeRestrictionArray.push(e),this.bikeRestrictionInput=""))},pushCircuitRestrictionArray(e){e&&(this.circuitRestrictionArray.find(t=>t.id===e.id)||(this.circuitRestrictionArray.push(e),this.circuitRestrictionInput=""))},selectPrizeClass1Bike(e){this.prizeClass1BikeSelected=e,this.prizeClass1Number=e?e.id:null},selectPrizeClass2Bike(e){this.prizeClass2BikeSelected=e,this.prizeClass2Number=e?e.id:null},selectPrizeClass3Bike(e){this.prizeClass3BikeSelected=e,this.prizeClass3Number=e?e.id:null},removeCountryFromWhitelist(e){this.countryWhitelistArray=this.countryWhitelistArray.filter(t=>t.code!==e)},removeCountryFromBlacklist(e){this.countryBlacklistArray=this.countryBlacklistArray.filter(t=>t.code!==e)},removeBikeFromRestriction(e){this.bikeRestrictionArray=this.bikeRestrictionArray.filter(t=>t.id!==e)},removeCircuitFromRestriction(e){this.circuitRestrictionArray=this.circuitRestrictionArray.filter(t=>t.id!==e)}},computed:{apiUrl:function(){return"https://tournaments.weplay.media"},myTimezone:function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},filteredNameStrings:function(){return this.strings.filter(e=>e.value.toLowerCase().indexOf(this.nameInput.toLowerCase())>=0)},filteredCountriesWhitelist:function(){return xe.filter(e=>e.name.toLowerCase().indexOf(this.countryWhitelistInput.toLowerCase())>=0)},filteredCountriesBlacklist:function(){return xe.filter(e=>e.name.toLowerCase().indexOf(this.countryBlacklistInput.toLowerCase())>=0)},filteredBikeRestriction:function(){return this.bikes.filter(e=>e.name.toLowerCase().indexOf(this.bikeRestrictionInput.toLowerCase())>=0)},filteredBikeProvided:function(){return this.bikes.filter(e=>e.name.toLowerCase().indexOf(this.bikeProvidedInput.toLowerCase())>=0)},filteredCircuitRestriction:function(){return this.circuits.filter(e=>e.name.toLowerCase().indexOf(this.circuitRestrictionInput.toLowerCase())>=0)},filteredStringsPrizeClass1Desc:function(){return this.strings.filter(e=>e.value.toLowerCase().indexOf(this.prizeClass1DescInput.toLowerCase())>=0)},filteredStringsPrizeClass2Desc:function(){return this.strings.filter(e=>e.value.toLowerCase().indexOf(this.prizeClass2DescInput.toLowerCase())>=0)},filteredStringsPrizeClass3Desc:function(){return this.strings.filter(e=>e.value.toLowerCase().indexOf(this.prizeClass3DescInput.toLowerCase())>=0)},filteredPrizeClass1Bike:function(){return this.bikes.filter(e=>e.name.toLowerCase().indexOf(this.prizeClass1BikeInput.toLowerCase())>=0)},filteredPrizeClass2Bike:function(){return this.bikes.filter(e=>e.name.toLowerCase().indexOf(this.prizeClass2BikeInput.toLowerCase())>=0)},filteredPrizeClass3Bike:function(){return this.bikes.filter(e=>e.name.toLowerCase().indexOf(this.prizeClass3BikeInput.toLowerCase())>=0)},filteredSponsorNameStrings:function(){return this.strings.filter(e=>e.value.toLowerCase().indexOf(this.sponsorNameInput.toLowerCase())>=0)},filteredSponsorSloganStrings:function(){return this.strings.filter(e=>e.value.toLowerCase().indexOf(this.sponsorSloganInput.toLowerCase())>=0)}},watch:{bikeRestriction:function(e,t){this.initializated&&e!==t&&(this.bikeProvidedSelected=null,this.bikeProvidedInput="")},prizeClass1ID:function(e,t){this.initializated&&e!==t&&(this.prizeClass1Number=null,this.prizeClass1BikeInput="",this.prizeClass1BikeSelected=null,this.prizeClass1Image={src:null,type:null},this.prizeClass1ImageLoaded=!1,this.prizeClass1ImageResultData=null)},prizeClass2ID:function(e,t){this.initializated&&e!==t&&(this.prizeClass2Number=null,this.prizeClass2BikeInput="",this.prizeClass2BikeSelected=null,this.prizeClass2Image={src:null,type:null},this.prizeClass2ImageLoaded=!1,this.prizeClass2ImageResultData=null)},prizeClass3ID:function(e,t){this.initializated&&e!==t&&(this.prizeClass3Number=null,this.prizeClass3BikeInput="",this.prizeClass3BikeSelected=null,this.prizeClass3Image={src:null,type:null},this.prizeClass3ImageLoaded=!1,this.prizeClass3ImageResultData=null)}}},Pe=Ne,Ae=(s("4d64a"),Object(u["a"])(Pe,be,Ce,!1,null,null,null)),Me=Ae.exports,Ee={components:{TournamentForm:Me},data(){return{isLoading:!1,cantRender:!1,tournament:null,stringList:[],bikeList:[],circuitList:[]}},mounted:function(){this.getData()},methods:{getData(){this.isLoading=!0,this.startLoading();const e=[this.$http.get("/stringTable/list"),this.$http.get("/bikes/list"),this.$http.get("/circuits/list")];Promise.all(e).then(e=>{this.stringList=e[0].data,this.bikeList=e[1].data,this.circuitList=e[2].data}).catch(e=>{this.cantRender=!0,this.showErrorNotification("Error fetching data from the server..."),console.error(e)}).finally(()=>{this.isLoading=!1,this.stopLoading()})},submit(e){this.startLoading(),this.$http.post("/tournaments/new",e).then(e=>{console.log(e),this.showSuccessNotification("Tournament created successfully!"),this.$router.push({name:"tournaments"})}).catch(e=>{this.showErrorNotification("An unexpected error occurred. Please try again later."),console.error(e)}).finally(()=>{this.stopLoading()})}}},Oe=Ee,Be=Object(u["a"])(Oe,he,fe,!1,null,null,null),je=Be.exports,Ue=function(){var e=this,t=e._self._c;return t("section",{staticClass:"section"},[t("div",{staticClass:"container"},[t("div",{staticClass:"columns is-centered"},[t("div",{staticClass:"column is-8"},[t("div",{staticClass:"is-clearfix"},[t("h1",{staticClass:"title is-pulled-left"},[t("router-link",{attrs:{to:{name:"tournaments"}}},[t("i",{staticClass:"fas fa-arrow-left"})]),e._v(" Edit tournament")],1),e._m(0)]),t("br"),e.isLoading?t("div",{staticClass:"notification has-text-centered px-2"},[e._m(1)]):!e.isLoading&&e.cantRender?t("div",{staticClass:"notification is-warning"},[e._m(2)]):e.isLoading||e.cantRender||!e.tournament?e._e():t("TournamentForm",{attrs:{strings:e.stringList,bikes:e.bikeList,circuits:e.circuitList,tournament:e.tournament,edit:!0},on:{submit:e.submit}})],1)])])])},Ve=[function(){var e=this,t=e._self._c;return t("h1",{staticClass:"title is-pulled-right"},[t("i",{staticClass:"fas fa-pencil"}),e._v(" "),t("i",{staticClass:"fas fa-trophy"})])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"block"},[t("p",{},[t("i",{staticClass:"fas fa-spin fa-sync"})]),t("p",{staticClass:"is-size-7"},[e._v("Loading")])])},function(){var e=this,t=e._self._c;return t("p",[t("i",{staticClass:"fas fa-exclamation-triangle"}),e._v(" An error ocurred")])}],$e={components:{TournamentForm:Me},data(){return{isLoading:!1,cantRender:!1,tournament:null,stringList:[],bikeList:[],circuitList:[],originalTournament:null}},mounted:function(){this.getData()},methods:{getData(){this.isLoading=!0,this.startLoading();const e=[this.$http.get("/stringTable/list"),this.$http.get("/bikes/list"),this.$http.get("/circuits/list"),this.$http.get("/tournaments/"+this.$route.params.id)];Promise.all(e).then(e=>{this.stringList=e[0].data,this.bikeList=e[1].data,this.circuitList=e[2].data,this.tournament=e[3].data}).catch(e=>{this.cantRender=!0,this.showErrorNotification("Error fetching data from the server..."),console.error(e)}).finally(()=>{this.isLoading=!1,this.stopLoading()})},submit(e){const t=JSON.parse(JSON.stringify(this.tournament));t.startTimestamp=new Date(t.startTimestamp.split(" ")[0]+"T"+t.startTimestamp.split(" ")[1]+"+08:00").getTime()/1e3,t.endTimestamp=new Date(t.endTimestamp.split(" ")[0]+"T"+t.endTimestamp.split(" ")[1]+"+08:00").getTime()/1e3;const s=this.getChangedValues(t,e);0!==Object.keys(s).length?(this.startLoading(),this.$http.post("/tournaments/edit/"+this.$route.params.id,s).then(()=>{this.showSuccessNotification("Tournament edited successfully!"),this.$router.push({name:"tournaments"})}).catch(e=>{this.showErrorNotification("An unexpected error occurred. Please try again later."),console.error(e)}).finally(()=>{this.stopLoading()})):this.showSuccessNotification("No changes detected")},getChangedValues(e,t){const s={};for(const a in t)e[a]!==t[a]&&(s[a]=t[a]);return s}}},We=$e,Fe=Object(u["a"])(We,Ue,Ve,!1,null,null,null),Ye=Fe.exports,Ge=function(){var e=this,t=e._self._c;return t("div",{staticClass:"section"},[t("div",{staticClass:"container"},[e._m(0),t("hr"),t("h2",{staticClass:"title is-4"},[e._v("Current active tournaments "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.activeTournaments,expression:"activeTournaments"}]},[e._v("("+e._s(e.activeTournaments.length)+")")])]),t("p",{staticClass:"subtitle is-6"},[e._v("Here you can see the current active tournaments, with their respective information.")]),t("b-field",{attrs:{label:"Timezone"}},[t("b-select",{attrs:{disabled:e.isLoading,expanded:""},model:{value:e.timezone,callback:function(t){e.timezone=t},expression:"timezone"}},[t("option",{attrs:{value:"local"}},[e._v("Local ("+e._s(e.myTimezone)+")")]),t("option",{attrs:{value:"philippines"}},[e._v("Philippines (GMT +8)")])])],1),t("b-table",{attrs:{data:e.activeTournaments,loading:e.isLoading,striped:"",bordered:"",hoverable:""}},[t("b-table-column",{attrs:{centered:""},scopedSlots:e._u([{key:"header",fn:function({}){return[t("i",{staticClass:"fas fa-line-chart"})]}},{key:"default",fn:function(s){return[t("a",{on:{click:function(t){return e.selectTournament(s.row.tournamentId)}}},[t("i",{staticClass:"fas fa-line-chart"})])]}}])}),t("b-table-column",{attrs:{sortable:"",centered:"",numeric:"",label:"ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.tournamentId)+" ")]}}])}),t("b-table-column",{attrs:{field:"name",sortable:"",label:"Name"},scopedSlots:e._u([{key:"default",fn:function(s){var a;return["*"!==s.row.name[0]?t("b-tooltip",{attrs:{label:s.row.name,position:"is-right"}},[t("i",{staticClass:"fas fa-info-circle has-text-link fa-fw"}),e._v("  ")]):e._e(),t("span",{class:"*"!==s.row.name[0]?"is-underlined":"is-italic"},[e._v(e._s(null!==(a=e.getString(s.row.name))&&void 0!==a?a:"❓ (STRING NOT FOUND)"))])]}}])}),t("b-table-column",{attrs:{field:"startTimestamp",centered:"",label:"Start"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.toSelectedTimezone(t.row.startTimestamp))+" ")]}}])}),t("b-table-column",{attrs:{field:"endTimestamp",centered:"",label:"End"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.toSelectedTimezone(t.row.endTimestamp))+" ")]}}])}),t("b-table-column",{attrs:{sortable:"",centered:"",numeric:"",label:"Round #"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("p",{staticClass:"is-size-5"},[e._v(e._s(s.row.roundNumber))])]}}])}),t("b-table-column",{attrs:{sortable:"",centered:"",numeric:"",label:"Entries"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("p",{staticClass:"is-size-5"},[e._v(e._s(s.row.numEntrants))])]}}])}),t("b-table-column",{attrs:{label:"Countries",width:"400"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("p",{staticClass:"is-size-7"},[t("b",[e._v("Whitelist")]),e._v(": "+e._s(e.getCountryList(s.row.countryWhiteList)))]),t("p",{staticClass:"is-size-7"},[t("b",[e._v("Blacklist")]),e._v(": "+e._s(e.getCountryList(s.row.countryBlackList)))])]}}])})],1),t("hr"),t("h1",{staticClass:"title is-4"},[e._v("Engagement per tournament")]),t("h2",{staticClass:"subtitle is-6"},[e._v(" Select a specific tournament to see more information about it. ")]),t("div",{staticClass:"box"},[t("div",{staticClass:"field is-horizontal"},[e._m(1),t("div",{staticClass:"field-body"},[t("div",{staticClass:"field"},[t("div",{staticClass:"control"},[t("div",{staticClass:"select is-fullwidth"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedTournament,expression:"selectedTournament"}],on:{change:[function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedTournament=t.target.multiple?s:s[0]},e.getTournamentData]}},[t("option",{attrs:{disabled:""},domProps:{value:null}},[e._v("- Select a tournament -")]),e._l(e.tournaments,(function(s){var a;return t("option",{key:s.id,domProps:{value:s.id}},[e._v(" ID: "+e._s(s.id)+" - "+e._s(null!==(a=e.getString(s.name))&&void 0!==a?a:"❓ (STRING NOT FOUND)")+e._s(e.activeTournamentsIds.includes(""+s.id)?" - 🟢 Active":"")+" ")])}))],2)])])])])])]),null!=e.selectedTournament&&e.showChart?t("div",{},[t("ReportChart",{key:"chart-"+e.selectedTournament,attrs:{rounds:e.chartRounds,entries:e.chartEntries}}),t("ReportStats",{key:"stats-"+e.selectedTournament,attrs:{chartData:e.chartData,isTournamentActive:e.isSelectedTournamentActive}})],1):e._e(),e.showErrorMessage?t("div",{staticClass:"message is-warning"},[t("div",{staticClass:"message-body"},[e._v(" "+e._s(e.errorMessage)+" ")])]):e._e()],1)])},qe=[function(){var e=this,t=e._self._c;return t("h1",{staticClass:"title is-3"},[t("i",{staticClass:"fas fa-line-chart"}),e._v(" Tournaments report")])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"field-label is-normal"},[t("label",{staticClass:"label"},[e._v("Tournament")])])}],He=(s("13d5"),function(){var e=this,t=e._self._c;return t("v-chart",{staticClass:"chart-rounded",attrs:{option:e.chartOptions}})}),Ke=[],Je=s("22b4"),Xe=s("f95e"),Ze=s("3620"),Qe=s("9394"),et=s("2da7"),tt=s("3094"),st=s("ff32"),at=s("104d"),it=s("4b2a"),nt=s("5c7f");Object(Je["a"])([Xe["a"],Ze["a"],Qe["a"],et["a"],tt["a"],st["a"],at["a"],it["a"]]);var rt={props:{rounds:{type:Array,required:!0},entries:{type:Array,required:!0}},components:{VChart:nt["b"]},provide:{[nt["a"]]:"dark"},data(){return{chartOptions:{backgroundColor:"#2c343c",title:{text:"Entries per round",textStyle:{color:"#fff"},top:15,left:"4%"},toolbox:{show:!0,feature:{saveAsImage:{show:!0,title:"Guardar"}}},tooltip:{trigger:"axis",axisPointer:{type:"cross",snap:!0,label:{backgroundColor:"#42a883"}},formatter:function(e){let t='<div class="has-text-black">';return t+=`<p class="is-size-6 mb-2 has-text-black"><b>Round # ${e[0].axisValue}</b></p>`,t+=`<p class=""><i class="fas fa-users fa-lg fa-fw"></i>&nbsp;${e[0].data} entries</p>`,t+="</div>",t}},grid:{left:"4%",right:"7%",bottom:"80",top:"15%",containLabel:!0},dataZoom:[{type:"inside"},{type:"slider",bottom:20,labelFormatter:(e,t)=>(console.log(e,t),t.length>10?`${t.slice(0,10)}\n${t.slice(11)}`:t)}],xAxis:{name:"Round #",type:"category",data:this.rounds,nameLocation:"center",nameGap:30,nameTextStyle:{fontWeight:800},splitLine:{show:!0}},yAxis:{name:"Entries",type:"value",splitArea:{show:!0},nameLocation:"center",nameGap:-20,axisLabel:{nameGap:10}},series:[{name:"Entries",data:this.entries,type:"line",symbolSize:6,symbol:"circle",color:"#fff",lineStyle:{color:"#42a883"}}]}}}},ot=rt,lt=(s("9c48"),Object(u["a"])(ot,He,Ke,!1,null,"6e315672",null)),ct=lt.exports,ut=function(){var e=this,t=e._self._c;return t("div",{staticClass:"my-6"},[t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-6"},[e._m(0),t("nav",{staticClass:"level box"},[t("div",{staticClass:"level-item has-text-centered"},[t("div",[t("p",{staticClass:"heading"},[e._v("Round #")]),t("p",{staticClass:"title"},[e._v(e._s(e.roundWithHighestEntries.roundNumber))])])]),t("div",{staticClass:"level-item has-text-centered"},[t("div",[e._m(1),t("p",{staticClass:"title"},[e._v(e._s(e.roundWithHighestEntries.numEntrants))])])])]),e._m(2),t("nav",{staticClass:"level box"},[t("div",{staticClass:"level-item has-text-centered"},[t("div",[t("p",{staticClass:"heading"},[e._v("Round #")]),t("p",{staticClass:"title"},[e._v(e._s(e.roundWithLowestEntries.roundNumber))])])]),t("div",{staticClass:"level-item has-text-centered"},[t("div",[e._m(3),t("p",{staticClass:"title"},[e._v(e._s(e.roundWithLowestEntries.numEntrants))])])])]),t("h1",{staticClass:"title is-4"},[e._v("Last or Current Round")]),t("nav",{staticClass:"level box"},[t("div",{staticClass:"level-item has-text-centered"},[t("div",[t("p",{staticClass:"heading"},[e._v("Round #")]),t("p",{staticClass:"title"},[e._v(e._s(e.currentRound.roundNumber))])])]),t("div",{staticClass:"level-item has-text-centered"},[t("div",[e._m(4),t("p",{staticClass:"title"},[e._v(e._s(e.currentRound.numEntrants))])])])])]),t("div",{staticClass:"column is-6"},[t("h1",{staticClass:"title is-4"},[e._v("Grow Rate in the last 10 rounds")]),t("div",{staticClass:"box"},[t("p",[t("b",[e._v("Average entries:")]),e._v(" "+e._s(e.avgEntries10Rounds))]),t("p",{directives:[{name:"show",rawName:"v-show",value:e.isTournamentActive,expression:"isTournamentActive"}],staticClass:"mt-2"},[t("i",{staticClass:"fas fa-exclamation-circle has-text-info"}),e._v(" Tournament is active, so the last round might still not be complete."),t("span",{directives:[{name:"show",rawName:"v-show",value:e.last10Rounds.length>1,expression:"last10Rounds.length > 1"}]},[e._v(" (The last round is not being considered in the average)")])])]),t("table",{staticClass:"table is-striped is-narrow is-bordered is-fullwidth"},[e._m(5),t("tbody",e._l(e.last10Rounds,(function(s,a){return t("tr",{key:s.roundNumber},[t("td",[e._v(e._s(s.roundNumber))]),t("td",[e._v(e._s(s.numEntrants))]),t("td",[e._v(e._s(a==e.last10Rounds.length-1?"...":s.growRate))]),t("td",{staticClass:"has-text-centered"},[s.growRate>0?t("i",{staticClass:"fas fa-arrow-up has-text-success"}):s.growRate<0?t("i",{staticClass:"fas fa-arrow-down has-text-danger"}):t("i",{staticClass:"fas fa-minus"})])])})),0)])])])])},dt=[function(){var e=this,t=e._self._c;return t("h1",{staticClass:"title is-4"},[t("i",{staticClass:"fas fa-arrow-up has-text-success"}),e._v(" Round # with highest entry")])},function(){var e=this,t=e._self._c;return t("p",{staticClass:"heading"},[t("i",{staticClass:"fas fa-users"}),e._v(" Entries")])},function(){var e=this,t=e._self._c;return t("h1",{staticClass:"title is-4"},[t("i",{staticClass:"fas fa-arrow-down has-text-danger"}),e._v(" Round # with lowest entry")])},function(){var e=this,t=e._self._c;return t("p",{staticClass:"heading"},[t("i",{staticClass:"fas fa-users"}),e._v(" Entries")])},function(){var e=this,t=e._self._c;return t("p",{staticClass:"heading"},[t("i",{staticClass:"fas fa-users"}),e._v(" Entries")])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",[e._v("Round #")]),t("th",[e._v("Entries")]),t("th",[e._v("Grow Rate")]),t("th",{staticClass:"has-text-centered",attrs:{width:"80"}},[t("i",{staticClass:"fas fa-arrow-up"}),e._v(" / "),t("i",{staticClass:"fas fa-arrow-down"})])])])}],mt={name:"ReportStats",props:{chartData:{type:Array,required:!0},isTournamentActive:{type:Boolean,required:!0}},data(){return{roundWithHighestEntries:null,roundWithLowestEntries:null,currentRound:null,last10Rounds:null,avgEntries10Rounds:null,avgGrowRate10Rounds:null,stdDeviation:null}},beforeMount(){this.roundWithHighestEntries=this.chartData.reduce((e,t)=>e.numEntrants>t.numEntrants?e:t),this.chartData.length>1?this.isTournamentActive?this.roundWithLowestEntries=this.chartData.slice(0,-1).reduce((e,t)=>e.numEntrants<t.numEntrants?e:t):this.roundWithLowestEntries=this.chartData.reduce((e,t)=>e.numEntrants<t.numEntrants?e:t):this.roundWithLowestEntries=this.chartData[0],this.currentRound=this.chartData[this.chartData.length-1],this.chartData.length>10?this.last10Rounds=this.chartData.slice(-10):this.last10Rounds=this.chartData,this.last10Rounds.forEach((e,t)=>{e.growRate=0==t?0:e.numEntrants-this.last10Rounds[t-1].numEntrants}),this.last10Rounds.reverse(),1==this.last10Rounds.length?this.avgEntries10Rounds=this.last10Rounds[0].numEntrants:this.isTournamentActive?this.avgEntries10Rounds=this.last10Rounds.slice(0,-1).reduce((e,t)=>e+t.numEntrants,0)/this.last10Rounds.slice(0,-1).length:this.avgEntries10Rounds=this.last10Rounds.reduce((e,t)=>e+t.numEntrants,0)/this.last10Rounds.length,this.avgEntries10Rounds=this.avgEntries10Rounds.toFixed(2)},mounted(){},methods:{},computed:{}},pt=mt,ht=Object(u["a"])(pt,ut,dt,!1,null,null,null),ft=ht.exports,bt={components:{ReportChart:ct,ReportStats:ft},data(){return{activeTournaments:[],tournaments:[],isLoading:!1,selectedTournament:null,isLoadingChart:!1,showChart:!1,timezone:"local",chartRounds:[],chartEntries:[],chartData:[],selectedTournamentStats:null,isSelectedTournamentActive:!1,highestEntriesTournament:null,showErrorMessage:!1,errorMessage:""}},mounted(){this.getInitialData()},methods:{getInitialData(){this.isLoading=!0,this.startLoading();const e=[this.$http.get("/tournaments/active"),this.$http.get("/stringTable/list"),this.$http.get("/tournaments/list")];Promise.all(e).then(e=>{this.activeTournaments=e[0].data,this.strings=e[1].data,this.tournaments=e[2].data,this.highestEntriesTournament=this.activeTournaments.reduce((e,t)=>e.numEntrants>t.numEntrants?e:t)}).catch(e=>{console.error(e)}).finally(()=>{this.isLoading=!1,this.stopLoading()})},getString(e){if(e.startsWith("*"))return e;const t=this.strings.find(t=>t.name===e);return t?t.value:"???????????"},toSelectedTimezone(e){const t=e.split(" ")[0]+"T"+e.split(" ")[1]+"+08:00";let s=new Date(t);return"local"===this.timezone?ce()(s).format("YYYY-MM-DD HH:mm:ss"):"philippines"===this.timezone?ce()(s).tz("Asia/Manila").format("YYYY-MM-DD HH:mm:ss"):void 0},selectTournament(e){this.selectedTournament=e,this.getTournamentData()},getCountryList(e){if(""==e)return"-";if("ALL"==e)return"All countries";let t=e.split("|"),s=[];return t.forEach(e=>{s.push(xe.find(t=>t.code===e).name)}),s.join(", ")},getTournamentData(){this.showChart=!1,this.showErrorMessage=!1,this.chartRounds=[],this.chartEntries=[],this.chartData=[],this.isSelectedTournamentActive=this.activeTournaments.some(e=>e.tournamentId===this.selectedTournament),this.startLoading(),this.$http.get("tournaments/stats/"+this.selectedTournament).then(e=>{let t=[],s=[];e.data.forEach(e=>{t.push(e.roundNumber),s.push(e.numEntrants)}),this.chartRounds=t,this.chartEntries=s,this.chartData=e.data,this.showChart=!0}).catch(e=>{404===e.response.status?(this.showErrorNotification("No instances of this tournament found..."),this.errorMessage="No instances of this tournament found...",this.showErrorMessage=!0):(this.showErrorNotification("Error fetching tournament stats..."),this.errorMessage="Error fetching tournament stats...",this.showErrorMessage=!0),console.error(e)}).finally(()=>{this.stopLoading()})}},computed:{myTimezone:function(){return ce.a.tz.guess()},activeTournamentsIds:function(){return 0==this.activeTournaments.length?[]:this.activeTournaments.map(e=>e.tournamentId)}}},Ct=bt,vt=Object(u["a"])(Ct,Ge,qe,!1,null,null,null),gt=vt.exports,yt=function(){var e=this,t=e._self._c;return t("div",{staticClass:"section"},[t("div",{staticClass:"container"},[e._m(0),t("div",{staticClass:"content"},[t("p",[e._v("This report shows the amount of coins and diamonds spent in each round of a tournament.")]),e._m(1),t("p",{staticClass:"is-italic has-text-grey"},[e._v("Generated at "+e._s(e.statsTimestamp))]),t("h2",{staticClass:"subtitle is-6"},[e._v(" Select a specific tournament to see more information about it. ")])]),t("div",{staticClass:"box"},[t("div",{staticClass:"field is-horizontal"},[e._m(2),t("div",{staticClass:"field-body"},[t("div",{staticClass:"field"},[t("div",{staticClass:"control"},[t("div",{staticClass:"select is-fullwidth"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedTournamentId,expression:"selectedTournamentId"}],on:{change:[function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedTournamentId=t.target.multiple?s:s[0]},e.getTournamentData]}},[t("option",{attrs:{disabled:""},domProps:{value:null}},[e._v("- Select a tournament -")]),e._l(e.availableTournamentReports,(function(s){return t("option",{key:s.id,domProps:{value:s.id}},[e._v(" ID: "+e._s(s.id)+" - "+e._s(s.name)+e._s(s.active?" - 🟢 Active":"")+" ")])}))],2)])])])])])]),t("hr"),null!=e.selectedTournamentId&&e.isReportReady?t("section",{key:"report-summary-tournament-"+e.selectedTournamentId},[t("h1",{staticClass:"title is-3"},[e._v(" "+e._s(e.selectedTournamentData.tournamentName)+" ")]),t("h5",{staticClass:"subtitle is-6 is-italic has-text-grey"},[e._v(" Tournament ID - "+e._s(e.selectedTournamentId)+" ")]),t("div",{staticClass:"level box"},[t("div",{staticClass:"level-item has-text-centered"},[t("div",[t("p",{staticClass:"heading"},[e._v("Rounds calculated")]),t("p",{staticClass:"title"},[e._v(e._s(e.selectedTournamentData.instancesCount))]),t("p",{staticClass:"is-size-7 has-text-grey"},[e._v(" ")])])]),t("div",{staticClass:"level-item has-text-centered"},[t("div",[e._m(3),t("p",{staticClass:"title"},[e._v(e._s(e.formatLargeNumberCompact(e.selectedTournamentData.totalCoinsPaid)))]),t("p",{staticClass:"is-size-7 has-text-grey"},[e._v(e._s(e.formatLargeNumber(e.selectedTournamentData.totalCoinsPaid)))])])]),t("div",{staticClass:"level-item has-text-centered"},[t("div",[e._m(4),t("p",{staticClass:"title"},[e._v(e._s(e.formatLargeNumberCompact(e.selectedTournamentData.totalEntriesPaidInCoins)))]),t("p",{staticClass:"is-size-7 has-text-grey"},[e._v(e._s(e.formatLargeNumber(e.selectedTournamentData.totalEntriesPaidInCoins)))])])]),t("div",{staticClass:"level-item has-text-centered"},[t("div",[e._m(5),t("p",{staticClass:"title"},[e._v(e._s(e.formatLargeNumberCompact(e.selectedTournamentData.totalDiamondsPaid)))]),t("p",{staticClass:"is-size-7 has-text-grey"},[e._v(e._s(e.formatLargeNumber(e.selectedTournamentData.totalDiamondsPaid)))])])]),t("div",{staticClass:"level-item has-text-centered"},[t("div",[e._m(6),t("p",{staticClass:"title"},[e._v(e._s(e.formatLargeNumber(e.selectedTournamentData.totalEntriesPaidInDiamonds)))]),t("p",{staticClass:"is-size-7 has-text-grey"},[e._v(e._s(e.selectedTournamentData.totalEntriesPaidInDiamonds))])])])]),t("CurrencySpentChart",{key:"currency-spent-tournament-"+e.selectedTournamentId,attrs:{title:"Total of Coins & Diamonds per round",chartData:e.selectedTournamentData.currencySpentChartData,chartMeta:e.selectedTournamentData.chartMeta}}),t("br"),t("CurrencyAccumulatedChart",{key:"currency-acc-tournament-"+e.selectedTournamentId,attrs:{title:"Currency Spent Accumulated vs. Paid Entries",chartData:e.selectedTournamentData.currencyAcumulatedChartData,chartMeta:e.selectedTournamentData.chartMeta}}),t("InstancesTable",{key:"instances-table-tournament-"+e.selectedTournamentId,attrs:{instancesTableData:e.selectedTournamentData.instancesTableData,tournamentName:e.selectedTournamentData.tournamentName}})],1):e._e()])])},kt=[function(){var e=this,t=e._self._c;return t("h1",{staticClass:"title is-3"},[t("i",{staticClass:"fas fa-line-chart"}),e._v(" Currency spent per tournament report")])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"message is-primary"},[t("div",{staticClass:"message-body"},[e._v(" Do have in mind that some tournaments have rounds with multiple instances, while the charts are the best way to visualize the data, the table below will show you the details of each instance. ")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"field-label is-normal"},[t("label",{staticClass:"label"},[e._v("Tournament")])])},function(){var e=this,t=e._self._c;return t("p",{staticClass:"heading"},[t("i",{staticClass:"fas fa-coins fa-lg"}),e._v(" Coins in total")])},function(){var e=this,t=e._self._c;return t("p",{staticClass:"heading"},[t("i",{staticClass:"fas fa-coins fa-lg"}),e._v(" Coin Entries paid")])},function(){var e=this,t=e._self._c;return t("p",{staticClass:"heading"},[t("i",{staticClass:"fas fa-gem fa-lg"}),e._v(" Diamond in total")])},function(){var e=this,t=e._self._c;return t("p",{staticClass:"heading"},[t("i",{staticClass:"fas fa-gem fa-lg"}),e._v(" Diamond entries paid")])}],zt=function(){var e=this,t=e._self._c;return t("v-chart",{staticClass:"chart-rounded",attrs:{option:e.chartOptions}})},_t=[];Object(Je["a"])([Xe["a"],Ze["a"],Qe["a"],et["a"],tt["a"],st["a"],at["a"],it["a"]]);var Dt={props:{title:{type:String,required:!0},chartData:{type:Object,required:!0},chartMeta:{type:Object,required:!0}},components:{VChart:nt["b"]},provide:{[nt["a"]]:"dark"},computed:{chartOptions(){return{backgroundColor:"#2c343c",title:{text:this.title||"Chart",textStyle:{color:"#fff"},top:15,left:"4%"},toolbox:{show:!0,feature:{saveAsImage:{show:!0,title:"Guardar"}}},legend:{data:["Coins","Diamonds"],right:"7%",top:15},tooltip:{trigger:"axis",axisPointer:{type:"cross",snap:!0,label:{backgroundColor:"#42a883"}},formatter:e=>{const t=this.chartMeta[e[0].axisValue];let s='<div class="has-text-black">';return s+=`<p class="is-size-6 mb-1 has-text-weight-bold">Round # ${e[0].axisValue}</p>`,s+='<p class="is-size-7">Instances:</p>',s+=`<p class="is-family-monospace instances-list mb-2">${t.instancesId.join("<br>")}</p>`,t.merged&&(s+='<p class="is-size-7"><i class="fas fa-exclamation-triangle has-text-danger fa-fw"></i>&nbsp;Multiples instances in the same week</p>'),t.differentEntryCosts&&(s+='<p class="is-size-7"><i class="fas fa-exclamation-triangle has-text-danger fa-fw"></i>&nbsp;Mixed entry costs</p>'),t.mixedCurrencies&&(s+='<p class="is-size-7"><i class="fas fa-exclamation-triangle has-text-danger fa-fw"></i>&nbsp;Mixed currencies</p>'),s+=`<p class="is-size-6 mt-2"><i class="fas fa-calendar-alt fa-fw"></i>&nbsp;<span class="is-size-6">${t.startDatetime}</span></p>`,s+=`<p class="is-size-6"><i class="fas fa-calendar-alt fa-fw"></i>&nbsp;<span class="is-size-6">${t.endDatetime}</span></p>`,s+=`<p class="is-size-6 mt-3"><i class="fas fa-right-to-bracket fa-fw"></i>&nbsp;${t.entriesPaid} entries paid</p>`,t.differentEntryCosts?s+='<p class="is-size-6"><i class="fas fa-ticket fa-fw"></i>&nbsp;Entry cost changed...</p>':s+=`<p class="is-size-6"><i class="fas fa-ticket fa-fw"></i>&nbsp;${t.entryCost} entry cost</p>`,s+=`<p class="is-size-6"><i class="fas fa-coins fa-fw"></i>&nbsp;${t.coins} coins spent</p>`,s+=`<p class="is-size-6"><i class="fas fa-gem fa-fw"></i>&nbsp;${t.diamonds} diamonds spent</p>`,s+="</div>",s}},grid:{left:"4%",right:"7%",bottom:"80",top:"15%",containLabel:!0},xAxis:[{name:"Round #",type:"category",data:this.chartData.serieX.rounds,nameLocation:"center",nameGap:30,nameTextStyle:{fontWeight:800},splitLine:{show:!0}},{name:"Date Round",type:"category",data:this.chartData.serieX.dates,nameLocation:"center",nameGap:43,nameTextStyle:{fontWeight:800},offset:20,splitLine:{show:!0},axisLabel:{formatter:e=>e.length>10?`${e.slice(0,10)}\n${e.slice(11)}`:e}}],yAxis:[{name:"Diamond Spent",type:"value",splitArea:{show:!0},nameLocation:"center",nameGap:-20,axisLabel:{nameGap:10}},{name:"Coins Spent",type:"value",splitArea:{show:!0},nameLocation:"center",nameGap:-20,axisLabel:{nameGap:10}}],dataZoom:[{type:"inside"},{type:"slider",xAxisIndex:1,bottom:20,labelFormatter:(e,t)=>t.length>10?`${t.slice(0,10)}\n${t.slice(11)}`:t}],series:[{name:"Diamonds",data:this.chartData.serieY.diamonds,type:"line",yAxisIndex:0,symbolSize:6,symbol:"circle",color:"#fff",lineStyle:{color:"#00A0FF"}},{name:"Coins",data:this.chartData.serieY.coins,type:"line",yAxisIndex:1,symbolSize:6,symbol:"circle",color:"#fff",lineStyle:{color:"#ffcc00"}}]}}}},It=Dt,St=Object(u["a"])(It,zt,_t,!1,null,null,null),wt=St.exports,Rt=function(){var e=this,t=e._self._c;return t("v-chart",{staticClass:"chart-rounded",attrs:{option:e.chartOptions}})},Tt=[];Object(Je["a"])([Xe["a"],Ze["a"],Qe["a"],et["a"],tt["a"],st["a"],at["a"],it["a"]]);var Lt={props:{title:{type:String,required:!0},chartData:{type:Object,required:!0},chartMeta:{type:Object,required:!0}},components:{VChart:nt["b"]},provide:{[nt["a"]]:"dark"},computed:{chartOptions(){return{backgroundColor:"#2c343c",title:{text:this.title||"Chart",textStyle:{color:"#fff"},top:15,left:"4%"},toolbox:{show:!0,feature:{saveAsImage:{show:!0,title:"Guardar"}}},legend:{data:["Coins","Diamonds","Paid Entries"],right:"7%",top:15},tooltip:{trigger:"axis",axisPointer:{type:"cross",snap:!0,label:{backgroundColor:"#42a883"}},formatter:e=>{const t=this.chartMeta[e[0].axisValue];let s='<div class="has-text-black">';return s+=`<p class="is-size-6 mb-1 has-text-weight-bold">Round # ${e[0].axisValue}</p>`,s+='<p class="is-size-7">Instances:</p>',s+=`<p class="is-family-monospace instances-list mb-2">${t.instancesId.join("<br>")}</p>`,t.merged&&(s+='<p class="is-size-7"><i class="fas fa-exclamation-triangle has-text-danger fa-fw"></i>&nbsp;Multiples instances in the same week</p>'),t.differentEntryCosts&&(s+='<p class="is-size-7"><i class="fas fa-exclamation-triangle has-text-danger fa-fw"></i>&nbsp;Mixed entry costs</p>'),t.mixedCurrencies&&(s+='<p class="is-size-7"><i class="fas fa-exclamation-triangle has-text-danger fa-fw"></i>&nbsp;Mixed currencies</p>'),s+=`<p class="is-size-6 mt-2"><i class="fas fa-calendar-alt fa-fw"></i>&nbsp;<span class="is-size-6">${t.startDatetime}</span></p>`,s+=`<p class="is-size-6"><i class="fas fa-calendar-alt fa-fw"></i>&nbsp;<span class="is-size-6">${t.endDatetime}</span></p>`,s+=`<p class="is-size-6 mt-3"><i class="fas fa-right-to-bracket fa-fw"></i>&nbsp;${t.entriesPaid} entries paid</p>`,t.differentEntryCosts?s+='<p class="is-size-6"><i class="fas fa-ticket fa-fw"></i>&nbsp;Entry cost changed...</p>':s+=`<p class="is-size-6"><i class="fas fa-ticket fa-fw"></i>&nbsp;${t.entryCost} entry cost</p>`,s+=`<p class="is-size-6"><i class="fas fa-coins fa-fw"></i>&nbsp;${t.coins} coins spent</p>`,s+=`<p class="is-size-6"><i class="fas fa-gem fa-fw"></i>&nbsp;${t.diamonds} diamonds spent</p>`,s+="</div>",s}},grid:{left:"4%",right:"7%",bottom:"80",top:"15%",containLabel:!0},xAxis:[{name:"Round #",type:"category",data:this.chartData.serieX.rounds,nameLocation:"center",nameGap:30,nameTextStyle:{fontWeight:800},splitLine:{show:!0}},{name:"Date Round",type:"category",data:this.chartData.serieX.dates,nameLocation:"center",nameGap:43,nameTextStyle:{fontWeight:800},offset:20,splitLine:{show:!0},axisLabel:{formatter:e=>e.length>10?`${e.slice(0,10)}\n${e.slice(11)}`:e}}],yAxis:[{name:"Currency Spent",type:"value",splitArea:{show:!0},nameLocation:"center",nameGap:-20,axisLabel:{nameGap:10}},{name:"Paid Entries",type:"value",splitArea:{show:!0},nameLocation:"center",nameGap:-20,axisLabel:{nameGap:10}}],dataZoom:[{type:"inside"},{type:"slider",xAxisIndex:1,bottom:20,labelFormatter:(e,t)=>(console.log(e,t),t.length>10?`${t.slice(0,10)}\n${t.slice(11)}`:t)}],series:[{name:"Diamonds",data:this.chartData.serieY.diamonds,type:"line",yAxisindex:0,symbolSize:6,symbol:"circle",color:"#fff",lineStyle:{color:"#00A0FF"}},{name:"Coins",data:this.chartData.serieY.coins,type:"line",symbolSize:6,symbol:"circle",color:"#fff",yAxisindex:0,lineStyle:{color:"#ffcc00"}},{name:"Paid Entries",data:this.chartData.serieY.entriesPaid,type:"line",symbolSize:6,symbol:"circle",color:"#fff",yAxisIndex:1,lineStyle:{color:"#42a883"}}]}}}},xt=Lt,Nt=Object(u["a"])(xt,Rt,Tt,!1,null,null,null),Pt=Nt.exports,At=function(){var e=this,t=e._self._c;return t("div",[t("h1",{staticClass:"title is-3"},[e._v(" Tournament Instances ")]),t("h5",{staticClass:"subtitle is-6 is-italic has-text-grey"},[e._v(" Do note that there might be multiple instances per round for adverse reasons. ")]),t("b-table",{staticClass:"vertical-aligned",attrs:{data:e.tableData,hoverable:"",bordered:"",narrowed:"",striped:""}},[t("b-table-column",{attrs:{field:"round",centered:"",label:"Round"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.round)+" ")]}}])}),t("b-table-column",{attrs:{field:"key",label:"Instance ID"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("p",{staticClass:"is-size-7 is-family-monospace"},[e._v(e._s(s.row.key))])]}}])}),t("b-table-column",{attrs:{field:"entryCost",label:"Entry Cost",centered:""},scopedSlots:e._u([{key:"default",fn:function(s){return[t("p",[e._v(e._s(s.row.entryCost))]),t("p",{staticClass:"is-size-7"},[e._v(e._s(s.row.entryCurrencyLabel))])]}}])}),t("b-table-column",{attrs:{field:"entriesPaid",label:"Entries Paid",centered:""},scopedSlots:e._u([{key:"default",fn:function(s){return[t("p",[e._v(e._s(e.formatLargeNumber(s.row.entriesPaid||0)))])]}}])}),t("b-table-column",{attrs:{label:"Grow Rate",centered:""},scopedSlots:e._u([{key:"default",fn:function(s){return[t("p",{class:s.row.growEntriesPaid>0?"has-text-success":s.row.growEntriesPaid<0?"has-text-danger":""},[e._v(" "+e._s(e.formatLargeNumber(s.row.growEntriesPaid))+"  "),s.row.growEntriesPaid>0?t("i",{staticClass:"fas fa-arrow-up fa-lg has-text-success"}):s.row.growEntriesPaid<0?t("i",{staticClass:"fas fa-arrow-down fa-lg has-text-danger"}):t("i",{staticClass:"fas fa-minus"})])]}}])}),t("b-table-column",{attrs:{label:"Round Date",centered:""},scopedSlots:e._u([{key:"default",fn:function(s){return[t("p",{staticClass:"is-size-7"},[e._v(e._s(s.row.startDatetime))]),t("p",{staticClass:"is-size-7"},[e._v(e._s(s.row.endDatetime))])]}}])}),t("b-table-column",{attrs:{field:"coins",label:"Coins",centered:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.formatLargeNumber(t.row.coins))+" ")]}}])}),t("b-table-column",{attrs:{field:"diamonds",label:"Diamonds",centered:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.formatLargeNumber(t.row.diamonds))+" ")]}}])}),t("b-table-column",{attrs:{label:"Accumulated"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("p",[e._v("💰 "+e._s(e.formatLargeNumber(s.row.accumulatedCoins)))]),t("p",[e._v("💎 "+e._s(e.formatLargeNumber(s.row.accumulatedDiamonds)))])]}}])})],1)],1)},Mt=[],Et={name:"InstancesTable",props:{instancesTableData:{type:Array,required:!0},tournamentName:{type:String,required:!0}},data(){return{tableData:this.instancesTableData}},methods:{formatLargeNumberCompact(e){return new Intl.NumberFormat("en",{style:"decimal",notation:"compact",compactDisplay:"short",maximumSignificantDigits:3}).format(e)},formatLargeNumber(e){return new Intl.NumberFormat("en",{style:"decimal"}).format(e)}}},Ot=Et,Bt=(s("8d2e"),Object(u["a"])(Ot,At,Mt,!1,null,null,null)),jt=Bt.exports,Ut={name:"ReportCurrencySpent",components:{CurrencySpentChart:wt,CurrencyAccumulatedChart:Pt,InstancesTable:jt},data(){return{tournaments:[],activeTournaments:[],strings:[],currencyStats:{},statsTimestamp:null,availableTournamentReports:[],selectedTournamentId:null,isLoading:!1,isReportReady:!1,selectedTournamentData:{tournamentId:null,tournamentName:null,tournamentData:{},instancesId:[],instancesData:{},totalEntriesPaidInCoins:0,totalEntriesPaidInDiamonds:0,totalCoinsPaid:0,totalDiamondsPaid:0,instancesCount:0,instancesTableData:[],currencySpentChartData:{serieX:{rounds:[],dates:[]},serieY:{coins:[],diamonds:[]}},currencyAcumulatedChartData:{serieX:{rounds:[],dates:[]},serieY:{coins:[],diamonds:[],entriesPaid:[]}},chartMeta:{}}}},mounted(){this.getInitialData()},methods:{getInitialData(){this.isLoading=!0,this.startLoading();const e=[this.$http.get("/tournaments/list"),this.$http.get("/tournaments/active"),this.$http.get("/stringTable/list"),this.$http.get("/tournaments/currencyStats")];Promise.all(e).then(e=>{this.tournaments=e[0].data,this.activeTournaments=e[1].data.map(e=>e.tournamentId),this.strings=e[2].data,this.currencyStats=e[3].data,this.statsTimestamp=ce()(this.currencyStats.timestamp).format("YYYY-MM-DD HH:mm:ss");const t=Object.keys(this.currencyStats.data);this.availableTournamentReports=t.map(e=>{const t=this.tournaments.find(t=>t.id==e);return{id:e,name:t?this.getString(t.name):"❓ (STRING NOT FOUND)",active:this.activeTournaments.includes(e)}})}).catch(e=>{console.error(e)}).finally(()=>{this.isLoading=!1,this.stopLoading()})},getString(e){if(e.startsWith("*"))return e;const t=this.strings.find(t=>t.name===e);return t?t.value:"???????????"},getInstancesWithSameRoundNumber(e){return this.selectedTournamentData.instancesId.filter(t=>t.split("_")[1]===e)},getTournamentNameByTournamentId(e){const t=this.tournaments.find(t=>t.id==e);return t?this.getString(t.name):"❓ (STRING NOT FOUND)"},getEntryCurrencyLabel(e){switch(e){case 1:return"Coins";case 2:return"Diamonds";default:return"Unknown"}},getEntryCurrencyIcon(e){switch(e){case 1:return"💰";case 2:return"💎";default:return"❓"}},formatLargeNumberCompact(e){return new Intl.NumberFormat("en",{style:"decimal",notation:"compact",compactDisplay:"short",maximumSignificantDigits:3}).format(e)},formatLargeNumber(e){return new Intl.NumberFormat("en",{style:"decimal"}).format(e)},resetSelectedTournamentData(){this.selectedTournamentData={tournamentId:null,tournamentName:null,tournamentData:{},instancesId:[],instancesData:{},totalEntriesPaidInCoins:0,totalEntriesPaidInDiamonds:0,totalCoinsPaid:0,totalDiamondsPaid:0,instancesCount:0,instancesTableData:[],currencySpentChartData:{serieX:{rounds:[],dates:[]},serieY:{coins:[],diamonds:[]}},currencyAcumulatedChartData:{serieX:{rounds:[],dates:[]},serieY:{coins:[],diamonds:[],entriesPaid:[]}},chartMeta:{}}},getTournamentData(){this.isReportReady=!1,this.selectedTournamentData.tournamentId=this.selectedTournamentId,this.selectedTournamentData.tournamentName=this.getTournamentNameByTournamentId(this.selectedTournamentId),this.selectedTournamentData.tournamentData=this.tournaments.filter(e=>e.id==this.selectedTournamentId)[0],this.selectedTournamentData.instancesId=Object.keys(this.currencyStats.data[this.selectedTournamentId]).sort((e,t)=>e-t),this.selectedTournamentData.instancesData=this.currencyStats.data[this.selectedTournamentId],this.selectedTournamentData.chartMeta={};const e=this.selectedTournamentData.instancesId.map(e=>e.split("_")[1]);let t=0,s=0,a=0,i=0,n=0,r=0;this.selectedTournamentData.instancesTableData=this.selectedTournamentData.instancesId.map(e=>{const o=this.selectedTournamentData.instancesData[e],l=e.split("_")[1],c={key:e,round:l,entryCurrency:o.entryCurrency,entryCurrencyLabel:`${this.getEntryCurrencyIcon(o.entryCurrency)} ${this.getEntryCurrencyLabel(o.entryCurrency)}`,entryCost:parseInt(o.entryCost||0),entriesPaid:parseInt(o.entriesPaid||0),growEntriesPaid:0,startDatetime:ce.a.unix(o.startTimestamp).format("YYYY-MM-DD HH:mm:ss"),endDatetime:ce.a.unix(o.endTimestamp).format("YYYY-MM-DD HH:mm:ss"),coins:0,diamonds:0,accumulatedCoins:0,accumulatedDiamonds:0};return c.growEntriesPaid=c.entriesPaid-r,r=c.entriesPaid,a+=c.entriesPaid,1===o.entryCurrency?(c.coins=parseInt(o.entryCost||0)*parseInt(o.entriesPaid||0),c.accumulatedCoins=t,t+=c.coins,i+=c.entriesPaid):2===o.entryCurrency&&(c.diamonds=parseInt(o.entryCost||0)*parseInt(o.entriesPaid||0),c.accumulatedDiamonds=s,s+=c.diamonds,n+=c.entriesPaid),c}),this.selectedTournamentData.totalEntriesPaidInCoins=i,this.selectedTournamentData.totalEntriesPaidInDiamonds=n,this.selectedTournamentData.totalCoinsPaid=t,this.selectedTournamentData.totalDiamondsPaid=s,this.selectedTournamentData.instancesCount=e.length,t=0,s=0,e.forEach(e=>{const i=this.getInstancesWithSameRoundNumber(e);let n={tournamentId:parseInt(this.selectedTournamentId),instancesId:i,round:e,coins:0,diamonds:0,entryCost:0,entryCurrency:this.selectedTournamentData.instancesData[i[0]].entryCurrency,entriesPaid:0,accumulatedCoins:0,accumulatedDiamonds:0,accumulatedEntriesPaid:a,startDatetime:ce.a.unix(this.selectedTournamentData.instancesData[i[0]].startTimestamp).format("YYYY-MM-DD HH:mm:ss"),endDatetime:ce.a.unix(this.selectedTournamentData.instancesData[i[0]].endTimestamp).format("YYYY-MM-DD HH:mm:ss"),merged:i.length>1,mixedCurrencies:!1,differentEntryCosts:!1};i.forEach(e=>{n.entryCost=parseInt(this.selectedTournamentData.instancesData[e].entryCost||0),n.entriesPaid+=parseInt(this.selectedTournamentData.instancesData[e].entriesPaid||0),a+=parseInt(this.selectedTournamentData.instancesData[e].entriesPaid||0),n.accumulatedEntriesPaid=a,1==this.selectedTournamentData.instancesData[e].entryCurrency&&(n.coins+=parseInt(this.selectedTournamentData.instancesData[e].entryCost||0)*parseInt(this.selectedTournamentData.instancesData[e].entriesPaid||0),t+=parseInt(this.selectedTournamentData.instancesData[e].entryCost||0)*parseInt(this.selectedTournamentData.instancesData[e].entriesPaid||0),n.accumulatedCoins=t),2==this.selectedTournamentData.instancesData[e].entryCurrency&&(n.diamonds+=parseInt(this.selectedTournamentData.instancesData[e].entryCost||0)*parseInt(this.selectedTournamentData.instancesData[e].entriesPaid||0),s+=parseInt(this.selectedTournamentData.instancesData[e].entryCost||0)*parseInt(this.selectedTournamentData.instancesData[e].entriesPaid||0),n.accumulatedDiamonds=s),n.endDatetime=ce.a.unix(this.selectedTournamentData.instancesData[e].endTimestamp).format("YYYY-MM-DD HH:mm:ss"),this.selectedTournamentData.instancesData[e].entryCurrency!=n.entryCurrency&&(n.mixedCurrencies=!0),this.selectedTournamentData.instancesData[e].entryCost!=n.entryCost&&(n.differentEntryCosts=!0)}),this.selectedTournamentData.chartMeta[e]=n}),this.selectedTournamentData.currencySpentChartData.serieX.rounds=[],this.selectedTournamentData.currencySpentChartData.serieX.dates=[],this.selectedTournamentData.currencySpentChartData.serieY.coins=[],this.selectedTournamentData.currencySpentChartData.serieY.diamonds=[];for(const o in this.selectedTournamentData.chartMeta)this.selectedTournamentData.currencySpentChartData.serieX.rounds.push(o),this.selectedTournamentData.currencySpentChartData.serieX.dates.push(this.selectedTournamentData.chartMeta[o].endDatetime),this.selectedTournamentData.currencySpentChartData.serieY.coins.push(this.selectedTournamentData.chartMeta[o].coins),this.selectedTournamentData.currencySpentChartData.serieY.diamonds.push(this.selectedTournamentData.chartMeta[o].diamonds);this.selectedTournamentData.currencyAcumulatedChartData.serieX.rounds=[],this.selectedTournamentData.currencyAcumulatedChartData.serieX.dates=[],this.selectedTournamentData.currencyAcumulatedChartData.serieY.coins=[],this.selectedTournamentData.currencyAcumulatedChartData.serieY.diamonds=[],this.selectedTournamentData.currencyAcumulatedChartData.serieY.entriesPaid=[];for(const o in this.selectedTournamentData.chartMeta)this.selectedTournamentData.currencyAcumulatedChartData.serieX.rounds.push(o),this.selectedTournamentData.currencyAcumulatedChartData.serieX.dates.push(this.selectedTournamentData.chartMeta[o].endDatetime),this.selectedTournamentData.currencyAcumulatedChartData.serieY.coins.push(this.selectedTournamentData.chartMeta[o].accumulatedCoins),this.selectedTournamentData.currencyAcumulatedChartData.serieY.diamonds.push(this.selectedTournamentData.chartMeta[o].accumulatedDiamonds),this.selectedTournamentData.currencyAcumulatedChartData.serieY.entriesPaid.push(this.selectedTournamentData.chartMeta[o].entriesPaid);this.isReportReady=!0}}},Vt=Ut,$t=Object(u["a"])(Vt,yt,kt,!1,null,null,null),Wt=$t.exports,Ft=function(){var e=this,t=e._self._c;return t("section",{staticClass:"hero is-white is-fullheight-with-navbar"},[t("div",{staticClass:"hero-body"},[t("div",{staticClass:"container has-text-centered"},[t("h1",{staticClass:"title is-4"},[e._v(" 🤔 Lost? ")]),t("h1",{staticClass:"subtitle is-6"},[e._v(" This page doesn't exist ")]),t("router-link",{staticClass:"button is-dark is-small",attrs:{to:{name:"tournaments"}}},[t("i",{staticClass:"fas fa-reply"}),e._v("  Back home ")])],1)])])},Yt=[],Gt={name:"ForbiddenComponent",computed:{userRole(){return this.$store.getters.getLoggedUserRole}}},qt=Gt,Ht=Object(u["a"])(qt,Ft,Yt,!1,null,null,null),Kt=Ht.exports;a["b"].use(v["a"]);const Jt=[{path:"/",name:"home",component:D,meta:{requiresAuth:!0,roles:["admin","user"]}},{path:"/login",name:"login",component:P,meta:{requiresAuth:!1}},{path:"/users",name:"users",component:j,meta:{requiresAuth:!0,roles:["admin"]}},{path:"/users/new",name:"users-new",component:ie,meta:{requiresAuth:!0,roles:["admin"]}},{path:"/tournaments",name:"tournaments",component:pe,meta:{requiresAuth:!0,roles:["admin","user"]}},{path:"/tournaments/new",name:"tournaments-new",component:je,meta:{requiresAuth:!0,roles:["admin","user"]}},{path:"/tournaments/report",name:"tournaments-report",component:gt,meta:{requiresAuth:!0,roles:["admin","reporter"]}},{path:"/tournaments/report/currency-spent",name:"tournaments-currency-spent-report",component:Wt,meta:{requiresAuth:!0,roles:["admin","reporter"]}},{path:"/tournaments/:id",name:"tournaments-edit",component:Ye,meta:{requiresAuth:!0,roles:["admin","user"]}},{path:"*",name:"not-found",component:Kt}],Xt=new v["a"]({base:"/",routes:Jt});Xt.beforeEach((e,t,s)=>{e.matched.some(e=>e.meta.requiresAuth)?T.getters.isLogged?e.meta.roles.includes(T.getters.getLoggedUserRole)?s():s({name:"not-found"}):s({name:"login"}):"login"===e.name&&T.getters.isLogged?s({name:"home"}):s()});var Zt=Xt,Qt=s("cee4");Qt["a"].defaults.baseURL="https://tournaments.weplay.media",Qt["a"].defaults.headers.common.Accept="application/json",Qt["a"].defaults.withCredentials=!0,Qt["a"].defaults.timeout=6e4,Qt["a"].interceptors.response.use(e=>(200===e.status&&"NOT_AUTHORIZED"===e.data.error&&T.dispatch("logout"),e),e=>(401===e.response.status&&T.dispatch("logout"),Promise.reject(e)));var es=Qt["a"],ts={methods:{startLoading(){T.commit("setLoading",!0)},stopLoading(){T.commit("setLoading",!1)},showErrorNotification:function(e){this.$buefy.snackbar.open({message:"⚠️&nbsp;"+e,type:"is-warning",duration:5e3,position:"is-bottom-left"})},showSuccessNotification:function(e){this.$buefy.snackbar.open({message:"✅&nbsp;"+e,duration:5e3,position:"is-bottom-left",type:"is-white"})},getValue(e){return void 0===e||null===e?null:e},isOptional(e){return null===e||""===e?null:"undefined"!==typeof e&&0===e.length?[]:e},isInputEmpty(e){return null===e||""===e||"undefined"!==typeof e&&0===e.length},isObject(e){return null!==e&&"object"===typeof e&&!1===Array.isArray(e)},isObjectEmpty(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},stringHasDigits(e){return/\d/.test(e)}},computed:{apiUrl(){return"https://tournaments.weplay.media"},loggedUser(){return T.state.loggedUser}}},ss=ts,as=s("4c93");Object($["c"])("required",{...as["i"],message:"This field is required"}),Object($["c"])("email",{...as["b"],message:"This field must be a valid email"}),Object($["c"])("confirmed",{...as["a"],message:"This field confirmation does not match"}),Object($["c"])("length",{...as["d"],message:"This field must have 2 options"}),Object($["c"])("max",{...as["e"],message:"This field must have a maximum of {length} characters"}),Object($["c"])("max_value",{...as["f"],message:"This field must have a maximum of {max}"}),Object($["c"])("min_value",{...as["g"],message:"This field must have a minimum of {min}"}),Object($["c"])("integer",{...as["c"],message:"This field must be an integer"}),Object($["c"])("oneOf",{...as["h"],message:"This field must be one of the allowed values"}),Object($["c"])("multipleOf100",{validate(e){return e%100===0},message:"The value must be a multiple of 100"}),a["b"].use(C["a"],{defaultIconPack:"fas",defaultDialogConfirmText:"OK",defaultDialogCancelText:"Cancelar",defaultDayNames:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"],defaultMonthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"]}),a["b"].mixin(ss),a["b"].prototype.$http=es,a["b"].config.productionTip=!1,es.get("/user/checklogin").then(e=>{200===e.status&&(T.commit("setLoggedUser",e.data),console.log("✅ Logged in"))}).catch(e=>{401===e.response.status&&console.log("❌ Not logged in")}).finally(()=>{const e=new a["b"]({router:Zt,store:T,http:es,render:e=>e(b)});e.$mount("#app")})},8830:function(e,t,s){},"8d2e":function(e,t,s){"use strict";s("2319")},"9c48":function(e,t,s){"use strict";s("8830")},c507:function(e,t,s){},d340:function(e,t,s){"use strict";s("c507")}});
//# sourceMappingURL=app.2187eeb8.js.map