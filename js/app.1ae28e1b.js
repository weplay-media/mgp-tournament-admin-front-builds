(function(t){function e(e){for(var a,r,o=e[0],l=e[1],c=e[2],d=0,m=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&m.push(i[r][0]),i[r]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(e);while(m.length)m.shift()();return n.push.apply(n,c||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],a=!0,o=1;o<s.length;o++){var l=s[o];0!==i[l]&&(a=!1)}a&&(n.splice(e--,1),t=r(r.s=s[0]))}return t}var a={},i={app:0},n=[];function r(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=a,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(s,a,function(e){return t[e]}.bind(null,a));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=l;n.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"221a":function(t,e,s){"use strict";s("fafd")},4678:function(t,e,s){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-ps":"4c98","./ar-ps.js":"4c98","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku-kmr":"7558","./ku-kmr.js":"7558","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(t){var e=n(t);return s(e)}function n(t){if(!s.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}i.keys=function(){return Object.keys(a)},i.resolve=n,t.exports=i,i.id="4678"},"497e":function(t,e,s){"use strict";s("59da")},"4a1d":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);var a=s("2b0e"),i=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("Navbar"),e("router-view"),e("b-loading",{ref:"loader",attrs:{active:t.isLoading,"can-cancel":!0}})],1)},n=[],r=function(){var t=this,e=t._self._c;return e("div",[e("b-navbar",{attrs:{type:"is-dark"},scopedSlots:t._u([{key:"brand",fn:function(){return[e("b-navbar-item",{attrs:{tag:"div"}},[e("div",{staticClass:"tag is-primary"},[t._v(" Tournaments API ")])])]},proxy:!0},t.loggedUser?{key:"start",fn:function(){return[e("b-navbar-item",{attrs:{tag:"router-link",to:{name:"home"}}},[e("i",{staticClass:"fas fa-home fa-fw fa-lg"}),t._v(" Home ")]),"admin"==t.userRole?e("b-navbar-item",{attrs:{tag:"router-link",to:{name:"users"}}},[e("i",{staticClass:"fas fa-users fa-fw fa-lg"}),t._v(" Users ")]):t._e(),["admin","user"].includes(t.userRole)?e("b-navbar-item",{attrs:{tag:"router-link",to:{name:"tournaments"}}},[e("i",{staticClass:"fas fa-trophy fa-fw fa-lg"}),t._v(" Tournaments ")]):t._e(),e("b-navbar-dropdown",{scopedSlots:t._u([{key:"label",fn:function(){return[e("i",{staticClass:"fas fa-line-chart fa-fw fa-lg"}),t._v(" Tournaments Reports ")]},proxy:!0}],null,!1,2192859617)},[["admin","reporter","user"].includes(t.userRole)?e("b-navbar-item",{attrs:{tag:"router-link",to:{name:"reports-tournaments-engagement"}}},[t._v(" Engagement ")]):t._e(),["admin","reporter","user"].includes(t.userRole)?e("b-navbar-item",{attrs:{tag:"router-link",to:{name:"reports-tournaments-currency-spent"}}},[t._v(" Currency Spent ")]):t._e(),["admin","reporter","user"].includes(t.userRole)?e("b-navbar-item",{attrs:{tag:"router-link",to:{name:"reports-tournaments-instances"}}},[t._v(" Instances Overview ")]):t._e()],1)]},proxy:!0}:{key:"start",fn:function(){},proxy:!0},{key:"end",fn:function(){return[t.isLogged?e("b-navbar-item",{on:{click:t.logout}},[e("i",{staticClass:"fas fa-sign-out fa-lg fa-fw fa-lg"}),t._v(" Log out ")]):e("b-navbar-item",{attrs:{tag:"router-link",to:{name:"login"}}},[e("i",{staticClass:"fas fa-sign-in fa-fw fa-lg"}),t._v(" Log in ")])]},proxy:!0}],null,!0)})],1)},o=[],l={name:"TheNavbar",data(){return{}},methods:{logout(){this.$http.get("/user/logout").then(()=>{this.$store.dispatch("logout")})}},computed:{isLogged(){return this.$store.getters.isLogged},userRole(){return this.$store.getters.getLoggedUserRole}}},c=l,u=s("2877"),d=Object(u["a"])(c,r,o,!1,null,null,null),m=d.exports,p={components:{Navbar:m},data(){return{checkLoginInterval:null}},mounted(){},computed:{isLoading(){return this.$store.state.isLoading},loggedUser(){return this.$store.state.loggedUser}}},h=p,f=(s("d340"),Object(u["a"])(h,i,n,!1,null,null,null)),v=f.exports,b=s("289d"),C=s("8c4f"),g=function(){var t=this,e=t._self._c;return e("section",{staticClass:"hero is-white is-fullheight-with-navbar"},[e("div",{staticClass:"hero-body"},[e("div",{staticClass:"container"},[e("div",{staticClass:"columns is-centered is-mobile"},[e("div",{staticClass:"column is-6-desktop is-8-tablet is-12-mobile"},[t._m(0),"admin"===t.userRole?e("div",[e("hr"),e("div",{staticClass:"is-flex is-flex-direction-row is-justify-content-space-between is-align-items-center"},[t._m(1),e("ul",{staticClass:"has-text-right is-size-7 options"},[e("li",[e("router-link",{staticClass:"has-text-link",attrs:{to:{name:"users"}}},[t._v(" Go to Users "),e("i",{staticClass:"fas fa-arrow-right"})])],1)])])]):t._e(),["admin","user"].includes(t.userRole)?e("div",[e("hr"),e("div",{staticClass:"is-flex is-flex-direction-row is-justify-content-space-between is-align-items-center"},[t._m(2),e("ul",{staticClass:"has-text-right is-size-7 options"},[e("li",[e("router-link",{staticClass:"has-text-link",attrs:{to:{name:"users"}}},[t._v(" Go to Tournaments "),e("i",{staticClass:"fas fa-arrow-right"})])],1)])])]):t._e(),["admin","reporter","user"].includes(t.userRole)?e("div",[e("hr"),e("div",{staticClass:"is-flex is-flex-direction-row is-justify-content-space-between is-align-items-center"},[t._m(3),e("ul",{staticClass:"has-text-right is-size-7 options"},[e("li",[e("router-link",{staticClass:"has-text-link",attrs:{to:{name:"reports-tournaments-currency-spent"}}},[t._v(" Engagement "),e("i",{staticClass:"fas fa-arrow-right"})])],1),e("li",[e("router-link",{staticClass:"has-text-link",attrs:{to:{name:"reports-tournaments-currency-spent"}}},[t._v(" Currency Spent "),e("i",{staticClass:"fas fa-arrow-right"})])],1),e("li",[e("router-link",{staticClass:"has-text-link",attrs:{to:{name:"reports-tournaments-currency-spent"}}},[t._v(" Instances Overview "),e("i",{staticClass:"fas fa-arrow-right"})])],1)])])]):t._e(),e("hr"),e("p",{staticClass:"has-text-grey is-size-7"},[t._v("Last update: April 9th 2024 - v2.0")])])])])])])},_=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"is-flex is-flex-direction-row is-justify-content-space-between is-align-items-center"},[e("div",[e("h1",{staticClass:"subtitle is-6 has-text-grey"},[t._v(" MotoGP Tournament Admin ")]),e("h1",{staticClass:"title is-4"},[t._v(" Welcome! ")])]),e("div",{staticClass:"is-size-2 mr-4"},[t._v(" 👋 ")])])},function(){var t=this,e=t._self._c;return e("div",[e("h5",{staticClass:"title is-6"},[e("i",{staticClass:"fas fa-users"}),t._v(" Users management")]),e("h6",{staticClass:"subtitle is-7 is-italic has-text-grey"},[t._v("Create and manage users for the Admin API")])])},function(){var t=this,e=t._self._c;return e("div",[e("h5",{staticClass:"title is-6"},[e("i",{staticClass:"fas fa-trophy"}),t._v(" Tournament management")]),e("h6",{staticClass:"subtitle is-7 is-italic has-text-grey"},[t._v("Create or edit tournaments. Search and enable/disable tournaments.")])])},function(){var t=this,e=t._self._c;return e("div",[e("h5",{staticClass:"title is-6"},[e("i",{staticClass:"fas fa-line-chart"}),t._v(" Reports")]),e("h6",{staticClass:"subtitle is-7 is-italic has-text-grey"},[t._v("Check the reports for the tournaments, with insights about engagement, currency spent and instances overview.")])])}],y={name:"HomeComponent",computed:{userRole(){return this.$store.getters.getLoggedUserRole}}},I=y,z=(s("497e"),Object(u["a"])(I,g,_,!1,null,"0d833af7",null)),k=z.exports,D=function(){var t=this,e=t._self._c;return e("section",{staticClass:"hero is-light is-fullheight-with-navbar"},[e("div",{staticClass:"hero-body"},[e("div",{staticClass:"container"},[e("div",{staticClass:"columns is-centered"},[e("div",{staticClass:"column is-3-fullhd is-4-desktop is-6-tablet"},[e("div",{staticClass:"box has-text-centered"},[t._m(0),e("h1",{staticClass:"subtitle is-6"},[t._v(" MotoGP Tournament Admin ")]),e("form",{on:{submit:function(e){return e.preventDefault(),t.login.apply(null,arguments)}}},[e("div",{staticClass:"field has-text-white"},[e("div",{staticClass:"control"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"input",attrs:{type:"email",placeholder:"email@company.com",required:"",disabled:t.isLoading},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})])]),e("div",{staticClass:"field has-text-white"},[e("div",{staticClass:"control"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input",attrs:{type:"password",placeholder:"Your password",required:"",disabled:t.isLoading},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})])]),e("button",{staticClass:"button is-primary is-fullwidth",class:{"is-loading":t.isLoading}},[t._v("Enter "),e("i",{staticClass:"fas fa-paper-plane"})])])])])])])])])},w=[function(){var t=this,e=t._self._c;return e("h1",{staticClass:"title is-4"},[e("i",{staticClass:"fas fa-sign-in"}),t._v("  Sign in ")])}],S=(s("14d9"),s("2f62")),T=s("2c4e");a["b"].use(S["a"]);var L=new S["a"].Store({state:{isLoading:!1,loggedUser:null,lastTimeUpdated:(new Date).getTime(),strings:[]},mutations:{lastTimeUpdated(t,e){t.lastTimeUpdated=e},setLoading(t,e){t.isLoading=e},setLoggedUser(t,e){t.loggedUser=e},setStrings(t,e){t.strings=e},logout(t){t.loggedUser=null}},actions:{logout({commit:t}){t("logout"),t("setLoading",!1),T["a"].open({message:"You have been logged out",type:"is-warning",duration:5e3,queue:!0}),Gs.replace("/login")}},getters:{loggedUser(t){return t.loggedUser},isLogged(t){return null!==t.loggedUser},getLoggedUserRole(t){return t.loggedUser?t.loggedUser.user_role:null}},modules:{}}),x={data(){return{isLoading:!1,email:"",password:""}},methods:{login(){this.startLoading(),this.isLoading=!0,this.$http.post("/user/login",{email:this.email,password:this.password}).then(t=>(this.$store.commit("setLoggedUser",t.data),this.reloadStringsPromise())).then(t=>{this.$store.commit("setStrings",t.data),this.$router.push("/")}).catch(t=>{console.log(t)}).finally(()=>{this.stopLoading(),this.isLoading=!1})}},beforeRouteEnter:(t,e,s)=>{L.state.loggedUser?s("/"):s()}},R=x,N=Object(u["a"])(R,D,w,!1,null,null,null),P=N.exports,A=function(){var t=this,e=t._self._c;return e("div",{staticClass:"section"},[e("div",{staticClass:"container"},[e("div",{staticClass:"columns is-centered"},[e("div",{staticClass:"column is-6"},[e("div",{staticClass:"is-clearfix"},[e("h1",{staticClass:"title is-pulled-left"},[t._v("Users")]),e("div",{staticClass:"is-pulled-right"},[e("div",{staticClass:"buttons"},[e("button",{staticClass:"button is-light",on:{click:t.getUsers}},[e("i",{staticClass:"fas fa-sync"})]),e("router-link",{staticClass:"button is-primary",attrs:{to:{name:"users-new"}}},[e("i",{staticClass:"fas fa-user-plus"})])],1)])]),e("b-table",{attrs:{data:t.users,loading:t.isLoading,paginated:!0,"per-page":10},scopedSlots:t._u([{key:"empty",fn:function(){return[e("p",{staticClass:"is-size-7 has-text-centered py-5 is-family-code"},[t._v("No users")])]},proxy:!0}])},[e("b-table-column",{attrs:{field:"email",sortable:"",label:"Email"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.email)+" ")]}}])}),e("b-table-column",{attrs:{field:"role",label:"Role",sortable:""},scopedSlots:t._u([{key:"default",fn:function(s){return[e("i",{staticClass:"fas fa-fw",class:{"fa-shield":"admin"==s.row.role,"fa-user":"user"==s.row.role,"fa-line-chart":"reporter"==s.row.role}}),t._v(" "+t._s(s.row.role&&s.row.role.toUpperCase())+" ")]}}])}),e("b-table-column",{attrs:{label:"Action",centered:""},scopedSlots:t._u([{key:"default",fn:function(s){return[e("a",{staticClass:"has-text-danger",on:{click:function(e){return t.confirmDeleteUser(s.row)}}},[e("span",{staticClass:"icon"},[e("i",{staticClass:"fas fa-trash"})])])]}}])})],1)],1)])])])},M=[],E={data(){return{users:[],isLoading:!1}},methods:{getUsers(){this.isLoading=!0,this.$http.get("/user/list").then(t=>{this.users=t.data}).catch(t=>{console.error(t)}).finally(()=>{this.isLoading=!1})},confirmDeleteUser(t){this.$buefy.dialog.confirm({title:"Delete User",message:`Are you sure you want to delete user <b>${t.email}</b>?`,confirmText:"Delete",type:"is-danger",hasIcon:!0,onConfirm:()=>this.deleteUser(t.id)})},deleteUser(t){this.$http.post("/user/delete",{id:t}).then(()=>{this.showSuccessNotification("User deleted successfully"),this.getUsers()}).catch(t=>{this.showErrorNotification("Error deleting user"),console.error(t)})}},mounted(){this.getUsers()}},O=E,B=Object(u["a"])(O,A,M,!1,null,null,null),j=B.exports,U=function(){var t=this,e=t._self._c;return e("section",{staticClass:"section"},[e("div",{staticClass:"container"},[e("div",{staticClass:"columns is-centered"},[e("div",{staticClass:"column is-6"},[e("div",{staticClass:"is-clearfix"},[e("h1",{staticClass:"title is-pulled-left"},[e("router-link",{attrs:{to:{name:"users"}}},[e("i",{staticClass:"fas fa-arrow-left"})]),t._v(" New user")],1),t._m(0)]),e("br"),e("div",{staticClass:"box"},[e("ValidationObserver",{ref:"observer"},[e("BInputWithValidation",{attrs:{rules:"required|email",type:"email",label:"Email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),e("BInputWithValidation",{attrs:{rules:"required",type:"password",label:"Password",vid:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),e("BInputWithValidation",{attrs:{rules:"required|confirmed:password",name:"Password",type:"password",label:"Confirm Password"},model:{value:t.confirmation,callback:function(e){t.confirmation=e},expression:"confirmation"}}),e("BSelectWithValidation",{attrs:{rules:"required",label:"Role"},model:{value:t.role,callback:function(e){t.role=e},expression:"role"}},[e("option",{attrs:{value:"",disabled:""}},[t._v("- Please select a role... -")]),e("option",{attrs:{value:"reporter"}},[t._v("Reporter")]),e("option",{attrs:{value:"user"}},[t._v("User")]),e("option",{attrs:{value:"admin"}},[t._v("Admin")])]),e("br"),e("div",{staticClass:"buttons"},[e("button",{staticClass:"button is-success",on:{click:t.validateForm}},[e("span",{staticClass:"icon is-small"},[e("i",{staticClass:"fas fa-check"})]),e("span",[t._v("Submit")])]),e("button",{staticClass:"button",on:{click:t.resetForm}},[e("span",{staticClass:"icon is-small"},[e("i",{staticClass:"fas fa-redo"})]),e("span",[t._v("Reset")])])])],1)],1)])])])])},$=[function(){var t=this,e=t._self._c;return e("h1",{staticClass:"title is-pulled-right"},[e("i",{staticClass:"fas fa-user-plus"})])}],V=s("7bb1"),W=function(){var t=this,e=t._self._c;return e("ValidationProvider",{attrs:{vid:t.vid,name:t.$attrs.label,rules:t.rules},scopedSlots:t._u([{key:"default",fn:function({errors:s,valid:a}){return[e("b-field",t._b({attrs:{type:{"is-danger":s[0],"is-success":a},message:s}},"b-field",t.$attrs,!1),[e("b-select",{attrs:{expanded:"",placeholder:"Select an option"},model:{value:t.innerValue,callback:function(e){t.innerValue=e},expression:"innerValue"}},[t._t("default")],2)],1),t.help?e("div",{staticClass:"message mb-2"},[e("div",{staticClass:"message-body p-2"},[e("p",{staticClass:"is-size-7"},[t._v(t._s(t.help))])])]):t._e()]}}],null,!0)})},F=[],Y={components:{ValidationProvider:V["b"]},props:{vid:{type:String},rules:{type:[Object,String],default:""},value:{type:null},help:{type:String,default:""}},data:()=>({innerValue:""}),watch:{innerValue(t){this.$emit("input",t)},value(t){this.innerValue=t}},created(){this.value&&(this.innerValue=this.value)}},G=Y,q=Object(u["a"])(G,W,F,!1,null,null,null),H=q.exports,K=function(){var t=this,e=t._self._c;return e("ValidationProvider",{attrs:{vid:t.vid,name:t.$attrs.name||t.$attrs.label,rules:t.rules},scopedSlots:t._u([{key:"default",fn:function({errors:s,valid:a}){return[e("b-field",t._b({attrs:{type:{"is-danger":s[0],"is-success":a},message:s}},"b-field",t.$attrs,!1),[e("b-input",t._b({model:{value:t.innerValue,callback:function(e){t.innerValue=e},expression:"innerValue"}},"b-input",t.$attrs,!1))],1),t.help?e("div",{staticClass:"message mb-2"},[e("div",{staticClass:"message-body p-2"},[e("p",{staticClass:"is-size-7"},[t._v(t._s(t.help))])])]):t._e()]}}])})},X=[],J={components:{ValidationProvider:V["b"]},props:{vid:{type:String},rules:{type:[Object,String],default:""},value:{type:null},help:{type:String,default:""}},data:()=>({innerValue:""}),watch:{innerValue(t){this.$emit("input",t)},value(t){this.innerValue=t}},created(){this.value&&(this.innerValue=this.value)}},Z=J,Q=Object(u["a"])(Z,K,X,!1,null,null,null),tt=Q.exports,et={data(){return{email:"",password:"",confirmation:"",role:"",choices:[]}},components:{ValidationObserver:V["a"],BSelectWithValidation:H,BInputWithValidation:tt},methods:{validateForm(){this.startLoading(),this.$refs.observer.validate().then(t=>{t?(this.showSuccessNotification("Form is valid!"),this.submit()):this.showErrorNotification("Form is invalid!")}).catch(t=>{this.showErrorNotification("An unexpected error occurred. Please try again later."),console.error(t)}).finally(()=>{this.stopLoading()})},submit(){this.startLoading(),this.$http.post("/user/new",{email:this.email,password:this.password,role:this.role}).then(t=>{console.log(t),this.showSuccessNotification("User created successfully!"),this.$router.push({name:"users"})}).catch(t=>{this.showErrorNotification("An unexpected error occurred. Please try again later."),console.error(t)}).finally(()=>{this.stopLoading()})},resetForm(){this.email="",this.password="",this.confirmation="",this.role="",requestAnimationFrame(()=>{this.$refs.observer.reset()})}}},st=et,at=Object(u["a"])(st,U,$,!1,null,null,null),it=at.exports,nt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"section"},[e("div",{staticClass:"container is-fluid"},[e("div",{staticClass:"is-clearfix mb-4"},[e("h1",{staticClass:"title is-pulled-left"},[t._v("Tournaments")]),e("div",{staticClass:"is-pulled-right"},[e("div",{staticClass:"buttons"},[e("button",{staticClass:"button is-light",on:{click:t.getTournaments}},[e("i",{staticClass:"fas fa-sync"})]),e("router-link",{staticClass:"button is-primary",attrs:{to:{name:"tournaments-new"}}},[e("i",{staticClass:"fas fa-plus"})])],1)])]),e("div",{staticClass:"columns"},[e("div",{staticClass:"column is-8"},[e("b-field",{attrs:{label:"Search by name"}},[e("b-input",{attrs:{type:"text",placeholder:"Search",clearable:""},on:{input:t.debouncedSearch},model:{value:t.searchTerm,callback:function(e){t.searchTerm=e},expression:"searchTerm"}})],1)],1),e("div",{staticClass:"column is-2"},[e("b-field",{attrs:{label:"Page size"}},[e("b-select",{attrs:{disabled:t.isLoading,expanded:""},model:{value:t.pageSize,callback:function(e){t.pageSize=e},expression:"pageSize"}},[e("option",{attrs:{value:"10"}},[t._v("10")]),e("option",{attrs:{value:"25"}},[t._v("25")]),e("option",{attrs:{value:"50"}},[t._v("50")]),e("option",{attrs:{value:"100"}},[t._v("100")])])],1)],1),e("div",{staticClass:"column is-2"},[e("b-field",{attrs:{label:"Timezone"}},[e("b-select",{attrs:{disabled:t.isLoading,expanded:""},model:{value:t.timezone,callback:function(e){t.timezone=e},expression:"timezone"}},[e("option",{attrs:{value:"local"}},[t._v("Local ("+t._s(t.myTimezone)+")")]),e("option",{attrs:{value:"philippines"}},[t._v("Philippines (GMT +8)")])])],1)],1)]),e("div",{},[e("b-table",{attrs:{data:t.filteredTournaments,loading:t.isLoading,paginated:!0,"per-page":t.pageSize,striped:"",bordered:"",hoverable:"","pagination-simple":!0},scopedSlots:t._u([{key:"empty",fn:function(){return[e("p",{staticClass:"is-size-7 has-text-centered py-5 is-family-code"},[t._v("No tournaments")])]},proxy:!0}])},[e("b-table-column",{attrs:{centered:""},scopedSlots:t._u([{key:"header",fn:function({}){return[e("i",{staticClass:"fas fa-edit"})]}},{key:"default",fn:function(t){return[e("router-link",{staticClass:"has-text-info",attrs:{to:{name:"tournaments-edit",params:{id:t.row.id}}}},[e("i",{staticClass:"fas fa-pencil"})])]}}])}),e("b-table-column",{attrs:{field:"id",sortable:"",label:"ID",centered:""},scopedSlots:t._u([{key:"default",fn:function(s){return[e("span",{staticClass:"is-family-code"},[t._v(t._s(s.row.id))])]}}])}),e("b-table-column",{attrs:{field:"name",sortable:"",label:"Name"},scopedSlots:t._u([{key:"default",fn:function(s){var a;return["*"!==s.row.name[0]?e("b-tooltip",{attrs:{label:s.row.name,position:"is-right"}},[e("i",{staticClass:"fas fa-info-circle has-text-link fa-fw"}),t._v("  ")]):t._e(),e("span",{class:"*"!==s.row.name[0]?"is-underlined":"is-italic"},[t._v(t._s(null!==(a=t.getString(s.row.name))&&void 0!==a?a:"❓ (STRING NOT FOUND)"))])]}}])}),e("b-table-column",{attrs:{field:"startTimestamp",sortable:"",label:"Start"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.toSelectedTimezone(e.row.startTimestamp))+" ")]}}])}),e("b-table-column",{attrs:{field:"endTimestamp",sortable:"",label:"End"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.toSelectedTimezone(e.row.endTimestamp))+" ")]}}])}),e("b-table-column",{attrs:{field:"timeOffsetHours",sortable:"",centered:"",numeric:"",label:"Time Offset"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.timeOffsetHours)+" ")]}}])}),e("b-table-column",{attrs:{field:"restartFrequency",sortable:"",centered:"",numeric:"",label:"Restart Frequency"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.restartFrequency)+" ")]}}])}),e("b-table-column",{attrs:{field:"duration",sortable:"",centered:"",label:"Duration"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.duration)+" ")]}}])}),e("b-table-column",{attrs:{field:"isActivated",sortable:"",centered:"",label:"Activated"},scopedSlots:t._u([{key:"default",fn:function(s){return[s.row.isActivated?e("span",{staticClass:"tag is-success has-text-weight-bold"},[e("i",{staticClass:"fas fa-power-off"}),t._v(" ON")]):e("span",{staticClass:"tag is-dark"},[e("i",{staticClass:"fas fa-power-off"}),t._v(" OFF")])]}}])})],1)],1)])])},rt=[],ot=s("2ef0"),lt=s("7f45"),ct=s.n(lt),ut={data(){return{strings:[],tournaments:[],filteredTournaments:[],searchTerm:"",debouncedSearch:Object(ot["debounce"])(this.search,500),isLoading:!1,pageSize:"25",timezone:"local"}},mounted(){this.getTournaments()},methods:{getTournaments(){this.isLoading=!0;const t=[this.$http.get("/tournaments/list"),this.$http.get("/stringTable/list")];Promise.all(t).then(t=>{this.tournaments=t[0].data,this.filteredTournaments=t[0].data,this.strings=t[1].data,this.searchTerm=""}).catch(t=>{console.error(t)}).finally(()=>{this.isLoading=!1})},getString(t){if(t.startsWith("*"))return t;const e=this.strings.find(e=>e.name===t);return e?e.value:"???????????"},search(){this.searchTerm||(this.filteredTournaments=this.tournaments),this.filteredTournaments=this.tournaments.filter(t=>t.name.toLowerCase().includes(this.searchTerm.toLowerCase()))},toSelectedTimezone(t){const e=t.split(" ")[0]+"T"+t.split(" ")[1]+"+08:00";let s=new Date(e);return"local"===this.timezone?ct()(s).format("YYYY-MM-DD HH:mm:ss"):"philippines"===this.timezone?ct()(s).tz("Asia/Manila").format("YYYY-MM-DD HH:mm:ss"):void 0}},computed:{myTimezone:function(){return ct.a.tz.guess()}}},dt=ut,mt=Object(u["a"])(dt,nt,rt,!1,null,null,null),pt=mt.exports,ht=function(){var t=this,e=t._self._c;return e("section",{staticClass:"section"},[e("div",{staticClass:"container"},[e("div",{staticClass:"columns is-centered"},[e("div",{staticClass:"column is-8"},[e("div",{staticClass:"is-clearfix"},[e("h1",{staticClass:"title is-pulled-left"},[e("router-link",{attrs:{to:{name:"tournaments"}}},[e("i",{staticClass:"fas fa-arrow-left"})]),t._v(" New tournament")],1),t._m(0)]),e("br"),t.isLoading?e("div",{staticClass:"notification has-text-centered px-2"},[t._m(1)]):!t.isLoading&&t.cantRender?e("div",{staticClass:"notification is-warning"},[t._m(2)]):t.isLoading||t.cantRender?t._e():e("TournamentForm",{attrs:{strings:t.stringList,bikes:t.bikeList,circuits:t.circuitList},on:{submit:t.submit}})],1)])])])},ft=[function(){var t=this,e=t._self._c;return e("h1",{staticClass:"title is-pulled-right"},[e("i",{staticClass:"fas fa-plus"}),t._v(" "),e("i",{staticClass:"fas fa-trophy"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"block"},[e("p",{},[e("i",{staticClass:"fas fa-spin fa-sync"})]),e("p",{staticClass:"is-size-7"},[t._v("Loading")])])},function(){var t=this,e=t._self._c;return e("p",[e("i",{staticClass:"fas fa-exclamation-triangle"}),t._v(" An error ocurred")])}],vt=function(){var t=this,e=t._self._c;return e("div",[e("div",{directives:[{name:"show",rawName:"v-show",value:t.warningEdits.length>0,expression:"warningEdits.length > 0"}],staticClass:"message is-warning"},[e("div",{staticClass:"message-body is-clearfix"},[e("i",{staticClass:"fas fa-times-circle is-size-5 is-clickable is-pulled-right",on:{click:function(e){t.warningEdits=[]}}}),e("div",{staticClass:"content"},[e("p",[t._v("Please note the following warning:")]),e("ul",t._l(t.warningEdits,(function(s,a){return e("li",{key:`warning-${a}-${s.slice(0,10)}`},[t._v(t._s(s))])})),0)])])]),e("ValidationObserver",{ref:"observer"},[e("div",{staticClass:"field"},[e("label",{staticClass:"label",attrs:{for:""}},[t._v("ID tournament")]),e("div",{staticClass:"control"},[e("input",{staticClass:"input",attrs:{type:"text",disabled:"",placeholder:"Autogenerated after creation"},domProps:{value:""+(t.edit?t.id:"")}})])]),e("b-field",{staticClass:"my-4",attrs:{label:"Name"}},[e("b-autocomplete",{ref:"nameAutocomplete",attrs:{placeholder:"Start typing to find a name or create a new one","keep-first":!1,"open-on-focus":!1,data:t.filteredNameStrings,field:"value",clearable:!0},on:{select:e=>t.nameSelected=e},model:{value:t.nameInput,callback:function(e){t.nameInput=e},expression:"nameInput"}})],1),e("div",{staticClass:"columns"},[e("div",{staticClass:"column"},[e("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function({errors:s,valid:a}){return[e("b-field",{attrs:{label:"Start date & time (In local timezone)",type:{"is-danger":s[0],"is-success":a},message:s}},[e("b-datetimepicker",{attrs:{placeholder:"Type or select a date...",icon:"calendar",timepicker:{"hour-format":"24"},"datetime-formatter":t.datetimeToReadableFormat,"icon-pack":"fas",editable:""},model:{value:t.startTimestamp,callback:function(e){t.startTimestamp=e},expression:"startTimestamp"}})],1)]}}])}),t.startTimestamp?e("div",{staticClass:"message mb-2"},[e("div",{staticClass:"message-body p-2"},[e("p",{staticClass:"is-size-7"},[t._v("In local time ("+t._s(t.myTimezone)+"): "),e("b",[t._v(t._s(t.datetimeToReadableFormat(t.startTimestamp)))])]),e("p",{staticClass:"is-size-7"},[t._v("In Philippines time (GMT+8): "),e("b",[t._v(t._s(t.datetimeToPhilippinesToReadableFormat(t.startTimestamp)))])])])]):t._e()],1),e("div",{staticClass:"column"},[e("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function({errors:s,valid:a}){return[e("b-field",{attrs:{label:"End date & time (In local timezone)",type:{"is-danger":s[0],"is-success":a},message:s}},[e("b-datetimepicker",{attrs:{placeholder:"Type or select a date...",icon:"calendar",timepicker:{"hour-format":"24"},"datetime-formatter":t.datetimeToReadableFormat,"hour-format":24,"icon-pack":"fas",editable:""},model:{value:t.endTimestamp,callback:function(e){t.endTimestamp=e},expression:"endTimestamp"}})],1)]}}])}),t.endTimestamp?e("div",{staticClass:"message mb-2"},[e("div",{staticClass:"message-body p-2"},[e("p",{staticClass:"is-size-7"},[t._v("In local time ("+t._s(t.myTimezone)+"): "),e("b",[t._v(t._s(t.datetimeToReadableFormat(t.endTimestamp)))])]),e("p",{staticClass:"is-size-7"},[t._v("In Philippines time (GMT+8): "),e("b",[t._v(t._s(t.datetimeToPhilippinesToReadableFormat(t.endTimestamp)))])])])]):t._e()],1)]),e("div",{staticClass:"columns"},[e("div",{staticClass:"column"},[e("BInputNumberWithValidation",{attrs:{rules:"integer|max_value:24|min_value:-24",type:"number",label:"Time offset (Hours)",help:"Can be between -24 and 24. If empty, by default is 0 (no offset)."},model:{value:t.timeOffsetHours,callback:function(e){t.timeOffsetHours=e},expression:"timeOffsetHours"}})],1),e("div",{staticClass:"column"},[e("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0",type:"number",label:"Last entry (In minutes)",help:"If empty, by default is 15"},model:{value:t.lastEntryInMinutes,callback:function(e){t.lastEntryInMinutes=e},expression:"lastEntryInMinutes"}})],1)]),e("div",{staticClass:"columns"},[e("div",{staticClass:"column"},[e("BInputNumberWithValidation",{attrs:{rules:"required|integer|min_value:0",type:"number",label:"Restart Frequency",help:"In hours, when a new version of the tournament will start"},model:{value:t.restartFrequency,callback:function(e){t.restartFrequency=e},expression:"restartFrequency"}})],1),e("div",{staticClass:"column"},[e("BInputNumberWithValidation",{attrs:{rules:"required|integer|min_value:1",type:"number",label:"Duration",help:"In hours, how long this tournament will run once started. Must be a value equal or greater than 1"},model:{value:t.duration,callback:function(e){t.duration=e},expression:"duration"}})],1)]),e("BCheckboxesWithValidation",{attrs:{rules:"required|oneOf:0,1",label:"isActivated"}},[e("b-field",{staticClass:"my-4",attrs:{label:"Is tournament activated?"}},[e("b-radio",{attrs:{"native-value":"0"},model:{value:t.isActivated,callback:function(e){t.isActivated=e},expression:"isActivated"}},[t._v("Deactivated")]),e("b-radio",{attrs:{"native-value":"1"},model:{value:t.isActivated,callback:function(e){t.isActivated=e},expression:"isActivated"}},[t._v("Activated")])],1)],1),e("b-field",{staticClass:"my-4",attrs:{label:"Country Whitelist"}},[e("b-autocomplete",{attrs:{placeholder:"Search a country...","keep-first":!1,"open-on-focus":!1,data:t.filteredCountriesWhitelist,field:"name"},on:{select:e=>t.pushCountryWhitelist(e)},scopedSlots:t._u([{key:"empty",fn:function(){return[t._v('No country called "'+t._s(t.countryWhitelistInput)+'"')]},proxy:!0}]),model:{value:t.countryWhitelistInput,callback:function(e){t.countryWhitelistInput=e},expression:"countryWhitelistInput"}})],1),e("div",{staticClass:"message"},[0==t.countryWhitelistArray.length?e("div",{staticClass:"message-body"},[e("p",{staticClass:"is-size-7"},[t._v("If the country whitelist is empty, ALL countries are allowed.")])]):e("div",{staticClass:"message-body"},[e("p",{staticClass:"is-size-7 mb-3"},[t._v("The following countries are allowed:")]),e("b-taglist",t._l(t.countryWhitelistArray,(function(s){return e("b-tag",{key:"whitelist-"+s.code,attrs:{type:"is-primary",closable:!0},on:{close:function(e){return t.removeCountryFromWhitelist(s.code)}}},[t._v(" "+t._s(s.name)+" ")])})),1)],1)]),e("b-field",{staticClass:"my-4",attrs:{label:"Country Blacklist"}},[e("b-autocomplete",{attrs:{placeholder:"Start typing to find a name","keep-first":!1,"open-on-focus":!1,data:t.filteredCountriesBlacklist,field:"name"},on:{select:e=>t.pushCountryBlacklist(e)},scopedSlots:t._u([{key:"empty",fn:function(){return[t._v('No country called "'+t._s(t.countryWhitelistInput)+'"')]},proxy:!0}]),model:{value:t.countryBlacklistInput,callback:function(e){t.countryBlacklistInput=e},expression:"countryBlacklistInput"}})],1),e("div",{staticClass:"message"},[0==t.countryBlacklistArray.length?e("div",{staticClass:"message-body"},[e("p",{staticClass:"is-size-7"},[t._v("If the country blacklilst is empty, -NO- countries are blocked.")])]):e("div",{staticClass:"message-body"},[e("p",{staticClass:"is-size-7 mb-3"},[t._v("The following countries are not allowed:")]),e("b-taglist",t._l(t.countryBlacklistArray,(function(s){return e("b-tag",{key:"blacklist-"+s.code,attrs:{type:"is-danger",closable:!0},on:{close:function(e){return t.removeCountryFromBlacklist(s.code)}}},[t._v(" "+t._s(s.name)+" ")])})),1)],1)]),e("BSelectWithValidation",{attrs:{rules:"required|oneOf:NONE,OPEN,TEAM,PRO TEAM,PROVIDED,SELECT",label:"Bike restriction"},model:{value:t.bikeRestriction,callback:function(e){t.bikeRestriction=e},expression:"bikeRestriction"}},[e("option",{attrs:{value:"NONE"}},[t._v("None")]),e("option",{attrs:{value:"SELECT"}},[t._v("Select bikes")]),e("option",{attrs:{value:"OPEN"}},[t._v("Open")]),e("option",{attrs:{value:"TEAM"}},[t._v("Team")]),e("option",{attrs:{value:"PRO TEAM"}},[t._v("Pro Team")]),e("option",{attrs:{value:"PROVIDED"}},[t._v("Provided")])]),"SELECT"==t.bikeRestriction?e("div",[e("b-field",{staticClass:"my-4",attrs:{label:"Bikes to restrict (Select)"}},[e("b-autocomplete",{attrs:{placeholder:"Start typing to find a bike","keep-first":!1,"open-on-focus":!1,data:t.filteredBikeRestriction,field:"name"},on:{select:e=>t.pushBikeRestrictionArray(e)},scopedSlots:t._u([{key:"empty",fn:function(){return[t._v('No circuit found with name "'+t._s(t.bikeRestrictionInput)+'"')]},proxy:!0}],null,!1,1300342243),model:{value:t.bikeRestrictionInput,callback:function(e){t.bikeRestrictionInput=e},expression:"bikeRestrictionInput"}})],1),e("div",{staticClass:"message",class:{"is-danger":0==t.bikeRestrictionArray.length}},[0==t.bikeRestrictionArray.length?e("div",{staticClass:"message-body"},[e("p",{staticClass:"is-size-7"},[e("b",[t._v("REQUIRED")]),t._v(". Please, select at least one bike.")])]):e("div",{staticClass:"message-body"},[e("p",{staticClass:"is-size-7 mb-3"},[t._v("Restricted to the following bikes:")]),e("b-taglist",t._l(t.bikeRestrictionArray,(function(s){return e("b-tag",{key:"bike-restricted-"+s.id,attrs:{type:"is-primary",closable:!0},on:{close:function(e){return t.removeBikeFromRestriction(t.circuit.id)}}},[t._v(" "+t._s(s.name)+" ")])})),1)],1)])],1):t._e(),"PROVIDED"===t.bikeRestriction?e("div",[e("b-field",{staticClass:"my-4",attrs:{label:"Bike restriction (Provided)"}},[e("b-autocomplete",{ref:"bikeProvidedAutocomplete",attrs:{placeholder:"Start typing to find a bike","keep-first":!1,"open-on-focus":!1,data:t.filteredBikeProvided,field:"name",clearable:!0},on:{select:e=>t.bikeProvidedSelected=e},scopedSlots:t._u([{key:"empty",fn:function(){return[t._v('No bike found with name "'+t._s(t.bikeProvidedInput)+'"')]},proxy:!0}],null,!1,1673519830),model:{value:t.bikeProvidedInput,callback:function(e){t.bikeProvidedInput=e},expression:"bikeProvidedInput"}})],1)],1):t._e(),e("BCheckboxesWithValidation",{attrs:{rules:"required|oneOf:0,1",label:"isBikeUpgradesAllowed"}},[e("b-field",{staticClass:"my-4",attrs:{label:"Is bike upgrades allowed?"}},[e("b-radio",{attrs:{"native-value":"0"},model:{value:t.isBikeUpgradesAllowed,callback:function(e){t.isBikeUpgradesAllowed=e},expression:"isBikeUpgradesAllowed"}},[t._v("Don't allow bike upgrades")]),e("b-radio",{attrs:{"native-value":"1"},model:{value:t.isBikeUpgradesAllowed,callback:function(e){t.isBikeUpgradesAllowed=e},expression:"isBikeUpgradesAllowed"}},[t._v("Allow bike upgrades")])],1)],1),e("BSelectWithValidation",{attrs:{rules:"required",label:"Is compulsives allowed?"},model:{value:t.isCompulsivesAllowed,callback:function(e){t.isCompulsivesAllowed=e},expression:"isCompulsivesAllowed"}},[e("option",{attrs:{value:"ALL"}},[t._v("All")]),e("option",{attrs:{value:"NONE"}},[t._v("None")])]),e("BCheckboxesWithValidation",{attrs:{rules:"required|oneOf:1,2,3,4,5",label:"winningCondition"}},[e("b-field",{staticClass:"my-4",attrs:{label:"Winning condition"}},[e("b-radio",{attrs:{"native-value":"1"},model:{value:t.winningCondition,callback:function(e){t.winningCondition=e},expression:"winningCondition"}},[t._v("High Score")]),e("b-radio",{attrs:{"native-value":"2"},model:{value:t.winningCondition,callback:function(e){t.winningCondition=e},expression:"winningCondition"}},[t._v("Accumulated Score")]),e("b-radio",{attrs:{"native-value":"3"},model:{value:t.winningCondition,callback:function(e){t.winningCondition=e},expression:"winningCondition"}},[t._v("Total Circuit Score")]),e("b-radio",{attrs:{"native-value":"4"},model:{value:t.winningCondition,callback:function(e){t.winningCondition=e},expression:"winningCondition"}},[t._v("Best Daily Score")]),e("b-radio",{attrs:{"native-value":"5"},model:{value:t.winningCondition,callback:function(e){t.winningCondition=e},expression:"winningCondition"}},[t._v("Lottery Tickets")])],1)],1),e("BCheckboxesWithValidation",{attrs:{rules:"required|oneOf:0,1,2",label:"scoreDisplay"}},[e("b-field",{staticClass:"my-4",attrs:{label:"Display score?"}},[e("b-radio",{attrs:{"native-value":"0"},model:{value:t.scoreDisplay,callback:function(e){t.scoreDisplay=e},expression:"scoreDisplay"}},[t._v("Don't display")]),e("b-radio",{attrs:{"native-value":"1"},model:{value:t.scoreDisplay,callback:function(e){t.scoreDisplay=e},expression:"scoreDisplay"}},[t._v("Display Score")]),e("b-radio",{attrs:{"native-value":"2"},model:{value:t.scoreDisplay,callback:function(e){t.scoreDisplay=e},expression:"scoreDisplay"}},[t._v("Display Percent Increase")])],1)],1),e("BInputNumberWithValidation",{attrs:{rules:"integer|max_value:24|min_value:0",type:"number",label:"Lap limit",help:"Zero (0) is normal behaviour, otherwise enter the number of laps in race"},model:{value:t.lapLimit,callback:function(e){t.lapLimit=e},expression:"lapLimit"}}),e("BSelectWithValidation",{attrs:{rules:"required",label:"Circuit restrictions"},model:{value:t.selectedOptionCircuitRestriction,callback:function(e){t.selectedOptionCircuitRestriction=e},expression:"selectedOptionCircuitRestriction"}},[e("option",{attrs:{value:"NONE"}},[t._v("None")]),e("option",{attrs:{value:"RANDOM"}},[t._v("Random")]),e("option",{attrs:{value:"LIMITED"}},[t._v("Limited (Choose circuits...)")])]),"LIMITED"==t.selectedOptionCircuitRestriction?e("div",[e("b-field",{staticClass:"my-4",attrs:{label:"Circuit restriction (Limited)"}},[e("b-autocomplete",{attrs:{placeholder:"Start typing to find a circuit","keep-first":!1,"open-on-focus":!1,data:t.filteredCircuitRestriction,field:"name"},on:{select:e=>t.pushCircuitRestrictionArray(e)},scopedSlots:t._u([{key:"empty",fn:function(){return[t._v('No circuit found with name "'+t._s(t.circuitRestrictionInput)+'"')]},proxy:!0}],null,!1,2892632981),model:{value:t.circuitRestrictionInput,callback:function(e){t.circuitRestrictionInput=e},expression:"circuitRestrictionInput"}})],1),e("div",{staticClass:"message",class:{"is-danger":0==t.circuitRestrictionArray.length}},[0==t.circuitRestrictionArray.length?e("div",{staticClass:"message-body"},[e("p",{staticClass:"is-size-7"},[e("b",[t._v("REQUIRED")]),t._v(". Please, select at least one circuit to restrict.")])]):e("div",{staticClass:"message-body"},[e("p",{staticClass:"is-size-7 mb-3"},[t._v("Restricted to the following circuits:")]),e("b-taglist",t._l(t.circuitRestrictionArray,(function(s){return e("b-tag",{key:"circuit-"+s.id,attrs:{type:"is-primary",closable:!0},on:{close:function(e){return t.removeCircuitFromRestriction(s.id)}}},[t._v(" "+t._s(s.name)+" ")])})),1)],1)])],1):t._e(),e("div",{staticClass:"columns my-2 is-multiline"},[e("div",{staticClass:"column is-6"},[e("BInputNumberWithValidation",{attrs:{rules:"integer|max_value:32|min_value:0",type:"number",label:"Player starting position",help:"Min: 0 / Max: 32"},model:{value:t.playerStartingPosition,callback:function(e){t.playerStartingPosition=e},expression:"playerStartingPosition"}})],1),e("div",{staticClass:"column is-6"},[e("BInputNumberWithValidation",{attrs:{rules:"integer|max_value:31|min_value:-1",type:"number",label:"Opponents Limit",help:"Min: -1 / Max: 31"},model:{value:t.opponentsLimit,callback:function(e){t.opponentsLimit=e},expression:"opponentsLimit"}})],1),e("div",{staticClass:"column is-6"},[e("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0",type:"number",label:"Player MIN level"},model:{value:t.playerMinLevel,callback:function(e){t.playerMinLevel=e},expression:"playerMinLevel"}})],1),e("div",{staticClass:"column is-6"},[e("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0",type:"number",label:"Player MAX level"},model:{value:t.playerMaxLevel,callback:function(e){t.playerMaxLevel=e},expression:"playerMaxLevel"}})],1),e("div",{staticClass:"column is-6"},[e("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0",type:"number",label:"Bike MIN level"},model:{value:t.bikeMinLevel,callback:function(e){t.bikeMinLevel=e},expression:"bikeMinLevel"}})],1),e("div",{staticClass:"column is-6"},[e("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0",type:"number",label:"Bike MAX level"},model:{value:t.bikeMaxLevel,callback:function(e){t.bikeMaxLevel=e},expression:"bikeMaxLevel"}})],1),e("div",{staticClass:"column is-6"},[e("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0",type:"number",label:"Player MIN race"},model:{value:t.playerMinRace,callback:function(e){t.playerMinRace=e},expression:"playerMinRace"}})],1),e("div",{staticClass:"column is-6"},[e("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0",type:"number",label:"Player MAX race"},model:{value:t.playerMaxRace,callback:function(e){t.playerMaxRace=e},expression:"playerMaxRace"}})],1)]),e("div",{staticClass:"columns"},[e("div",{staticClass:"column is-6"},[e("BInputNumberWithValidation",{attrs:{rules:"required|integer|min_value:0|multipleOf100",type:"number",label:"Entry cost",help:"IMPORTANT: The cost is the value times 100. Ex.: If the entry cost is 5 coins, the value to insert is 5 * 100 = 500. (The value must be a multiple of 100)"},model:{value:t.entryCost,callback:function(e){t.entryCost=e},expression:"entryCost"}})],1),e("div",{staticClass:"column is-6"},[e("BSelectWithValidation",{attrs:{rules:"required",label:"Entry cost currency"},model:{value:t.entryCurrency,callback:function(e){t.entryCurrency=e},expression:"entryCurrency"}},[e("option",{attrs:{value:"1"}},[t._v("Coins")]),e("option",{attrs:{value:"2"}},[t._v("Diamons")]),e("option",{attrs:{value:"3"}},[t._v("Dollars")]),e("option",{attrs:{value:"4"}},[t._v("Race Tickets")])])],1)]),e("BCheckboxesWithValidation",{attrs:{rules:"required",label:"isEntryFeeOnlyOnce"}},[e("b-field",{staticClass:"my-4",attrs:{label:"Is entry free only one"}},[e("b-radio",{attrs:{"native-value":"0"},model:{value:t.isEntryFeeOnlyOnce,callback:function(e){t.isEntryFeeOnlyOnce=e},expression:"isEntryFeeOnlyOnce"}},[t._v("No")]),e("b-radio",{attrs:{"native-value":"1"},model:{value:t.isEntryFeeOnlyOnce,callback:function(e){t.isEntryFeeOnlyOnce=e},expression:"isEntryFeeOnlyOnce"}},[t._v("Yes")])],1)],1),e("div",{staticClass:"card my-3"},[e("div",{staticClass:"card-content"},[e("h5",{staticClass:"title is-5"},[t._v("Prize Class 1")]),e("BSelectWithValidation",{attrs:{rules:"required",label:"Prize type"},model:{value:t.prizeClass1ID,callback:function(e){t.prizeClass1ID=e},expression:"prizeClass1ID"}},[e("option",{attrs:{value:"0"}},[t._v("No prize")]),e("option",{attrs:{value:"1"}},[t._v("Coins")]),e("option",{attrs:{value:"2"}},[t._v("Diamonds")]),e("option",{attrs:{value:"3"}},[t._v("Bike (Select bike...)")]),e("option",{attrs:{value:"4"}},[t._v("Physical Prize (Upload image...)")])]),"0"!==t.prizeClass1ID?e("b-field",{staticClass:"my-4",attrs:{label:"Prize description"}},[e("b-autocomplete",{ref:"prizeClass1DescAutocomplete",attrs:{placeholder:"Start typing to find a name or create a new one","keep-first":!1,"open-on-focus":!1,data:t.filteredStringsPrizeClass1Desc,field:"value",clearable:!0},on:{select:e=>t.prizeClass1DescSelected=e},model:{value:t.prizeClass1DescInput,callback:function(e){t.prizeClass1DescInput=e},expression:"prizeClass1DescInput"}})],1):t._e(),"1"===t.prizeClass1ID||"2"===t.prizeClass1ID?e("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0",type:"number",label:"Amount to win "},model:{value:t.prizeClass1Number,callback:function(e){t.prizeClass1Number=e},expression:"prizeClass1Number"}}):t._e(),"3"===t.prizeClass1ID?e("b-field",{staticClass:"my-4",attrs:{label:"Bike to win"}},[e("b-autocomplete",{ref:"prizeClass1BikeAutocomplete",attrs:{placeholder:"Start typing to find a bike","keep-first":!1,"open-on-focus":!1,data:t.filteredPrizeClass1Bike,field:"name",clearable:!0},on:{select:e=>t.selectPrizeClass1Bike(e)},scopedSlots:t._u([{key:"empty",fn:function(){return[t._v('No bike found with name "'+t._s(t.prizeClass1BikeInput)+'"')]},proxy:!0}],null,!1,2558047978),model:{value:t.prizeClass1BikeInput,callback:function(e){t.prizeClass1BikeInput=e},expression:"prizeClass1BikeInput"}})],1):t._e(),"4"===t.prizeClass1ID&&null!=t.prizeClass1URL?e("div",{staticClass:"box"},[e("label",{staticClass:"label"},[t._v("Prize Class 1 - Picture")]),e("p",{staticClass:"is-size-7 mb-3"},[t._v("(Original picture)")]),e("img",{staticClass:"image mt-3",attrs:{src:`${t.apiUrl}/images/${t.prizeClass1URL}`}}),e("div",{staticClass:"buttons mt-3"},[e("button",{staticClass:"button is-danger is-small",on:{click:function(e){t.prizeClass1URL=null}}},[t._v("Remove")])])]):t._e(),"4"===t.prizeClass1ID&&null==t.prizeClass1URL?e("div",{staticClass:"box"},[e("label",{staticClass:"label"},[t._v("Prize Class 1 - Picture")]),e("p",{staticClass:"is-size-7 mb-3"},[t._v("Only PNG. Minimum size required: 234x129 px.")]),t.prizeClass1ImageResultData?e("div",[e("img",{staticClass:"image",attrs:{src:t.prizeClass1ImageResultData}})]):t._e(),t.prizeClass1Image.src?e("div",{staticClass:"notification-cropper is-size-7"},[t._v(" Please crop the image to the correct."),e("br"),t._v(" You can use the wheel mouse to zoom in and out. ")]):t._e(),t.prizeClass1Image.src?e("cropper",{ref:"cropperPrize1Image",staticClass:"prize-cropper",attrs:{backgroundClass:"cropper-background",canvas:t.theCanvas,"stencil-props":t.theStencil,src:t.prizeClass1Image.src,roundResult:!1},on:{error:function(e){t.prizeClass1ImageLoaded=!1},ready:function(e){t.prizeClass1ImageLoaded=!0}}}):t._e(),t.prizeClass1ImageResultData?t._e():e("div",{staticClass:"buttons mt-3"},[e("button",{staticClass:"button is-small",class:{"is-primary":!t.prizeClass1Image.src,"is-light":t.prizeClass1Image.src},on:{click:function(e){return t.$refs.prizeClass1ImageInput.click()}}},[t.prizeClass1Image.src?e("span",[e("i",{staticClass:"fas fa-undo"}),t._v(" Upload another image")]):e("span",[e("i",{staticClass:"fas fa-search"}),t._v(" Upload file")]),e("input",{ref:"prizeClass1ImageInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/png"},on:{change:function(e){return t.uploadPrizeImage(e,1)}}})]),t.prizeClass1Image.src?e("button",{staticClass:"button is-primary is-small",attrs:{disabled:!t.prizeClass1ImageLoaded},on:{click:function(e){return t.cropPrizeClassImage(1)}}},[e("i",{staticClass:"fas fa-crop"}),t._v(" Crop image")]):t._e()]),t.prizeClass1ImageResultData&&!t.prizeClass1Image.src?e("div",{staticClass:"buttons mt-3"},[e("button",{staticClass:"button is-danger is-small",on:{click:function(e){t.prizeClass1ImageResultData=null}}},[e("i",{staticClass:"fas fa-trash"}),t._v(" Remove image")])]):t._e()],1):t._e(),"0"!==t.prizeClass1ID?e("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0",type:"number",label:"Min Rank to win prize"},model:{value:t.prizeClass1Rank,callback:function(e){t.prizeClass1Rank=e},expression:"prizeClass1Rank"}}):t._e()],1)]),e("div",{staticClass:"card my-3"},[e("div",{staticClass:"card-content"},[e("h5",{staticClass:"title is-5"},[t._v("Prize Class 2")]),e("BSelectWithValidation",{attrs:{rules:"required",label:"Prize type"},model:{value:t.prizeClass2ID,callback:function(e){t.prizeClass2ID=e},expression:"prizeClass2ID"}},[e("option",{attrs:{value:"0"}},[t._v("No prize")]),e("option",{attrs:{value:"1"}},[t._v("Coins")]),e("option",{attrs:{value:"2"}},[t._v("Diamonds")]),e("option",{attrs:{value:"3"}},[t._v("Bike (Select bike...)")]),e("option",{attrs:{value:"4"}},[t._v("Physical Prize (Upload image...)")])]),"0"!==t.prizeClass2ID?e("b-field",{staticClass:"my-4",attrs:{label:"Prize description"}},[e("b-autocomplete",{ref:"prizeClass2DescAutocomplete",attrs:{placeholder:"Start typing to find a name or create a new one","keep-first":!1,"open-on-focus":!1,data:t.filteredStringsPrizeClass2Desc,field:"value",clearable:!0},on:{select:e=>t.prizeClass2DescSelected=e},model:{value:t.prizeClass2DescInput,callback:function(e){t.prizeClass2DescInput=e},expression:"prizeClass2DescInput"}})],1):t._e(),"1"===t.prizeClass2ID||"2"===t.prizeClass2ID?e("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0",type:"number",label:"Amount to win "},model:{value:t.prizeClass2Number,callback:function(e){t.prizeClass2Number=e},expression:"prizeClass2Number"}}):t._e(),"3"===t.prizeClass2ID?e("b-field",{staticClass:"my-4",attrs:{label:"Bike to win"}},[e("b-autocomplete",{ref:"prizeClass2BikeAutocomplete",attrs:{placeholder:"Start typing to find a name","keep-first":!1,"open-on-focus":!1,data:t.filteredPrizeClass2Bike,field:"name"},on:{select:e=>t.selectPrizeClass2Bike(e)},scopedSlots:t._u([{key:"empty",fn:function(){return[t._v('No bike found with name "'+t._s(t.prizeClass2BikeInput)+'"')]},proxy:!0}],null,!1,2990955177),model:{value:t.prizeClass2BikeInput,callback:function(e){t.prizeClass2BikeInput=e},expression:"prizeClass2BikeInput"}})],1):t._e(),"4"===t.prizeClass2ID&&null!=t.prizeClass2URL?e("div",{staticClass:"box"},[e("label",{staticClass:"label"},[t._v("Prize Class 2 - Picture")]),e("p",{staticClass:"is-size-7 mb-3"},[t._v("(Original picture)")]),e("img",{staticClass:"image mt-3",attrs:{src:`${t.apiUrl}/images/${t.prizeClass2URL}`}}),e("div",{staticClass:"buttons mt-3"},[e("button",{staticClass:"button is-danger is-small",on:{click:function(e){t.prizeClass2URL=null}}},[t._v("Remove")])])]):t._e(),"4"===t.prizeClass2ID&&null==t.prizeClass2URL?e("div",{staticClass:"box"},[e("label",{staticClass:"label"},[t._v("Prize Class 2 - Picture")]),e("p",{staticClass:"is-size-7 mb-3"},[t._v("Only PNG. Minimum size required: 234x129 px.")]),t.prizeClass2ImageResultData?e("div",[e("img",{staticClass:"image",attrs:{src:t.prizeClass2ImageResultData}})]):t._e(),t.prizeClass2Image.src?e("div",{staticClass:"notification-cropper is-size-7"},[t._v(" Please crop the image to the correct."),e("br"),t._v(" You can use the wheel mouse to zoom in and out. ")]):t._e(),t.prizeClass2Image.src?e("cropper",{ref:"cropperPrize2Image",staticClass:"prize-cropper",attrs:{backgroundClass:"cropper-background",canvas:t.theCanvas,"stencil-props":t.theStencil,src:t.prizeClass2Image.src,roundResult:!1},on:{error:function(e){t.prizeClass2ImageLoaded=!1},ready:function(e){t.prizeClass2ImageLoaded=!0}}}):t._e(),t.prizeClass2ImageResultData?t._e():e("div",{staticClass:"buttons mt-3"},[e("button",{staticClass:"button is-small",class:{"is-primary":!t.prizeClass2Image.src,"is-light":t.prizeClass2Image.src},on:{click:function(e){return t.$refs.prizeClass2ImageInput.click()}}},[t.prizeClass2Image.src?e("span",[e("i",{staticClass:"fas fa-undo"}),t._v(" Upload another image")]):e("span",[e("i",{staticClass:"fas fa-search"}),t._v(" Upload file")]),e("input",{ref:"prizeClass2ImageInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/png"},on:{change:function(e){return t.uploadPrizeImage(e,2)}}})]),t.prizeClass2Image.src?e("button",{staticClass:"button is-primary is-small",attrs:{disabled:!t.prizeClass2ImageLoaded},on:{click:function(e){return t.cropPrizeClassImage(2)}}},[e("i",{staticClass:"fas fa-crop"}),t._v(" Crop image")]):t._e()]),t.prizeClass2ImageResultData&&!t.prizeClass2Image.src?e("div",{staticClass:"buttons mt-3"},[e("button",{staticClass:"button is-danger is-small",on:{click:function(e){t.prizeClass2ImageResultData=null}}},[e("i",{staticClass:"fas fa-trash"}),t._v(" Remove image")])]):t._e()],1):t._e(),"0"!==t.prizeClass2ID?e("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0",type:"number",label:"Min Rank to win prize"},model:{value:t.prizeClass2Rank,callback:function(e){t.prizeClass2Rank=e},expression:"prizeClass2Rank"}}):t._e()],1)]),e("div",{staticClass:"card my-3"},[e("div",{staticClass:"card-content"},[e("h5",{staticClass:"title is-5"},[t._v("Prize Class 3")]),e("BSelectWithValidation",{attrs:{rules:"required",label:"Prize type"},model:{value:t.prizeClass3ID,callback:function(e){t.prizeClass3ID=e},expression:"prizeClass3ID"}},[e("option",{attrs:{value:"0"}},[t._v("No prize")]),e("option",{attrs:{value:"1"}},[t._v("Coins (Enter amount...)")]),e("option",{attrs:{value:"2"}},[t._v("Diamonds (Enter amount...)")]),e("option",{attrs:{value:"3"}},[t._v("Bike (Select bike...)")]),e("option",{attrs:{value:"4"}},[t._v("Physical Prize (Upload image...)")])]),"0"!==t.prizeClass3ID?e("b-field",{staticClass:"my-4",attrs:{label:"Prize description"}},[e("b-autocomplete",{ref:"prizeClass3DescAutocomplete",attrs:{placeholder:"Start typing to find a name or create a new one","keep-first":!1,"open-on-focus":!1,data:t.filteredStringsPrizeClass3Desc,field:"value",clearable:!0},on:{select:e=>t.prizeClass3DescSelected=e},model:{value:t.prizeClass3DescInput,callback:function(e){t.prizeClass3DescInput=e},expression:"prizeClass3DescInput"}})],1):t._e(),"1"===t.prizeClass3ID||"2"===t.prizeClass3ID?e("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0",type:"number",label:"Amount to win "},model:{value:t.prizeClass3Number,callback:function(e){t.prizeClass3Number=e},expression:"prizeClass3Number"}}):t._e(),"3"===t.prizeClass3ID?e("b-field",{staticClass:"my-4",attrs:{label:"Bike to win"}},[e("b-autocomplete",{ref:"prizeClass3BikeAutocomplete",attrs:{placeholder:"Start typing to find a name","keep-first":!1,"open-on-focus":!1,data:t.filteredPrizeClass3Bike,field:"name"},on:{select:e=>t.selectPrizeClass3Bike(e)},scopedSlots:t._u([{key:"empty",fn:function(){return[t._v('No bike found with name "'+t._s(t.prizeClass3BikeInput)+'"')]},proxy:!0}],null,!1,1229788776),model:{value:t.prizeClass3BikeInput,callback:function(e){t.prizeClass3BikeInput=e},expression:"prizeClass3BikeInput"}})],1):t._e(),"4"===t.prizeClass3ID&&null!=t.prizeClass3URL?e("div",{staticClass:"box"},[e("label",{staticClass:"label"},[t._v("Prize Class 3 - Picture")]),e("p",{staticClass:"is-size-7 mb-3"},[t._v("(Original picture)")]),e("img",{staticClass:"image mt-3",attrs:{src:`${t.apiUrl}/images/${t.prizeClass3URL}`}}),e("div",{staticClass:"buttons mt-3"},[e("button",{staticClass:"button is-danger is-small",on:{click:function(e){t.prizeClass3URL=null}}},[t._v("Remove")])])]):t._e(),"4"===t.prizeClass3ID&&null==t.prizeClass3URL?e("div",{staticClass:"box"},[e("label",{staticClass:"label"},[t._v("Prize Class 3 - Picture")]),e("p",{staticClass:"is-size-7 mb-3"},[t._v("Only PNG. Minimum size required: 234x129 px.")]),t.prizeClass3ImageResultData?e("div",[e("img",{staticClass:"image",attrs:{src:t.prizeClass3ImageResultData}})]):t._e(),t.prizeClass3Image.src?e("div",{staticClass:"notification-cropper is-size-7"},[t._v(" Please crop the image to the correct."),e("br"),t._v(" You can use the wheel mouse to zoom in and out. ")]):t._e(),t.prizeClass3Image.src?e("cropper",{ref:"cropperPrize3Image",staticClass:"prize-cropper",attrs:{backgroundClass:"cropper-background",canvas:t.theCanvas,"stencil-props":t.theStencil,src:t.prizeClass3Image.src,roundResult:!1},on:{error:function(e){t.prizeClass3ImageLoaded=!1},ready:function(e){t.prizeClass3ImageLoaded=!0}}}):t._e(),t.prizeClass3ImageResultData?t._e():e("div",{staticClass:"buttons mt-3"},[e("button",{staticClass:"button is-small",class:{"is-primary":!t.prizeClass3Image.src,"is-light":t.prizeClass3Image.src},on:{click:function(e){return t.$refs.prizeClass3ImageInput.click()}}},[t.prizeClass3Image.src?e("span",[e("i",{staticClass:"fas fa-undo"}),t._v(" Upload another image")]):e("span",[e("i",{staticClass:"fas fa-search"}),t._v(" Upload file")]),e("input",{ref:"prizeClass3ImageInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/png"},on:{change:function(e){return t.uploadPrizeImage(e,3)}}})]),t.prizeClass3Image.src?e("button",{staticClass:"button is-primary is-small",attrs:{disabled:!t.prizeClass3ImageLoaded},on:{click:function(e){return t.cropPrizeClassImage(3)}}},[e("i",{staticClass:"fas fa-crop"}),t._v(" Crop image")]):t._e()]),t.prizeClass3ImageResultData&&!t.prizeClass3Image.src?e("div",{staticClass:"buttons mt-3"},[e("button",{staticClass:"button is-danger is-small",on:{click:function(e){t.prizeClass3ImageResultData=null}}},[e("i",{staticClass:"fas fa-trash"}),t._v(" Remove image")])]):t._e()],1):t._e(),"0"!==t.prizeClass3ID?e("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0",type:"number",label:"Min Rank to win prize"},model:{value:t.prizeClass3Rank,callback:function(e){t.prizeClass3Rank=e},expression:"prizeClass3Rank"}}):t._e()],1)]),e("b-field",{staticClass:"my-4",attrs:{label:"Sponsor Name"}},[e("b-autocomplete",{ref:"sponsorNameAutocomplete",attrs:{placeholder:"Start typing to find a string or create a new one","keep-first":!1,"open-on-focus":!1,data:t.filteredSponsorNameStrings,field:"value"},on:{select:e=>t.sponsorNameSelected=e},scopedSlots:t._u([{key:"empty",fn:function(){return[t._v('No string in MST found with "'+t._s(t.sponsorNameInput)+'"')]},proxy:!0}]),model:{value:t.sponsorNameInput,callback:function(e){t.sponsorNameInput=e},expression:"sponsorNameInput"}})],1),e("b-field",{staticClass:"my-4",attrs:{label:"Sponsor Slogan"}},[e("b-autocomplete",{ref:"sponsorSloganAutocomplete",attrs:{placeholder:"Start typing to find a string or create a new one","keep-first":!1,"open-on-focus":!1,data:t.filteredSponsorSloganStrings,field:"value"},on:{select:e=>t.sponsorSloganSelected=e},scopedSlots:t._u([{key:"empty",fn:function(){return[t._v('No string in MST found with "'+t._s(t.sponsorSloganInput)+'"')]},proxy:!0}]),model:{value:t.sponsorSloganInput,callback:function(e){t.sponsorSloganInput=e},expression:"sponsorSloganInput"}})],1),e("BCheckboxesWithValidation",{attrs:{rules:"required|",label:"filterable"}},[e("b-field",{staticClass:"my-4",attrs:{label:"Filterable?"}},[e("b-radio",{attrs:{"native-value":"0"},model:{value:t.filterable,callback:function(e){t.filterable=e},expression:"filterable"}},[t._v("No")]),e("b-radio",{attrs:{"native-value":"1"},model:{value:t.filterable,callback:function(e){t.filterable=e},expression:"filterable"}},[t._v("Yes")])],1)],1),e("BSelectWithValidation",{attrs:{rules:"required",label:"Rules modifications"},model:{value:t.rulesModification,callback:function(e){t.rulesModification=e},expression:"rulesModification"}},[e("option",{attrs:{value:"NONE"}},[t._v("None")]),e("option",{attrs:{value:"no_coins"}},[t._v("No coins")]),e("option",{attrs:{value:"brakes_2xcombo"}},[t._v("Brakes 2x combo")])]),"4"==t.prizeClass1ID?e("div",{staticClass:"my-4"},[e("BInputWithValidation",{attrs:{rules:"",label:"Helpshift Link Display"},model:{value:t.helpshiftLinkDisplay,callback:function(e){t.helpshiftLinkDisplay=e},expression:"helpshiftLinkDisplay"}})],1):t._e(),e("div",{staticClass:"columns is-multiline my-4"},[e("div",{staticClass:"column is-6"},[e("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0",type:"number",label:"Sort Order"},model:{value:t.sortOrder,callback:function(e){t.sortOrder=e},expression:"sortOrder"}})],1),e("div",{staticClass:"column is-6"},[e("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0",type:"number",label:"Min IAP"},model:{value:t.minIAP,callback:function(e){t.minIAP=e},expression:"minIAP"}})],1),e("div",{staticClass:"column is-6"},[e("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0|max_value:10",type:"number",label:"Worst Division"},model:{value:t.worstDivision,callback:function(e){t.worstDivision=e},expression:"worstDivision"}})],1),e("div",{staticClass:"column is-6"},[e("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0|max_value:"+(t.worstDivision?t.worstDivision:"10"),type:"number",label:"Best Division"},model:{value:t.bestDivision,callback:function(e){t.bestDivision=e},expression:"bestDivision"}})],1)]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.customValidationErrors.length>0,expression:"customValidationErrors.length > 0"}],staticClass:"message is-danger"},[e("div",{staticClass:"message-body is-clearfix"},[e("i",{staticClass:"fas fa-times-circle is-size-5 is-clickable is-pulled-right",on:{click:function(e){t.customValidationErrors=[]}}}),e("div",{staticClass:"content"},[e("p",[t._v("Please note the following errors:")]),e("ul",t._l(t.customValidationErrors,(function(s,a){return e("li",{key:`error-${a}-${s.slice(0,10)}`},[t._v(t._s(s))])})),0)])])]),e("div",{staticClass:"buttons"},[e("button",{staticClass:"button is-primary is-fullwidth",on:{click:t.handleSubmit}},[e("i",{staticClass:"fas fa-save"}),t._v(" Save")])])],1)],1)},bt=[],Ct=(s("2c66"),s("249d"),s("40e9"),s("907a"),s("986a"),s("1d02"),s("3c5d"),s("6ce5"),s("2834"),s("4ea1"),s("88a7"),s("271a"),s("5494"),function(){var t=this,e=t._self._c;return e("ValidationProvider",{attrs:{vid:t.vid,name:t.$attrs.name||t.$attrs.label,rules:t.rules},scopedSlots:t._u([{key:"default",fn:function({errors:s,valid:a}){return[e("b-field",t._b({attrs:{type:{"is-danger":s[0],"is-success":a},message:s}},"b-field",t.$attrs,!1),[e("b-input",t._b({model:{value:t.innerValue,callback:function(e){t.innerValue=t._n(e)},expression:"innerValue"}},"b-input",t.$attrs,!1))],1),t.help?e("div",{staticClass:"message mb-2"},[e("div",{staticClass:"message-body p-2"},[e("p",{staticClass:"is-size-7"},[t._v(t._s(t.help))])])]):t._e()]}}])})}),gt=[],_t={components:{ValidationProvider:V["b"]},props:{vid:{type:String},rules:{type:[Object,String],default:""},value:{type:null},help:{type:String,default:""}},data:()=>({innerValue:""}),watch:{innerValue(t){this.$emit("input",t)},value(t){this.innerValue=t}},created(){void 0!==this.value&&(this.innerValue=this.value)}},yt=_t,It=Object(u["a"])(yt,Ct,gt,!1,null,null,null),zt=It.exports,kt=function(){var t=this,e=t._self._c;return e("ValidationProvider",{attrs:{vid:t.vid,name:t.$attrs.label,rules:t.rules},scopedSlots:t._u([{key:"default",fn:function({errors:s}){return[e("div",{staticClass:"block"},[t._t("default"),e("p",{staticClass:"has-text-danger"},[t._v(t._s(s[0]))])],2)]}}],null,!0)})},Dt=[],wt={components:{ValidationProvider:V["b"]},props:{vid:{type:String},rules:{type:[Object,String],default:""}}},St=wt,Tt=Object(u["a"])(St,kt,Dt,!1,null,null,null),Lt=Tt.exports,xt=s("a2c1");const Rt=[{name:"Afghanistan",code:"AF"},{name:"Åland Islands",code:"AX"},{name:"Albania",code:"AL"},{name:"Algeria",code:"DZ"},{name:"American Samoa",code:"AS"},{name:"AndorrA",code:"AD"},{name:"Angola",code:"AO"},{name:"Anguilla",code:"AI"},{name:"Antarctica",code:"AQ"},{name:"Antigua and Barbuda",code:"AG"},{name:"Argentina",code:"AR"},{name:"Armenia",code:"AM"},{name:"Aruba",code:"AW"},{name:"Australia",code:"AU"},{name:"Austria",code:"AT"},{name:"Azerbaijan",code:"AZ"},{name:"Bahamas",code:"BS"},{name:"Bahrain",code:"BH"},{name:"Bangladesh",code:"BD"},{name:"Barbados",code:"BB"},{name:"Belarus",code:"BY"},{name:"Belgium",code:"BE"},{name:"Belize",code:"BZ"},{name:"Benin",code:"BJ"},{name:"Bermuda",code:"BM"},{name:"Bhutan",code:"BT"},{name:"Bolivia",code:"BO"},{name:"Bosnia and Herzegovina",code:"BA"},{name:"Botswana",code:"BW"},{name:"Bouvet Island",code:"BV"},{name:"Brazil",code:"BR"},{name:"British Indian Ocean Territory",code:"IO"},{name:"Brunei Darussalam",code:"BN"},{name:"Bulgaria",code:"BG"},{name:"Burkina Faso",code:"BF"},{name:"Burundi",code:"BI"},{name:"Cambodia",code:"KH"},{name:"Cameroon",code:"CM"},{name:"Canada",code:"CA"},{name:"Cape Verde",code:"CV"},{name:"Cayman Islands",code:"KY"},{name:"Central African Republic",code:"CF"},{name:"Chad",code:"TD"},{name:"Chile",code:"CL"},{name:"China",code:"CN"},{name:"Christmas Island",code:"CX"},{name:"Cocos (Keeling) Islands",code:"CC"},{name:"Colombia",code:"CO"},{name:"Comoros",code:"KM"},{name:"Congo",code:"CG"},{name:"Congo, The Democratic Republic of the",code:"CD"},{name:"Cook Islands",code:"CK"},{name:"Costa Rica",code:"CR"},{name:'Cote D"Ivoire',code:"CI"},{name:"Croatia",code:"HR"},{name:"Cuba",code:"CU"},{name:"Cyprus",code:"CY"},{name:"Czech Republic",code:"CZ"},{name:"Denmark",code:"DK"},{name:"Djibouti",code:"DJ"},{name:"Dominica",code:"DM"},{name:"Dominican Republic",code:"DO"},{name:"Ecuador",code:"EC"},{name:"Egypt",code:"EG"},{name:"El Salvador",code:"SV"},{name:"Equatorial Guinea",code:"GQ"},{name:"Eritrea",code:"ER"},{name:"Estonia",code:"EE"},{name:"Ethiopia",code:"ET"},{name:"Falkland Islands (Malvinas)",code:"FK"},{name:"Faroe Islands",code:"FO"},{name:"Fiji",code:"FJ"},{name:"Finland",code:"FI"},{name:"France",code:"FR"},{name:"French Guiana",code:"GF"},{name:"French Polynesia",code:"PF"},{name:"French Southern Territories",code:"TF"},{name:"Gabon",code:"GA"},{name:"Gambia",code:"GM"},{name:"Georgia",code:"GE"},{name:"Germany",code:"DE"},{name:"Ghana",code:"GH"},{name:"Gibraltar",code:"GI"},{name:"Greece",code:"GR"},{name:"Greenland",code:"GL"},{name:"Grenada",code:"GD"},{name:"Guadeloupe",code:"GP"},{name:"Guam",code:"GU"},{name:"Guatemala",code:"GT"},{name:"Guernsey",code:"GG"},{name:"Guinea",code:"GN"},{name:"Guinea-Bissau",code:"GW"},{name:"Guyana",code:"GY"},{name:"Haiti",code:"HT"},{name:"Heard Island and Mcdonald Islands",code:"HM"},{name:"Holy See (Vatican City State)",code:"VA"},{name:"Honduras",code:"HN"},{name:"Hong Kong",code:"HK"},{name:"Hungary",code:"HU"},{name:"Iceland",code:"IS"},{name:"India",code:"IN"},{name:"Indonesia",code:"ID"},{name:"Iran, Islamic Republic Of",code:"IR"},{name:"Iraq",code:"IQ"},{name:"Ireland",code:"IE"},{name:"Isle of Man",code:"IM"},{name:"Israel",code:"IL"},{name:"Italy",code:"IT"},{name:"Jamaica",code:"JM"},{name:"Japan",code:"JP"},{name:"Jersey",code:"JE"},{name:"Jordan",code:"JO"},{name:"Kazakhstan",code:"KZ"},{name:"Kenya",code:"KE"},{name:"Kiribati",code:"KI"},{name:'Korea, Democratic People"S Republic of',code:"KP"},{name:"Korea, Republic of",code:"KR"},{name:"Kuwait",code:"KW"},{name:"Kyrgyzstan",code:"KG"},{name:'Lao People"S Democratic Republic',code:"LA"},{name:"Latvia",code:"LV"},{name:"Lebanon",code:"LB"},{name:"Lesotho",code:"LS"},{name:"Liberia",code:"LR"},{name:"Libyan Arab Jamahiriya",code:"LY"},{name:"Liechtenstein",code:"LI"},{name:"Lithuania",code:"LT"},{name:"Luxembourg",code:"LU"},{name:"Macao",code:"MO"},{name:"Macedonia, The Former Yugoslav Republic of",code:"MK"},{name:"Madagascar",code:"MG"},{name:"Malawi",code:"MW"},{name:"Malaysia",code:"MY"},{name:"Maldives",code:"MV"},{name:"Mali",code:"ML"},{name:"Malta",code:"MT"},{name:"Marshall Islands",code:"MH"},{name:"Martinique",code:"MQ"},{name:"Mauritania",code:"MR"},{name:"Mauritius",code:"MU"},{name:"Mayotte",code:"YT"},{name:"Mexico",code:"MX"},{name:"Micronesia, Federated States of",code:"FM"},{name:"Moldova, Republic of",code:"MD"},{name:"Monaco",code:"MC"},{name:"Mongolia",code:"MN"},{name:"Montserrat",code:"MS"},{name:"Morocco",code:"MA"},{name:"Mozambique",code:"MZ"},{name:"Myanmar",code:"MM"},{name:"Namibia",code:"NA"},{name:"Nauru",code:"NR"},{name:"Nepal",code:"NP"},{name:"Netherlands",code:"NL"},{name:"Netherlands Antilles",code:"AN"},{name:"New Caledonia",code:"NC"},{name:"New Zealand",code:"NZ"},{name:"Nicaragua",code:"NI"},{name:"Niger",code:"NE"},{name:"Nigeria",code:"NG"},{name:"Niue",code:"NU"},{name:"Norfolk Island",code:"NF"},{name:"Northern Mariana Islands",code:"MP"},{name:"Norway",code:"NO"},{name:"Oman",code:"OM"},{name:"Pakistan",code:"PK"},{name:"Palau",code:"PW"},{name:"Palestinian Territory, Occupied",code:"PS"},{name:"Panama",code:"PA"},{name:"Papua New Guinea",code:"PG"},{name:"Paraguay",code:"PY"},{name:"Peru",code:"PE"},{name:"Philippines",code:"PH"},{name:"Pitcairn",code:"PN"},{name:"Poland",code:"PL"},{name:"Portugal",code:"PT"},{name:"Puerto Rico",code:"PR"},{name:"Qatar",code:"QA"},{name:"Reunion",code:"RE"},{name:"Romania",code:"RO"},{name:"Russian Federation",code:"RU"},{name:"RWANDA",code:"RW"},{name:"Saint Helena",code:"SH"},{name:"Saint Kitts and Nevis",code:"KN"},{name:"Saint Lucia",code:"LC"},{name:"Saint Pierre and Miquelon",code:"PM"},{name:"Saint Vincent and the Grenadines",code:"VC"},{name:"Samoa",code:"WS"},{name:"San Marino",code:"SM"},{name:"Sao Tome and Principe",code:"ST"},{name:"Saudi Arabia",code:"SA"},{name:"Senegal",code:"SN"},{name:"Serbia and Montenegro",code:"CS"},{name:"Seychelles",code:"SC"},{name:"Sierra Leone",code:"SL"},{name:"Singapore",code:"SG"},{name:"Slovakia",code:"SK"},{name:"Slovenia",code:"SI"},{name:"Solomon Islands",code:"SB"},{name:"Somalia",code:"SO"},{name:"South Africa",code:"ZA"},{name:"South Georgia and the South Sandwich Islands",code:"GS"},{name:"Spain",code:"ES"},{name:"Sri Lanka",code:"LK"},{name:"Sudan",code:"SD"},{name:"Suriname",code:"SR"},{name:"Svalbard and Jan Mayen",code:"SJ"},{name:"Swaziland",code:"SZ"},{name:"Sweden",code:"SE"},{name:"Switzerland",code:"CH"},{name:"Syrian Arab Republic",code:"SY"},{name:"Taiwan",code:"TW"},{name:"Tajikistan",code:"TJ"},{name:"Tanzania, United Republic of",code:"TZ"},{name:"Thailand",code:"TH"},{name:"Timor-Leste",code:"TL"},{name:"Togo",code:"TG"},{name:"Tokelau",code:"TK"},{name:"Tonga",code:"TO"},{name:"Trinidad and Tobago",code:"TT"},{name:"Tunisia",code:"TN"},{name:"Turkey",code:"TR"},{name:"Turkmenistan",code:"TM"},{name:"Turks and Caicos Islands",code:"TC"},{name:"Tuvalu",code:"TV"},{name:"Uganda",code:"UG"},{name:"Ukraine",code:"UA"},{name:"United Arab Emirates",code:"AE"},{name:"United Kingdom",code:"GB"},{name:"United States",code:"US"},{name:"United States Minor Outlying Islands",code:"UM"},{name:"Uruguay",code:"UY"},{name:"Uzbekistan",code:"UZ"},{name:"Vanuatu",code:"VU"},{name:"Venezuela",code:"VE"},{name:"Viet Nam",code:"VN"},{name:"Virgin Islands, British",code:"VG"},{name:"Virgin Islands, U.S.",code:"VI"},{name:"Wallis and Futuna",code:"WF"},{name:"Western Sahara",code:"EH"},{name:"Yemen",code:"YE"},{name:"Zambia",code:"ZM"},{name:"Zimbabwe",code:"ZW"}];var Nt={props:{edit:{type:Boolean,default:!1},strings:{type:Array,default:()=>[]},bikes:{type:Array,default:()=>[]},circuits:{type:Array,default:()=>[]},tournament:{type:Object,default:()=>{}}},components:{ValidationObserver:V["a"],ValidationProvider:V["b"],BSelectWithValidation:H,BInputWithValidation:tt,BInputNumberWithValidation:zt,BCheckboxesWithValidation:Lt,Cropper:xt["a"]},data(){return{initializated:!1,nameInput:"",nameSelected:null,countryWhitelistInput:"",countryBlacklistInput:"",countryWhitelistArray:[],countryBlacklistArray:[],bikeRestrictionInput:"",bikeRestrictionArray:[],bikeProvidedInput:"",bikeProvidedSelected:null,selectedOptionCircuitRestriction:"RANDOM",circuitRestrictionInput:"",circuitRestrictionArray:[],prizeClass1DescInput:"",prizeClass1DescSelected:null,prizeClass1BikeInput:"",prizeClass1BikeSelected:null,prizeClass2DescInput:"",prizeClass2DescSelected:null,prizeClass3DescInput:"",prizeClass3DescSelected:null,prizeClass1Image:{src:null,type:null},prizeClass1ImageLoaded:!1,prizeClass1ImageResultData:null,prizeClass2Image:{src:null,type:null},prizeClass2ImageLoaded:!1,prizeClass2ImageResultData:null,prizeClass3Image:{src:null,type:null},prizeClass3ImageLoaded:!1,prizeClass3ImageResultData:null,theCanvas:{minHeight:129,maxHeight:129,maxWidth:234,minWidth:234},theStencil:{aspectRatio:78/43},sponsorNameInput:"",sponsorNameSelected:null,sponsorSloganInput:"",sponsorSloganSelected:null,isLoading:!1,customValidationErrors:[],warningEdits:[],id:null,startTimestamp:null,endTimestamp:null,timeOffsetHours:null,restartFrequency:null,duration:null,lastEntryInMinutes:15,isActivated:"0",bikeRestriction:"NONE",isBikeUpgradesAllowed:"1",isCompulsivesAllowed:"ALL",winningCondition:"1",scoreDisplay:"0",lapLimit:0,playerStartingPosition:null,opponentsLimit:-1,playerMaxLevel:null,playerMinLevel:null,bikeMaxLevel:null,bikeMinLevel:null,playerMaxRace:null,playerMinRace:null,entryCost:0,entryCurrency:"1",isEntryFeeOnlyOnce:"0",prizeClass1ID:"0",prizeClass1Desc:null,prizeClass1URL:null,prizeClass1Number:null,prizeClass1Rank:null,prizeClass2ID:"0",prizeClass2Desc:null,prizeClass2URL:null,prizeClass2Number:null,prizeClass2Rank:null,prizeClass3ID:"0",prizeClass3Desc:null,prizeClass3URL:null,prizeClass3Number:null,prizeClass3Rank:null,filterable:"1",rulesModification:"NONE",helpshiftLinkDisplay:"",sortOrder:"0",minIAP:"0",worstDivision:"10",bestDivision:"1"}},beforeMount(){this.edit?this.loadTournamentData():this.initializated=!0},mounted(){this.edit&&this.updateRefs()},destroyed(){this.prizeClass1Image.src&&URL.revokeObjectURL(this.prizeClass1Image.src),this.prizeClass2Image.src&&URL.revokeObjectURL(this.prizeClass2Image.src),this.prizeClass3Image.src&&URL.revokeObjectURL(this.prizeClass3Image.src)},methods:{datetimeToReadableFormat(t){return ct()(t).format("YYYY-MM-DD HH:mm:ss")},datetimeToPhilippinesToReadableFormat(t){return ct()(t).tz("Asia/Manila").format("YYYY-MM-DD HH:mm:ss")},handleSubmit(){this.customValidationErrors=[],this.$refs.observer.validate().then(t=>!t&&(this.showErrorNotification("Some fields are invalid or missing, please check the form"),this.customValidationErrors.push("Some fields are invalid or missing, please check the form"),!0)).then(t=>{let e=t;return null==this.nameSelected&&""==this.nameInput&&(this.customValidationErrors.push("Tournament name not selected or defined: You must select a string from the MST or define a new one"),e=!0),null==this.startTimestamp&&(this.customValidationErrors.push("Start date not selected: You must select a date"),e=!0),null==this.endTimestamp&&(this.customValidationErrors.push("End date not selected: You must select a date"),e=!0),"PROVIDED"===this.bikeRestriction&&(this.bikeProvidedSelected||(this.customValidationErrors.push('No bike for bike restriction "PROVIDED": You must provide a bike to the restriction'),e=!0)),"SELECT"===this.bikeRestriction&&0===this.bikeRestrictionArray.length&&(this.customValidationErrors.push('No bike(s) for bike restriction "SELECT": You must select at least one bike'),e=!0),"LIMITED"===this.selectedOptionCircuitRestriction&&0===this.circuitRestrictionArray.length&&(this.customValidationErrors.push("Circuit restriction not selected: You must select at least one circuit"),e=!0),"1"===this.prizeClass1ID||"2"===this.prizeClass1ID?this.prizeClass1Number||(this.customValidationErrors.push("Prize 1: No prize amount given - You must enter a value"),e=!0):"3"===this.prizeClass1ID&&(this.prizeClass1BikeSelected||(this.customValidationErrors.push("Prize 1: No bike selected: You must select a bike as a prize"),e=!0)),"1"===this.prizeClass2ID||"2"===this.prizeClass2ID?this.prizeClass2Number||(this.customValidationErrors.push("Prize 2: No prize amount given - You must enter a value"),e=!0):"3"===this.prizeClass2ID&&(this.prizeClass2BikeSelected||(this.customValidationErrors.push("Prize 2: No bike selected: You must select a bike as a prize"),e=!0)),"1"===this.prizeClass3ID||"2"===this.prizeClass3ID?this.prizeClass3Number||(this.customValidationErrors.push("Prize 3: No prize amount given - You must enter a value"),e=!0):"3"===this.prizeClass3ID&&(this.prizeClass3BikeSelected||(this.customValidationErrors.push("Prize 3: No bike selected: You must select a bike as a prize"),e=!0)),e}).then(t=>{t?this.showErrorNotification("Some fields are invalid or missing, please check the form"):this.makePayload()}).catch(t=>{this.showErrorNotification(t.message?t.message:"Validation failed, please check the form"),console.error(t)})},makePayload(){const t={};this.nameInput&&null==this.nameSelected?t.name="*"+this.nameInput:t.name=this.nameSelected.name,t.startTimestamp=ct()(this.startTimestamp).unix(),t.endTimestamp=ct()(this.endTimestamp).unix(),t.restartFrequency=parseInt(this.restartFrequency),t.duration=parseInt(this.duration),this.timeOffsetHours&&(t.timeOffsetHours=parseInt(this.timeOffsetHours)),this.lastEntryInMinutes&&(t.lastEntryInMinutes=parseInt(this.lastEntryInMinutes)),t.isActivated=parseInt(this.isActivated),this.countryWhitelistArray.length>0?t.countryWhiteList=this.countryWhitelistArray.map(t=>t.code).join("|"):t.countryWhiteList="ALL",this.countryBlacklistArray.length>0&&(t.countryBlackList=this.countryBlacklistArray.map(t=>t.code).join("|")),"SELECT"===this.bikeRestriction?t.bikeRestriction=this.bikeRestrictionArray.map(t=>t.id).join("|"):"PROVIDED"===this.bikeRestriction&&this.bikeProvidedSelected?(t.bikeRestriction="PROVIDED",t.bikeProvided=this.bikeProvidedSelected.id):"PRO TEAM"===this.bikeRestriction?t.bikeRestriction="Pro Team":t.bikeRestriction=this.bikeRestriction,"PROVIDED"!==this.bikeRestriction&&(t.bikeProvided=0),t.isBikeUpgradesAllowed=parseInt(this.isBikeUpgradesAllowed),t.isCompulsivesAllowed=this.isCompulsivesAllowed,t.winningCondition=parseInt(this.winningCondition),t.scoreDisplay=parseInt(this.scoreDisplay),this.lapLimit&&(t.lapLimit=parseInt(this.lapLimit)),"LIMITED"===this.selectedOptionCircuitRestriction&&this.circuitRestrictionArray.length>0?t.circuitRestriction=this.circuitRestrictionArray.map(t=>t.id).join("|"):"NONE"===this.selectedOptionCircuitRestriction?t.circuitRestriction="":"RANDOM"===this.selectedOptionCircuitRestriction&&(t.circuitRestriction="RANDOM"),this.isOptional(this.playerStartingPosition)&&(t.playerStartingPosition=parseInt(this.playerStartingPosition)),this.isOptional(this.opponentsLimit)&&(t.opponentsLimit=parseInt(this.opponentsLimit)),this.isOptional(this.playerMaxLevel)&&(t.playerMaxLevel=parseInt(this.playerMaxLevel)),this.isOptional(this.playerMinLevel)&&(t.playerMinLevel=parseInt(this.playerMinLevel)),this.isOptional(this.bikeMaxLevel)&&(t.bikeMaxLevel=parseInt(this.bikeMaxLevel)),this.isOptional(this.bikeMinLevel)&&(t.bikeMinLevel=parseInt(this.bikeMinLevel)),this.isOptional(this.playerMaxRace)&&(t.playerMaxRace=parseInt(this.playerMaxRace)),this.isOptional(this.playerMinRace)&&(t.playerMinRace=parseInt(this.playerMinRace)),t.entryCost=parseInt(this.entryCost),t.entryCurrency=parseInt(this.entryCurrency),t.isEntryFeeOnlyOnce=parseInt(this.isEntryFeeOnlyOnce),t.prizeClass1ID=parseInt(this.prizeClass1ID),"0"!==this.prizeClass1ID&&(""!=this.prizeClass1DescInput&&null==this.prizeClass1DescSelected?t.prizeClass1Desc="*"+this.prizeClass1DescInput:null!=this.prizeClass1DescSelected&&(t.prizeClass1Desc=this.prizeClass1DescSelected.name),"1"===this.prizeClass1ID||"2"===this.prizeClass1ID?t.prizeClass1Number=parseInt(this.prizeClass1Number):"3"===this.prizeClass1ID?t.prizeClass1Number=parseInt(this.prizeClass1BikeSelected.id):"4"===this.prizeClass1ID&&(this.prizeClass1ImageResultData?t.prizeClass1URL=this.prizeClass1ImageResultData:this.prizeClass1URL&&(t.prizeClass1URL=this.prizeClass1URL)),this.isOptional(this.prizeClass1Rank)&&(t.prizeClass1Rank=parseInt(this.prizeClass1Rank))),t.prizeClass2ID=parseInt(this.prizeClass2ID),"0"!==this.prizeClass2ID&&(""!=this.prizeClass2DescInput&&null==this.prizeClass2DescSelected?t.prizeClass2Desc="*"+this.prizeClass2DescInput:null!=this.prizeClass2DescSelected&&(t.prizeClass2Desc=this.prizeClass2DescSelected.name),"1"===this.prizeClass2ID||"2"===this.prizeClass2ID?t.prizeClass2Number=parseInt(this.prizeClass2Number):"3"===this.prizeClass2ID?t.prizeClass2Number=parseInt(this.prizeClass2BikeSelected.id):"4"===this.prizeClass2ID&&(this.prizeClass2ImageResultData?t.prizeClass2URL=this.prizeClass2ImageResultData:this.prizeClass2URL&&(t.prizeClass2URL=this.prizeClass2URL)),this.isOptional(this.prizeClass2Rank)&&(t.prizeClass2Rank=parseInt(this.prizeClass2Rank))),t.prizeClass3ID=parseInt(this.prizeClass3ID),"0"!==this.prizeClass3ID&&(""!=this.prizeClass3DescInput&&null==this.prizeClass3DescSelected?t.prizeClass3Desc="*"+this.prizeClass3DescInput:null!=this.prizeClass3DescSelected&&(t.prizeClass3Desc=this.prizeClass3DescSelected.name),"1"===this.prizeClass3ID||"2"===this.prizeClass3ID?t.prizeClass3Number=parseInt(this.prizeClass3Number):"3"===this.prizeClass3ID?t.prizeClass3Number=parseInt(this.prizeClass3BikeSelected.id):"4"===this.prizeClass3ID&&(this.prizeClass3ImageResultData?t.prizeClass3URL=this.prizeClass3ImageResultData:this.prizeClass3URL&&(t.prizeClass3URL=this.prizeClass3URL)),this.isOptional(this.prizeClass3Rank)&&(t.prizeClass3Rank=parseInt(this.prizeClass3Rank))),null!=this.sponsorNameSelected?t.sponsorName=this.sponsorNameSelected.name:""!=this.sponsorNameInput&&null==this.sponsorNameSelected?t.sponsorName="*"+this.sponsorNameInput:t.sponsorName="",null!=this.sponsorNameSelected?t.sponsorSlogan=this.sponsorSloganSelected.name:""!=this.sponsorSloganInput||null!=this.sponsorSloganSelected?t.sponsorSlogan="*"+this.sponsorSloganInput:t.sponsorSlogan="",t.filterable=parseInt(this.filterable),t.rulesModification=this.rulesModification,"4"===this.prizeClass1ID&&this.isOptional(this.helpshiftLinkDisplay)&&(t.helpshiftLinkDisplay=this.helpshiftLinkDisplay),this.isOptional(this.sortOrder)&&(t.sortOrder=parseInt(this.sortOrder)),this.isOptional(this.minIAP)&&(t.minIAP=parseInt(this.minIAP)),this.isOptional(this.worstDivision)&&(t.worstDivision=parseInt(this.worstDivision)),this.isOptional(this.bestDivision)&&(t.bestDivision=parseInt(this.bestDivision)),this.$emit("submit",t)},loadTournamentData(){if(this.id=this.tournament.id,void 0!==this.tournament.name)if("*"===this.tournament.name[0])this.nameInput=this.tournament.name.slice(1);else{let t=this.strings.find(t=>t.name===this.tournament.name);void 0===t?this.warningEdits.push(`Tournament name "${this.tournament.name}" is not a custom string and is not in the MST list. Please assign a correct string or write a new custom name.`):(this.nameSelected=t,this.nameInput=t.value)}if(void 0!=this.tournament.isActivated&&(this.isActivated=this.tournament.isActivated.toString()),this.tournament.startTimestamp){let t=this.tournament.startTimestamp.split(" ")[0]+"T"+this.tournament.startTimestamp.split(" ")[1]+"+08:00",e=new Date(t);this.startTimestamp=e}if(this.tournament.endTimestamp){let t=this.tournament.endTimestamp.split(" ")[0]+"T"+this.tournament.endTimestamp.split(" ")[1]+"+08:00",e=new Date(t);this.endTimestamp=e}if(void 0!=this.tournament.timeOffsetHours&&(this.timeOffsetHours=this.tournament.timeOffsetHours.toString()),void 0!=this.tournament.lastEntryInMinutes&&(this.lastEntryInMinutes=this.tournament.lastEntryInMinutes.toString()),void 0!=this.tournament.restartFrequency&&(this.restartFrequency=this.tournament.restartFrequency.toString()),void 0!=this.tournament.duration&&(this.duration=this.tournament.duration.toString()),"ALL"!=this.tournament.countryWhiteList&&void 0!=this.tournament.countryWhiteList&&""!=this.tournament.countryWhiteList){let t=this.tournament.countryWhiteList.split("|");this.countryWhitelistArray=t.map(t=>{let e=Rt.find(e=>e.code===t);return void 0===e?(this.warningEdits.push(`Country code "${t}" for the "countryWhiteList" not found. Might be a wrong country code or not in the countries list. Please check with admin.`),{code:t,name:"?????????"}):e})}if("ALL"!=this.tournament.countryBlackList&&void 0!=this.tournament.countryBlackList&&""!=this.tournament.countryBlackList){let t=this.tournament.countryBlackList.split("|");this.countryBlacklistArray=t.map(t=>{let e=Rt.find(e=>e.code===t);return void 0===e?(this.warningEdits.push(`Country code "${t}" for the "countryBlackList" not found. Might be a wrong country code or not in the countries list. Please check with admin.`),{code:t,name:"?????????"}):e})}if(void 0!=this.tournament.bikeRestriction){const t=this.tournament.bikeRestriction.toUpperCase();let e=["NONE","OPEN","TEAM","PRO TEAM","PROVIDED"];if(e.includes(t)&&(this.bikeRestriction=t),"PROVIDED"===t&&0!==this.tournament.bikeProvided){let t=this.bikes.find(t=>t.id==this.tournament.bikeProvided);void 0===t?this.warningEdits.push(`Bike ID "${this.tournament.bikeProvided}" for the "bikeProvided" not found. Might be a wrong bike ID or not in the bikes list. Please check with admin.`):(this.bikeProvidedSelected=t,this.bikeProvidedInput=t.name)}if(this.stringHasDigits(t)){let t=this.tournament.bikeRestriction.split("|");this.bikeRestriction="SELECT",this.bikeRestrictionArray=t.map(t=>{let e=this.bikes.find(e=>e.id==t);return void 0===e?(this.warningEdits.push(`Bike ID "${t}" for the "bikeRestriction" not found. Might be a wrong bike ID or not in the bikes list. Please check with admin.`),{id:t,name:"?????????"}):e})}}if(void 0!=this.tournament.isBikeUpgradesAllowed&&(this.isBikeUpgradesAllowed=this.tournament.isBikeUpgradesAllowed.toString()),void 0!=this.tournament.isCompulsivesAllowed&&(this.isCompulsivesAllowed=this.tournament.isCompulsivesAllowed.toUpperCase()),void 0!=this.tournament.winningCondition&&(this.winningCondition=this.tournament.winningCondition.toString()),void 0!=this.tournament.scoreDisplay&&(this.scoreDisplay=this.tournament.scoreDisplay.toString()),void 0!=this.tournament.lapLimit&&(this.lapLimit=this.tournament.lapLimit.toString()),void 0!=this.tournament.circuitRestriction){let t=this.tournament.circuitRestriction.toUpperCase();if("RANDOM"===t)this.selectedOptionCircuitRestriction="RANDOM";else if(""===t)this.selectedOptionCircuitRestriction="NONE";else if(this.stringHasDigits(this.tournament.circuitRestriction)){this.selectedOptionCircuitRestriction="LIMITED";let t=this.tournament.circuitRestriction.split("|");this.circuitRestrictionArray=t.map(t=>{let e=this.circuits.find(e=>e.id==t);return void 0===e?(this.warningEdits.push(`Circuit ID "${t}" for the "circuitRestriction" not found. Might be a wrong circuit ID or not in the circuits list. Please check with admin.`),{id:t,name:"?????????"}):e})}}if(void 0!=this.tournament.playerStartingPosition&&(this.playerStartingPosition=this.tournament.playerStartingPosition.toString()),void 0!=this.tournament.opponentsLimit&&(this.opponentsLimit=this.tournament.opponentsLimit.toString()),void 0!=this.tournament.playerMinLevel&&(this.playerMinLevel=this.tournament.playerMinLevel.toString()),void 0!=this.tournament.playerMaxLevel&&(this.playerMaxLevel=this.tournament.playerMaxLevel.toString()),void 0!=this.tournament.bikeMinLevel&&(this.bikeMinLevel=this.tournament.bikeMinLevel.toString()),void 0!=this.tournament.bikeMaxLevel&&(this.bikeMaxLevel=this.tournament.bikeMaxLevel.toString()),void 0!=this.tournament.playerMinRace&&(this.playerMinRace=this.tournament.playerMinRace.toString()),void 0!=this.tournament.playerMaxRace&&(this.playerMaxRace=this.tournament.playerMaxRace.toString()),void 0!=this.tournament.entryCost&&(this.entryCost=this.tournament.entryCost.toString()),void 0!=this.tournament.entryCurrency&&(this.entryCurrency=this.tournament.entryCurrency.toString()),void 0!=this.tournament.isEntryFeeOnlyOnce&&(this.isEntryFeeOnlyOnce=this.tournament.isEntryFeeOnlyOnce.toString()),void 0!==this.tournament.prizeClass1ID){if(this.prizeClass1ID=this.tournament.prizeClass1ID.toString(),3===this.tournament.prizeClass1ID){let t=this.bikes.find(t=>t.id==this.tournament.prizeClass1Number);void 0===t?this.warningEdits.push(`Bike ID "${this.tournament.prizeClass1Number}" for the "prizeClass1Number" not found. Might be a wrong bike ID or not in the bikes list. Please check with admin.`):(this.prizeClass1BikeSelected=t,this.prizeClass1BikeInput=t.name)}4===this.tournament.prizeClass1ID&&this.tournament.prizeClass1URL&&(this.prizeClass1URL=this.tournament.prizeClass1URL)}if(void 0!==this.tournament.prizeClass1Desc)if(""===this.tournament.prizeClass1Desc)this.prizeClass1DescInput="";else if("*"===this.tournament.prizeClass1Desc[0])this.prizeClass1DescInput=this.tournament.prizeClass1Desc.slice(1);else{let t=this.strings.find(t=>t.name===this.tournament.prizeClass1Desc);void 0===t?this.warningEdits.push(`String "${this.tournament.prizeClass1Desc}" for the "prizeClass1Desc" not found. Might be a wrong string or not in the strings list. Please check with admin.`):(this.prizeClass1DescSelected=t,this.prizeClass1DescInput=t.value)}if(void 0!==this.tournament.prizeClass1Number&&(this.prizeClass1Number=this.tournament.prizeClass1Number.toString()),void 0!==this.tournament.prizeClass1Rank&&(this.prizeClass1Rank=this.tournament.prizeClass1Rank.toString()),void 0!==this.tournament.prizeClass2ID){if(this.prizeClass2ID=this.tournament.prizeClass2ID.toString(),3===this.tournament.prizeClass2ID){let t=this.bikes.find(t=>t.id==this.tournament.prizeClass2Number);void 0===t?this.warningEdits.push(`Bike ID "${this.tournament.prizeClass2Number}" for the "prizeClass2Number" not found. Might be a wrong bike ID or not in the bikes list. Please check with admin.`):(this.prizeClass2BikeSelected=t,this.prizeClass2BikeInput=t.name)}4===this.tournament.prizeClass2ID&&(this.prizeClass2URL=this.tournament.prizeClass2URL)}if(void 0!==this.tournament.prizeClass2Desc)if(""===this.tournament.prizeClass2Desc)this.prizeClass2DescInput="";else if("*"===this.tournament.prizeClass2Desc[0])this.prizeClass2DescInput=this.tournament.prizeClass2Desc.slice(1);else{let t=this.strings.find(t=>t.name===this.tournament.prizeClass2Desc);void 0===t?this.warningEdits.push(`String "${this.tournament.prizeClass2Desc}" for the "prizeClass2Desc" not found. Might be a wrong string or not in the strings list. Please check with admin.`):(this.prizeClass2DescSelected=t,this.prizeClass2DescInput=t.value)}if(void 0!==this.tournament.prizeClass2Number&&(this.prizeClass2Number=this.tournament.prizeClass2Number.toString()),void 0!==this.tournament.prizeClass2Rank&&(this.prizeClass2Rank=this.tournament.prizeClass2Rank.toString()),void 0!==this.tournament.prizeClass3ID){if(this.prizeClass3ID=this.tournament.prizeClass3ID.toString(),3===this.tournament.prizeClass3ID){let t=this.bikes.find(t=>t.id==this.tournament.prizeClass3Number);void 0===t?this.warningEdits.push(`Bike ID "${this.tournament.prizeClass3Number}" for the "prizeClass3Number" not found. Might be a wrong bike ID or not in the bikes list. Please check with admin.`):(this.prizeClass3BikeSelected=t,this.prizeClass3BikeInput=t.name)}4===this.tournament.prizeClass3ID&&(this.prizeClass3URL=this.tournament.prizeClass3URL)}if(void 0!==this.tournament.prizeClass3Desc)if(""===this.tournament.prizeClass3Desc)this.prizeClass3DescInput="";else if("*"===this.tournament.prizeClass3Desc[0])this.prizeClass3DescInput=this.tournament.prizeClass3Desc.slice(1);else{let t=this.strings.find(t=>t.name===this.tournament.prizeClass3Desc);void 0===t?this.warningEdits.push(`String "${this.tournament.prizeClass3Desc}" for the "prizeClass3Desc" not found. Might be a wrong string or not in the strings list. Please check with admin.`):(this.prizeClass3DescSelected=t,this.prizeClass3DescInput=t.value)}if(void 0!==this.tournament.prizeClass3Number&&(this.prizeClass3Number=this.tournament.prizeClass3Number.toString()),void 0!==this.tournament.prizeClass3Rank&&(this.prizeClass3Rank=this.tournament.prizeClass3Rank.toString()),void 0!==this.tournament.sponsorName)if(""===this.tournament.sponsorName)this.sponsorNameInput="";else if("*"===this.tournament.sponsorName[0])this.sponsorNameInput=this.tournament.sponsorName.slice(1);else{let t=this.strings.find(t=>t.name===this.tournament.sponsorName);void 0===t?this.warningEdits.push(`String "${this.tournament.sponsorName}" for the "sponsorName" not found. Might be a wrong string or not in the strings list. Please check with admin.`):(this.sponsorNameSelected=t,this.sponsorNameInput=t.value)}if(void 0!==this.tournament.sponsorSlogan)if(""===this.tournament.sponsorSlogan)this.sponsorSloganInput="";else if("*"===this.tournament.sponsorSlogan[0])this.sponsorSloganInput=this.tournament.sponsorSlogan.slice(1);else{let t=this.strings.find(t=>t.name===this.tournament.sponsorSlogan);void 0===t?this.warningEdits.push(`String "${this.tournament.sponsorSlogan}" for the "sponsorSlogan" not found. Might be a wrong string or not in the strings list. Please check with admin.`):(this.sponsorSloganSelected=t,this.sponsorSloganInput=t.value)}void 0!=this.tournament.filterable&&(this.filterable=this.tournament.filterable.toString()),void 0!=this.tournament.rulesModification&&("none"===this.tournament.rulesModification.toLowerCase()?this.rulesModification="NONE":this.rulesModification=this.tournament.rulesModification.toString()),void 0!=this.tournament.helpshiftLinkDisplay&&(this.helpshiftLinkDisplay=this.tournament.helpshiftLinkDisplay.toString()),void 0!=this.tournament.sortOrder&&(this.sortOrder=this.tournament.sortOrder.toString()),void 0!=this.tournament.minIAP&&(this.minIAP=this.tournament.minIAP.toString()),void 0!=this.tournament.worstDivision&&(this.worstDivision=this.tournament.worstDivision.toString()),void 0!=this.tournament.bestDivision&&(this.bestDivision=this.tournament.bestDivision.toString()),setTimeout(()=>{this.initializated=!0},3e3)},updateRefs(){this.nameSelected&&this.$refs.nameAutocomplete.setSelected(this.nameSelected),this.bikeProvidedSelected&&"PROVIDED"===this.bikeRestriction&&this.$refs.bikeProvidedAutocomplete.setSelected(this.bikeProvidedSelected),this.prizeClass1DescSelected&&"0"!==this.prizeClass1ID&&this.$refs.prizeClass1DescAutocomplete.setSelected(this.prizeClass1DescSelected),this.prizeClass2DescSelected&&"0"!==this.prizeClass2ID&&this.$refs.prizeClass2DescAutocomplete.setSelected(this.prizeClass2DescSelected),this.prizeClass3DescSelected&&"0"!==this.prizeClass3ID&&this.$refs.prizeClass3DescAutocomplete.setSelected(this.prizeClass3DescSelected),this.prizeClass1BikeSelected&&"3"===this.prizeClass1ID&&this.$refs.prizeClass1BikeAutocomplete.setSelected(this.prizeClass1BikeSelected),this.prizeClass2BikeSelected&&"3"===this.prizeClass2ID&&this.$refs.prizeClass2BikeAutocomplete.setSelected(this.prizeClass2BikeSelected),this.prizeClass3BikeSelected&&"3"===this.prizeClass3ID&&this.$refs.prizeClass3BikeAutocomplete.setSelected(this.prizeClass3BikeSelected),this.sponsorNameSelected&&this.$refs.sponsorNameAutocomplete.setSelected(this.sponsorNameSelected),this.sponsorSloganSelected&&this.$refs.sponsorSloganAutocomplete.setSelected(this.sponsorSloganSelected)},getMimeType(t,e=null){const s=new Uint8Array(t).subarray(0,4);let a="";for(let i=0;i<s.length;i++)a+=s[i].toString(16);switch(a){case"89504e47":return"image/png";case"47494638":return"image/gif";case"ffd8ffe0":case"ffd8ffe1":case"ffd8ffe2":case"ffd8ffe3":case"ffd8ffe8":return"image/jpeg";default:return e}},uploadPrizeImage(t,e){const{files:s}=t.target;if(s&&s[0]){this[`prizeClass${e}Image`].src&&URL.revokeObjectURL(this[`prizeClass${e}Image`].src);const t=URL.createObjectURL(s[0]),a=new FileReader;a.onload=a=>{this[`prizeClass${e}Image`]={src:t,type:this.getMimeType(a.target.result,s[0].type)}},a.readAsArrayBuffer(s[0])}},cropPrizeClassImage(t){const e=this.$refs[`cropperPrize${t}Image`].getResult(),s=e.canvas.toDataURL("image/png");this[`prizeClass${t}ImageResultData`]=s,this[`prizeClass${t}Image`]={src:null,type:null}},pushCountryWhitelist(t){t&&(this.countryBlacklistArray=this.countryBlacklistArray.filter(e=>e.code!==t.code),this.countryWhitelistArray.find(e=>e.code===t.code)||(this.countryWhitelistArray.push(t),this.countryWhitelistInput=""))},pushCountryBlacklist(t){t&&(this.countryWhitelistArray=this.countryWhitelistArray.filter(e=>e.code!==t.code),this.countryBlacklistArray.find(e=>e.code===t.code)||(this.countryBlacklistArray.push(t),this.countryBlacklistInput=""))},pushBikeRestrictionArray(t){t&&(this.bikeRestrictionArray.find(e=>e.id===t.id)||(this.bikeRestrictionArray.push(t),this.bikeRestrictionInput=""))},pushCircuitRestrictionArray(t){t&&(this.circuitRestrictionArray.find(e=>e.id===t.id)||(this.circuitRestrictionArray.push(t),this.circuitRestrictionInput=""))},selectPrizeClass1Bike(t){this.prizeClass1BikeSelected=t,this.prizeClass1Number=t?t.id:null},selectPrizeClass2Bike(t){this.prizeClass2BikeSelected=t,this.prizeClass2Number=t?t.id:null},selectPrizeClass3Bike(t){this.prizeClass3BikeSelected=t,this.prizeClass3Number=t?t.id:null},removeCountryFromWhitelist(t){this.countryWhitelistArray=this.countryWhitelistArray.filter(e=>e.code!==t)},removeCountryFromBlacklist(t){this.countryBlacklistArray=this.countryBlacklistArray.filter(e=>e.code!==t)},removeBikeFromRestriction(t){this.bikeRestrictionArray=this.bikeRestrictionArray.filter(e=>e.id!==t)},removeCircuitFromRestriction(t){this.circuitRestrictionArray=this.circuitRestrictionArray.filter(e=>e.id!==t)}},computed:{apiUrl:function(){return"https://tournaments.weplay.media"},myTimezone:function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},filteredNameStrings:function(){return this.strings.filter(t=>t.value.toLowerCase().indexOf(this.nameInput.toLowerCase())>=0)},filteredCountriesWhitelist:function(){return Rt.filter(t=>t.name.toLowerCase().indexOf(this.countryWhitelistInput.toLowerCase())>=0)},filteredCountriesBlacklist:function(){return Rt.filter(t=>t.name.toLowerCase().indexOf(this.countryBlacklistInput.toLowerCase())>=0)},filteredBikeRestriction:function(){return this.bikes.filter(t=>t.name.toLowerCase().indexOf(this.bikeRestrictionInput.toLowerCase())>=0)},filteredBikeProvided:function(){return this.bikes.filter(t=>t.name.toLowerCase().indexOf(this.bikeProvidedInput.toLowerCase())>=0)},filteredCircuitRestriction:function(){return this.circuits.filter(t=>t.name.toLowerCase().indexOf(this.circuitRestrictionInput.toLowerCase())>=0)},filteredStringsPrizeClass1Desc:function(){return this.strings.filter(t=>t.value.toLowerCase().indexOf(this.prizeClass1DescInput.toLowerCase())>=0)},filteredStringsPrizeClass2Desc:function(){return this.strings.filter(t=>t.value.toLowerCase().indexOf(this.prizeClass2DescInput.toLowerCase())>=0)},filteredStringsPrizeClass3Desc:function(){return this.strings.filter(t=>t.value.toLowerCase().indexOf(this.prizeClass3DescInput.toLowerCase())>=0)},filteredPrizeClass1Bike:function(){return this.bikes.filter(t=>t.name.toLowerCase().indexOf(this.prizeClass1BikeInput.toLowerCase())>=0)},filteredPrizeClass2Bike:function(){return this.bikes.filter(t=>t.name.toLowerCase().indexOf(this.prizeClass2BikeInput.toLowerCase())>=0)},filteredPrizeClass3Bike:function(){return this.bikes.filter(t=>t.name.toLowerCase().indexOf(this.prizeClass3BikeInput.toLowerCase())>=0)},filteredSponsorNameStrings:function(){return this.strings.filter(t=>t.value.toLowerCase().indexOf(this.sponsorNameInput.toLowerCase())>=0)},filteredSponsorSloganStrings:function(){return this.strings.filter(t=>t.value.toLowerCase().indexOf(this.sponsorSloganInput.toLowerCase())>=0)}},watch:{bikeRestriction:function(t,e){this.initializated&&t!==e&&(this.bikeProvidedSelected=null,this.bikeProvidedInput="")},prizeClass1ID:function(t,e){this.initializated&&t!==e&&(this.prizeClass1Number=null,this.prizeClass1BikeInput="",this.prizeClass1BikeSelected=null,this.prizeClass1Image={src:null,type:null},this.prizeClass1ImageLoaded=!1,this.prizeClass1ImageResultData=null)},prizeClass2ID:function(t,e){this.initializated&&t!==e&&(this.prizeClass2Number=null,this.prizeClass2BikeInput="",this.prizeClass2BikeSelected=null,this.prizeClass2Image={src:null,type:null},this.prizeClass2ImageLoaded=!1,this.prizeClass2ImageResultData=null)},prizeClass3ID:function(t,e){this.initializated&&t!==e&&(this.prizeClass3Number=null,this.prizeClass3BikeInput="",this.prizeClass3BikeSelected=null,this.prizeClass3Image={src:null,type:null},this.prizeClass3ImageLoaded=!1,this.prizeClass3ImageResultData=null)}}},Pt=Nt,At=(s("8a17"),Object(u["a"])(Pt,vt,bt,!1,null,null,null)),Mt=At.exports,Et={components:{TournamentForm:Mt},data(){return{isLoading:!1,cantRender:!1,tournament:null,stringList:[],bikeList:[],circuitList:[]}},mounted:function(){this.getData()},methods:{getData(){this.isLoading=!0,this.startLoading();const t=[this.$http.get("/stringTable/list"),this.$http.get("/bikes/list"),this.$http.get("/circuits/list")];Promise.all(t).then(t=>{this.stringList=t[0].data,this.bikeList=t[1].data,this.circuitList=t[2].data}).catch(t=>{this.cantRender=!0,this.showErrorNotification("Error fetching data from the server..."),console.error(t)}).finally(()=>{this.isLoading=!1,this.stopLoading()})},submit(t){this.startLoading(),this.$http.post("/tournaments/new",t).then(t=>{console.log(t),this.showSuccessNotification("Tournament created successfully!"),this.$router.push({name:"tournaments"})}).catch(t=>{this.showErrorNotification("An unexpected error occurred. Please try again later."),console.error(t)}).finally(()=>{this.stopLoading()})}}},Ot=Et,Bt=Object(u["a"])(Ot,ht,ft,!1,null,null,null),jt=Bt.exports,Ut=function(){var t=this,e=t._self._c;return e("section",{staticClass:"section"},[e("div",{staticClass:"container"},[e("div",{staticClass:"columns is-centered"},[e("div",{staticClass:"column is-8"},[e("div",{staticClass:"is-clearfix"},[e("h1",{staticClass:"title is-pulled-left"},[e("router-link",{attrs:{to:{name:"tournaments"}}},[e("i",{staticClass:"fas fa-arrow-left"})]),t._v(" Edit tournament")],1),t._m(0)]),e("br"),t.isLoading?e("div",{staticClass:"notification has-text-centered px-2"},[t._m(1)]):!t.isLoading&&t.cantRender?e("div",{staticClass:"notification is-warning"},[t._m(2)]):t.isLoading||t.cantRender||!t.tournament?t._e():e("TournamentForm",{attrs:{strings:t.stringList,bikes:t.bikeList,circuits:t.circuitList,tournament:t.tournament,edit:!0},on:{submit:t.submit}})],1)])])])},$t=[function(){var t=this,e=t._self._c;return e("h1",{staticClass:"title is-pulled-right"},[e("i",{staticClass:"fas fa-pencil"}),t._v(" "),e("i",{staticClass:"fas fa-trophy"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"block"},[e("p",{},[e("i",{staticClass:"fas fa-spin fa-sync"})]),e("p",{staticClass:"is-size-7"},[t._v("Loading")])])},function(){var t=this,e=t._self._c;return e("p",[e("i",{staticClass:"fas fa-exclamation-triangle"}),t._v(" An error ocurred")])}],Vt={components:{TournamentForm:Mt},data(){return{isLoading:!1,cantRender:!1,tournament:null,stringList:[],bikeList:[],circuitList:[],originalTournament:null}},mounted:function(){this.getData()},methods:{getData(){this.isLoading=!0,this.startLoading();const t=[this.$http.get("/stringTable/list"),this.$http.get("/bikes/list"),this.$http.get("/circuits/list"),this.$http.get("/tournaments/"+this.$route.params.id)];Promise.all(t).then(t=>{this.stringList=t[0].data,this.bikeList=t[1].data,this.circuitList=t[2].data,this.tournament=t[3].data}).catch(t=>{this.cantRender=!0,this.showErrorNotification("Error fetching data from the server..."),console.error(t)}).finally(()=>{this.isLoading=!1,this.stopLoading()})},submit(t){const e=JSON.parse(JSON.stringify(this.tournament));e.startTimestamp=new Date(e.startTimestamp.split(" ")[0]+"T"+e.startTimestamp.split(" ")[1]+"+08:00").getTime()/1e3,e.endTimestamp=new Date(e.endTimestamp.split(" ")[0]+"T"+e.endTimestamp.split(" ")[1]+"+08:00").getTime()/1e3;const s=this.getChangedValues(e,t);0!==Object.keys(s).length?(this.startLoading(),this.$http.post("/tournaments/edit/"+this.$route.params.id,s).then(()=>{this.showSuccessNotification("Tournament edited successfully!"),this.$router.push({name:"tournaments"})}).catch(t=>{this.showErrorNotification("An unexpected error occurred. Please try again later."),console.error(t)}).finally(()=>{this.stopLoading()})):this.showSuccessNotification("No changes detected")},getChangedValues(t,e){const s={};for(const a in e)t[a]!==e[a]&&(s[a]=e[a]);return s}}},Wt=Vt,Ft=Object(u["a"])(Wt,Ut,$t,!1,null,null,null),Yt=Ft.exports,Gt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"section"},[e("div",{staticClass:"container"},[t._m(0),e("hr"),e("h2",{staticClass:"title is-4"},[t._v("Current active tournaments "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.activeTournaments,expression:"activeTournaments"}]},[t._v("("+t._s(t.activeTournaments.length)+")")])]),e("p",{staticClass:"subtitle is-6"},[t._v("Here you can see the current active tournaments, with their respective information.")]),e("b-field",{attrs:{label:"Timezone"}},[e("b-select",{attrs:{disabled:t.isLoading,expanded:""},model:{value:t.timezone,callback:function(e){t.timezone=e},expression:"timezone"}},[e("option",{attrs:{value:"local"}},[t._v("Local ("+t._s(t.myTimezone)+")")]),e("option",{attrs:{value:"philippines"}},[t._v("Philippines (GMT +8)")])])],1),e("b-table",{attrs:{data:t.activeTournaments,loading:t.isLoading,striped:"",bordered:"",hoverable:""}},[e("b-table-column",{attrs:{sortable:"",centered:"",numeric:"",label:"ID"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.tournamentId)+" ")]}}])}),e("b-table-column",{attrs:{field:"name",sortable:"",label:"Name"},scopedSlots:t._u([{key:"default",fn:function(s){var a;return["*"!==s.row.name[0]?e("b-tooltip",{attrs:{label:s.row.name,position:"is-right"}},[e("i",{staticClass:"fas fa-info-circle has-text-link fa-fw"}),t._v("  ")]):t._e(),e("span",{class:"*"!==s.row.name[0]?"is-underlined":"is-italic"},[t._v(t._s(null!==(a=t.getString(s.row.name))&&void 0!==a?a:"❓ (STRING NOT FOUND)"))])]}}])}),e("b-table-column",{attrs:{field:"startTimestamp",centered:"",label:"Start"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.toSelectedTimezone(e.row.startTimestamp))+" ")]}}])}),e("b-table-column",{attrs:{field:"endTimestamp",centered:"",label:"End"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.toSelectedTimezone(e.row.endTimestamp))+" ")]}}])}),e("b-table-column",{attrs:{sortable:"",centered:"",numeric:"",label:"Round #"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("p",{staticClass:"is-size-5"},[t._v(t._s(s.row.roundNumber))])]}}])}),e("b-table-column",{attrs:{sortable:"",centered:"",numeric:"",label:"Entries"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("p",{staticClass:"is-size-5"},[t._v(t._s(s.row.numEntrants))])]}}])}),e("b-table-column",{attrs:{label:"Countries",width:"400"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("p",{staticClass:"is-size-7"},[e("b",[t._v("Whitelist")]),t._v(": "+t._s(t.getCountryList(s.row.countryWhiteList)))]),e("p",{staticClass:"is-size-7"},[e("b",[t._v("Blacklist")]),t._v(": "+t._s(t.getCountryList(s.row.countryBlackList)))])]}}])})],1),e("hr"),e("h1",{staticClass:"title is-4"},[t._v("Engagement per tournament")]),e("h2",{staticClass:"subtitle is-6"},[t._v(" Select a specific tournament to see more information about it. ")]),e("SelectTournament",{staticClass:"mb-5",on:{select:t.tournamentSelected}}),null!=t.selectedTournament&&t.showChart?e("div",{},[e("ReportChart",{key:"chart-"+t.selectedTournament,attrs:{rounds:t.chartRounds,entries:t.chartEntries}}),e("ReportStats",{key:"stats-"+t.selectedTournament,attrs:{chartData:t.chartData,isTournamentActive:t.isSelectedTournamentActive}})],1):t._e(),t.showErrorMessage?e("div",{staticClass:"message is-warning"},[e("div",{staticClass:"message-body"},[t._v(" "+t._s(t.errorMessage)+" ")])]):t._e()],1)])},qt=[function(){var t=this,e=t._self._c;return e("h1",{staticClass:"title is-3"},[e("i",{staticClass:"fas fa-line-chart"}),t._v(" Tournament Engagement")])}],Ht=(s("13d5"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"box"},[e("div",{staticClass:"field is-horizontal"},[t._m(0),e("div",{staticClass:"field-body"},[e("div",{staticClass:"field"},[e("div",{staticClass:"control"},[e("div",{staticClass:"select is-fullwidth",class:{"is-loading":t.isLoading}},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedTournament,expression:"selectedTournament"}],attrs:{disabled:t.isLoading},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedTournament=e.target.multiple?s:s[0]},t.emitSelectedTournament]}},[e("option",{attrs:{disabled:""},domProps:{value:null}},[t._v(t._s(t.isLoading?"Loading...":"- Select a tournament -"))]),t._l(t.tournaments,(function(s){return e("option",{key:s.id,domProps:{value:s}},[t._v(" ID: "+t._s(s.id)+" - "+t._s(s.readableName)+t._s(s.active?" - 🟢 Active":"")+" ")])}))],2)])])])])])])}),Kt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"field-label is-normal"},[e("label",{staticClass:"label"},[t._v("Tournament")])])}],Xt={name:"SelectTournament",data(){return{isLoading:!0,tournaments:[],activeTournaments:[],selectedTournament:null}},created(){this.getInitialData()},methods:{getInitialData(){this.isLoading=!0;const t=[this.$http.get("/tournaments/list"),this.$http.get("/tournaments/active")];Promise.all(t).then(t=>{const e=t[0].data,s=t[1].data.map(t=>parseInt(t.tournamentId));e.forEach(t=>{t.readableName=this.getString(t.name),t.active=s.includes(parseInt(t.id))}),this.tournaments=e.sort((t,e)=>t.active&&!e.active?-1:!t.active&&e.active?1:t.id-e.id),this.emitTournaments(),this.emitActiveTournaments()}).catch(t=>{this.showErrorNotification("Error loading tournaments..."),console.error(t)}).finally(()=>{this.isLoading=!1,this.finishedLoading()})},emitSelectedTournament(){this.$emit("select",this.selectedTournament)},emitTournaments(){this.$emit("fetchTournaments",this.tournaments)},emitActiveTournaments(){this.$emit("fetchActiveTournaments",this.activeTournaments)},finishedLoading(){this.$emit("finishedLoading")}}},Jt=Xt,Zt=Object(u["a"])(Jt,Ht,Kt,!1,null,null,null),Qt=Zt.exports,te=function(){var t=this,e=t._self._c;return e("v-chart",{staticClass:"chart-rounded",attrs:{option:t.chartOptions}})},ee=[],se=s("22b4"),ae=s("f95e"),ie=s("3620"),ne=s("9394"),re=s("2da7"),oe=s("3094"),le=s("ff32"),ce=s("104d"),ue=s("4b2a"),de=s("5c7f");Object(se["a"])([ae["a"],ie["a"],ne["a"],re["a"],oe["a"],le["a"],ce["a"],ue["a"]]);var me={props:{rounds:{type:Array,required:!0},entries:{type:Array,required:!0}},components:{VChart:de["b"]},provide:{[de["a"]]:"dark"},data(){return{chartOptions:{backgroundColor:"#2c343c",title:{text:"Entries per round",textStyle:{color:"#fff"},top:15,left:"4%"},toolbox:{show:!0,feature:{saveAsImage:{show:!0,title:"Guardar"}}},tooltip:{trigger:"axis",axisPointer:{type:"cross",snap:!0,label:{backgroundColor:"#42a883"}},formatter:function(t){let e='<div class="has-text-black">';return e+=`<p class="is-size-6 mb-2 has-text-black"><b>Round # ${t[0].axisValue}</b></p>`,e+=`<p class=""><i class="fas fa-users fa-lg fa-fw"></i>&nbsp;${t[0].data} entries</p>`,e+="</div>",e}},grid:{left:"4%",right:"7%",bottom:"80",top:"15%",containLabel:!0},dataZoom:[{type:"inside"},{type:"slider",bottom:20,labelFormatter:(t,e)=>(console.log(t,e),e.length>10?`${e.slice(0,10)}\n${e.slice(11)}`:e)}],xAxis:{name:"Round #",type:"category",data:this.rounds,nameLocation:"center",nameGap:30,nameTextStyle:{fontWeight:800},splitLine:{show:!0}},yAxis:{name:"Entries",type:"value",splitArea:{show:!0},nameLocation:"center",nameGap:-20,axisLabel:{nameGap:10}},series:[{name:"Entries",data:this.entries,type:"line",symbolSize:6,symbol:"circle",color:"#fff",lineStyle:{color:"#42a883"}}]}}}},pe=me,he=(s("9c48"),Object(u["a"])(pe,te,ee,!1,null,"6e315672",null)),fe=he.exports,ve=function(){var t=this,e=t._self._c;return e("div",{staticClass:"my-6"},[e("div",{staticClass:"columns"},[e("div",{staticClass:"column is-6"},[t._m(0),e("div",{staticClass:"box"},[e("nav",{staticClass:"level"},[e("div",{staticClass:"level-item has-text-centered"},[e("div",[e("p",{staticClass:"heading"},[t._v("Round #")]),e("p",{staticClass:"title"},[t._v(t._s(t.roundWithHighestEntries.roundNumber))])])]),e("div",{staticClass:"level-item has-text-centered"},[e("div",[t._m(1),e("p",{staticClass:"title"},[t._v(t._s(t.roundWithHighestEntries.numEntrants))])])])]),e("table",{staticClass:"table is-narrow is-bordered is-fullwidth"},[e("tbody",[e("tr",[e("th",[t._v("Start timestamp")]),e("td",[t._v(t._s(t.roundWithHighestEntries.startTimestamp)+" "),e("span",{staticClass:"is-size-7 has-text-grey"},[t._v("(Asia/Manila)")])])]),e("tr",[e("th",[t._v("End timestamp")]),e("td",[t._v(t._s(t.roundWithHighestEntries.endTimestamp)+" "),e("span",{staticClass:"is-size-7 has-text-grey"},[t._v("(Asia/Manila)")])])]),e("tr",[e("th",[t._v("Tournament Instance(s)")]),e("td",[e("ul",t._l(t.roundWithHighestEntries.instances,(function(s){return e("li",{key:`tournament-${t.roundWithHighestEntries.tournamentId}-instance-${s}`},[t._v(" "+t._s(s)+" "),e("router-link",{attrs:{to:{name:"reports-tournaments-instances-overview",params:{idTournament:t.roundWithHighestEntries.tournamentId,idInstance:s}}}},[e("i",{staticClass:"fas fa-arrow-right fa-lg fa-fw"})])],1)})),0)])])])])]),t._m(2),e("div",{staticClass:"box"},[e("nav",{staticClass:"level"},[e("div",{staticClass:"level-item has-text-centered"},[e("div",[e("p",{staticClass:"heading"},[t._v("Round #")]),e("p",{staticClass:"title"},[t._v(t._s(t.roundWithLowestEntries.roundNumber))])])]),e("div",{staticClass:"level-item has-text-centered"},[e("div",[t._m(3),e("p",{staticClass:"title"},[t._v(t._s(t.roundWithLowestEntries.numEntrants))])])])]),e("table",{staticClass:"table is-narrow is-bordered is-fullwidth"},[e("tbody",[e("tr",[e("th",[t._v("Start timestamp")]),e("td",[t._v(t._s(t.roundWithLowestEntries.startTimestamp)+" "),e("span",{staticClass:"is-size-7 has-text-grey"},[t._v("(Asia/Manila)")])])]),e("tr",[e("th",[t._v("End timestamp")]),e("td",[t._v(t._s(t.roundWithLowestEntries.endTimestamp)+" "),e("span",{staticClass:"is-size-7 has-text-grey"},[t._v("(Asia/Manila)")])])]),e("tr",[e("th",[t._v("Tournament Instance(s)")]),e("td",[e("ul",t._l(t.roundWithLowestEntries.instances,(function(s){return e("li",{key:`tournament-${t.roundWithLowestEntries.tournamentId}-instance-${s}`},[t._v(" "+t._s(s)+" "),e("router-link",{attrs:{to:{name:"reports-tournaments-instances-overview",params:{idTournament:t.roundWithLowestEntries.tournamentId,idInstance:s}}}},[e("i",{staticClass:"fas fa-arrow-right fa-lg fa-fw"})])],1)})),0)])])])])]),t._m(4),e("div",{staticClass:"box"},[e("nav",{staticClass:"level"},[e("div",{staticClass:"level-item has-text-centered"},[e("div",[e("p",{staticClass:"heading"},[t._v("Round #")]),e("p",{staticClass:"title"},[t._v(t._s(t.currentRound.roundNumber))])])]),e("div",{staticClass:"level-item has-text-centered"},[e("div",[t._m(5),e("p",{staticClass:"title"},[t._v(t._s(t.currentRound.numEntrants))])])])]),e("table",{staticClass:"table is-narrow is-bordered is-fullwidth"},[e("tbody",[e("tr",[e("th",[t._v("Start timestamp")]),e("td",[t._v(t._s(t.currentRound.startTimestamp)+" "),e("span",{staticClass:"is-size-7 has-text-grey"},[t._v("(Asia/Manila)")])])]),e("tr",[e("th",[t._v("End timestamp")]),e("td",[t._v(t._s(t.currentRound.endTimestamp)+" "),e("span",{staticClass:"is-size-7 has-text-grey"},[t._v("(Asia/Manila)")])])]),e("tr",[e("th",[t._v("Tournament Instance(s)")]),e("td",[e("ul",t._l(t.currentRound.instances,(function(s){return e("li",{key:`tournament-${t.currentRound.tournamentId}-instance-${s}`},[t._v(" "+t._s(s)+" "),e("router-link",{attrs:{to:{name:"reports-tournaments-instances-overview",params:{idTournament:t.currentRound.tournamentId,idInstance:s}}}},[e("i",{staticClass:"fas fa-arrow-right fa-lg fa-fw"})])],1)})),0)])])])])])]),e("div",{staticClass:"column is-6"},[t._m(6),e("div",{staticClass:"box"},[e("p",[e("b",[t._v("Average entries:")]),t._v(" "+t._s(t.avgEntries10Rounds))]),e("p",{directives:[{name:"show",rawName:"v-show",value:t.isTournamentActive,expression:"isTournamentActive"}],staticClass:"mt-2"},[e("i",{staticClass:"fas fa-exclamation-circle has-text-info"}),t._v(" Tournament is active, so the last round might still not be complete."),e("span",{directives:[{name:"show",rawName:"v-show",value:t.last10Rounds.length>1,expression:"last10Rounds.length > 1"}]},[t._v(" (The last round is not being considered in the average)")])])]),e("div",{staticClass:"vertical-aligned"},[e("table",{staticClass:"table is-striped is-bordered is-fullwidth"},[t._m(7),e("tbody",t._l(t.last10Rounds,(function(s,a){return e("tr",{key:"round-"+s.roundNumber},[e("td",{staticClass:"has-text-centered"},[s.growRate>0?e("i",{staticClass:"fas fa-arrow-up has-text-success"}):s.growRate<0?e("i",{staticClass:"fas fa-arrow-down has-text-danger"}):e("i",{staticClass:"fas fa-minus"})]),e("td",{staticClass:"has-text-centered"},[t._v(t._s(s.roundNumber))]),e("td",{staticClass:"has-text-centered"},[t._v(t._s(s.numEntrants))]),e("td",{staticClass:"has-text-centered"},[t._v(t._s(a==t.last10Rounds.length-1?"...":s.growRate))]),e("td",[e("ul",t._l(s.instances,(function(a){return e("li",{key:`tournament-${s.tournamentId}-instance-${a}`,staticClass:"is-size-7"},[t._v(" "+t._s(a)+" "),e("router-link",{attrs:{to:{name:"reports-tournaments-instances-overview",params:{idTournament:s.tournamentId,idInstance:a}}}},[e("i",{staticClass:"fas fa-arrow-right fa-lg fa-fw"})])],1)})),0)])])})),0)])])])])])},be=[function(){var t=this,e=t._self._c;return e("h1",{staticClass:"title is-4"},[e("i",{staticClass:"fas fa-arrow-up has-text-success"}),t._v(" Round # with highest entries")])},function(){var t=this,e=t._self._c;return e("p",{staticClass:"heading"},[e("i",{staticClass:"fas fa-users"}),t._v(" Entries")])},function(){var t=this,e=t._self._c;return e("h1",{staticClass:"title is-4"},[e("i",{staticClass:"fas fa-arrow-down has-text-danger"}),t._v(" Round # with lowest entries")])},function(){var t=this,e=t._self._c;return e("p",{staticClass:"heading"},[e("i",{staticClass:"fas fa-users"}),t._v(" Entries")])},function(){var t=this,e=t._self._c;return e("h1",{staticClass:"title is-4"},[e("i",{staticClass:"fas fa-arrow-right has-text-info"}),t._v(" Last (or current) round")])},function(){var t=this,e=t._self._c;return e("p",{staticClass:"heading"},[e("i",{staticClass:"fas fa-users"}),t._v(" Entries")])},function(){var t=this,e=t._self._c;return e("h1",{staticClass:"title is-4"},[e("i",{staticClass:"fas fa-chart-line has-text-primary"}),t._v(" Grow Rate in the last 10 rounds")])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",{staticClass:"has-text-centered",attrs:{width:"80"}},[e("i",{staticClass:"fas fa-arrow-up"}),t._v(" / "),e("i",{staticClass:"fas fa-arrow-down"})]),e("th",{staticClass:"has-text-centered"},[t._v("Round #")]),e("th",{staticClass:"has-text-centered"},[t._v("Entries")]),e("th",{staticClass:"has-text-centered"},[t._v("Grow Rate")]),e("th",[t._v("Instance(s)")])])])}],Ce={name:"ReportStats",props:{chartData:{type:Array,required:!0},isTournamentActive:{type:Boolean,required:!0}},data(){return{roundWithHighestEntries:null,roundWithLowestEntries:null,currentRound:null,last10Rounds:null,avgEntries10Rounds:null,avgGrowRate10Rounds:null,stdDeviation:null}},beforeMount(){const t={};this.chartData.forEach(e=>{e.roundNumber in t?(t[e.roundNumber].tournamentId+=e.tournamentId,t[e.roundNumber].instances.push(e.instanceId),t[e.roundNumber].roundNumber+=e.roundNumber,t[e.roundNumber].numEntrants+=e.numEntrants,t[e.roundNumber].startTimestamp=e.startTimestamp,t[e.roundNumber].endTimestamp=e.endTimestamp):t[e.roundNumber]={tournamentId:e.tournamentId,instances:[e.instanceId],roundNumber:e.roundNumber,numEntrants:e.numEntrants,startTimestamp:e.startTimestamp,endTimestamp:e.endTimestamp}}),console.log(t);const e=Object.keys(t).sort((t,e)=>t-e);console.log(e),this.roundWithHighestEntries=Object.values(t).reduce((t,e)=>t.numEntrants>e.numEntrants?t:e),e.length>1?this.isTournamentActive?this.roundWithLowestEntries=Object.values(t).slice(0,-1).reduce((t,e)=>t.numEntrants<e.numEntrants?t:e):this.roundWithLowestEntries=Object.values(t).reduce((t,e)=>t.numEntrants<e.numEntrants?t:e):this.roundWithLowestEntries=e[0];const s=e[e.length-1];if(this.currentRound=t[s],e.length>10){const s=e.slice(-10);this.last10Rounds=s.map(e=>t[e])}else this.last10Rounds=e.map(e=>t[e]);this.last10Rounds.forEach((t,e)=>{t.growRate=0==e?0:t.numEntrants-this.last10Rounds[e-1].numEntrants}),this.last10Rounds.reverse(),1==this.last10Rounds.length?this.avgEntries10Rounds=this.last10Rounds[0].numEntrants:this.isTournamentActive?this.avgEntries10Rounds=this.last10Rounds.slice(0,-1).reduce((t,e)=>t+e.numEntrants,0)/this.last10Rounds.slice(0,-1).length:this.avgEntries10Rounds=this.last10Rounds.reduce((t,e)=>t+e.numEntrants,0)/this.last10Rounds.length,this.avgEntries10Rounds=this.avgEntries10Rounds.toFixed(2)},mounted(){},methods:{},computed:{}},ge=Ce,_e=Object(u["a"])(ge,ve,be,!1,null,null,null),ye=_e.exports,Ie={components:{ReportChart:fe,ReportStats:ye,SelectTournament:Qt},data(){return{activeTournaments:[],tournaments:[],isLoading:!1,selectedTournament:null,isLoadingChart:!1,showChart:!1,timezone:"local",chartRounds:[],chartEntries:[],chartData:[],selectedTournamentStats:null,isSelectedTournamentActive:!1,highestEntriesTournament:null,showErrorMessage:!1,errorMessage:""}},mounted(){this.getInitialData()},methods:{tournamentSelected(t){this.selectedTournament=t.id,this.getTournamentData()},getInitialData(){this.isLoading=!0,this.startLoading();const t=[this.$http.get("/tournaments/active"),this.$http.get("/tournaments/list")];Promise.all(t).then(t=>{this.activeTournaments=t[0].data,this.tournaments=t[1].data,this.highestEntriesTournament=this.activeTournaments.reduce((t,e)=>t.numEntrants>e.numEntrants?t:e)}).catch(t=>{console.error(t)}).finally(()=>{this.isLoading=!1,this.stopLoading()})},toSelectedTimezone(t){const e=t.split(" ")[0]+"T"+t.split(" ")[1]+"+08:00";let s=new Date(e);return"local"===this.timezone?ct()(s).format("YYYY-MM-DD HH:mm:ss"):"philippines"===this.timezone?ct()(s).tz("Asia/Manila").format("YYYY-MM-DD HH:mm:ss"):void 0},getCountryList(t){if(""==t)return"-";if("ALL"==t)return"All countries";let e=t.split("|"),s=[];return e.forEach(t=>{s.push(Rt.find(e=>e.code===t).name)}),s.join(", ")},getTournamentData(){this.showChart=!1,this.showErrorMessage=!1,this.chartRounds=[],this.chartEntries=[],this.chartData=[],this.isSelectedTournamentActive=this.activeTournaments.some(t=>parseInt(t.tournamentId)===parseInt(this.selectedTournament)),this.startLoading(),this.$http.get("tournaments/stats/"+this.selectedTournament).then(t=>{const e=t.data,s=[],a=[];e.forEach(t=>{const e=s.indexOf(t.roundNumber);-1===e?(s.push(t.roundNumber),a.push(t.numEntrants)):a[e]+=t.numEntrants}),this.chartRounds=s,this.chartEntries=a,this.chartData=e,this.showChart=!0}).catch(t=>{404===t.response.status?(this.showErrorNotification("No instances of this tournament found..."),this.errorMessage="No instances of this tournament found...",this.showErrorMessage=!0):(this.showErrorNotification("Error fetching tournament stats..."),this.errorMessage="Error fetching tournament stats...",this.showErrorMessage=!0),console.error(t)}).finally(()=>{this.stopLoading()})}},computed:{myTimezone:function(){return ct.a.tz.guess()},activeTournamentsIds:function(){return 0==this.activeTournaments.length?[]:this.activeTournaments.map(t=>t.tournamentId)}}},ze=Ie,ke=Object(u["a"])(ze,Gt,qt,!1,null,null,null),De=ke.exports,we=function(){var t=this,e=t._self._c;return e("div",{staticClass:"section"},[e("div",{staticClass:"container"},[t._m(0),e("div",{staticClass:"content"},[e("p",[t._v("This report shows the amount of coins and diamonds spent in each round of a tournament.")]),t._m(1),e("p",{staticClass:"is-italic has-text-grey"},[t._v("Generated at "+t._s(t.statsTimestamp))]),e("h2",{staticClass:"subtitle is-6"},[t._v(" Select a specific tournament to see more information about it. ")])]),e("SelectTournament",{staticClass:"mb-5",on:{select:t.setSelectedTournament,fetchTournaments:t.setTournaments,fetchActiveTournaments:t.setActiveTournaments}}),e("hr"),null!=t.selectedTournamentId&&t.isReportReady?e("section",{key:"report-summary-tournament-"+t.selectedTournamentId},[e("h1",{staticClass:"title is-3"},[t._v(" "+t._s(t.selectedTournamentData.tournamentName)+" ")]),e("h5",{staticClass:"subtitle is-6 is-italic has-text-grey"},[t._v(" Tournament ID - "+t._s(t.selectedTournamentId)+" ")]),e("div",{staticClass:"level box"},[e("div",{staticClass:"level-item has-text-centered"},[e("div",[e("p",{staticClass:"heading"},[t._v("Rounds calculated")]),e("p",{staticClass:"title"},[t._v(t._s(t.selectedTournamentData.instancesCount))]),e("p",{staticClass:"is-size-7 has-text-grey"},[t._v(" ")])])]),e("div",{staticClass:"level-item has-text-centered"},[e("div",[t._m(2),e("p",{staticClass:"title"},[t._v(t._s(t.formatLargeNumberCompact(t.selectedTournamentData.totalCoinsPaid)))]),e("p",{staticClass:"is-size-7 has-text-grey"},[t._v(t._s(t.formatLargeNumber(t.selectedTournamentData.totalCoinsPaid)))])])]),e("div",{staticClass:"level-item has-text-centered"},[e("div",[t._m(3),e("p",{staticClass:"title"},[t._v(t._s(t.formatLargeNumberCompact(t.selectedTournamentData.totalEntriesPaidInCoins)))]),e("p",{staticClass:"is-size-7 has-text-grey"},[t._v(t._s(t.formatLargeNumber(t.selectedTournamentData.totalEntriesPaidInCoins)))])])]),e("div",{staticClass:"level-item has-text-centered"},[e("div",[t._m(4),e("p",{staticClass:"title"},[t._v(t._s(t.formatLargeNumberCompact(t.selectedTournamentData.totalDiamondsPaid)))]),e("p",{staticClass:"is-size-7 has-text-grey"},[t._v(t._s(t.formatLargeNumber(t.selectedTournamentData.totalDiamondsPaid)))])])]),e("div",{staticClass:"level-item has-text-centered"},[e("div",[t._m(5),e("p",{staticClass:"title"},[t._v(t._s(t.formatLargeNumber(t.selectedTournamentData.totalEntriesPaidInDiamonds)))]),e("p",{staticClass:"is-size-7 has-text-grey"},[t._v(t._s(t.selectedTournamentData.totalEntriesPaidInDiamonds))])])])]),e("CurrencySpentChart",{key:"currency-spent-tournament-"+t.selectedTournamentId,attrs:{title:"Total of Coins & Diamonds per round",chartData:t.selectedTournamentData.currencySpentChartData,chartMeta:t.selectedTournamentData.chartMeta}}),e("br"),e("CurrencyAccumulatedChart",{key:"currency-acc-tournament-"+t.selectedTournamentId,attrs:{title:"Currency Spent Accumulated vs. Paid Entries",chartData:t.selectedTournamentData.currencyAcumulatedChartData,chartMeta:t.selectedTournamentData.chartMeta}}),e("InstancesTable",{key:"instances-table-tournament-"+t.selectedTournamentId,attrs:{instancesTableData:t.selectedTournamentData.instancesTableData,tournamentName:t.selectedTournamentData.tournamentName,tournamentId:t.selectedTournamentId}})],1):t._e()],1)])},Se=[function(){var t=this,e=t._self._c;return e("h1",{staticClass:"title is-3"},[e("i",{staticClass:"fas fa-line-chart"}),t._v(" Currency spent per tournament report")])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"message is-primary"},[e("div",{staticClass:"message-body"},[t._v(" Do have in mind that some tournaments have rounds with multiple instances, while the charts are the best way to visualize the data, the table below will show you the details of each instance. ")])])},function(){var t=this,e=t._self._c;return e("p",{staticClass:"heading"},[e("i",{staticClass:"fas fa-coins fa-lg"}),t._v(" Coins in total")])},function(){var t=this,e=t._self._c;return e("p",{staticClass:"heading"},[e("i",{staticClass:"fas fa-coins fa-lg"}),t._v(" Coin Entries paid")])},function(){var t=this,e=t._self._c;return e("p",{staticClass:"heading"},[e("i",{staticClass:"fas fa-gem fa-lg"}),t._v(" Diamond in total")])},function(){var t=this,e=t._self._c;return e("p",{staticClass:"heading"},[e("i",{staticClass:"fas fa-gem fa-lg"}),t._v(" Diamond entries paid")])}],Te=function(){var t=this,e=t._self._c;return e("v-chart",{staticClass:"chart-rounded",attrs:{option:t.chartOptions}})},Le=[];Object(se["a"])([ae["a"],ie["a"],ne["a"],re["a"],oe["a"],le["a"],ce["a"],ue["a"]]);var xe={props:{title:{type:String,required:!0},chartData:{type:Object,required:!0},chartMeta:{type:Object,required:!0}},components:{VChart:de["b"]},provide:{[de["a"]]:"dark"},computed:{chartOptions(){return{backgroundColor:"#2c343c",title:{text:this.title||"Chart",textStyle:{color:"#fff"},top:15,left:"4%"},toolbox:{show:!0,feature:{saveAsImage:{show:!0,title:"Guardar"}}},legend:{data:["Coins","Diamonds"],right:"7%",top:15},tooltip:{trigger:"axis",axisPointer:{type:"cross",snap:!0,label:{backgroundColor:"#42a883"}},formatter:t=>{const e=this.chartMeta[t[0].axisValue];let s='<div class="has-text-black">';return s+=`<p class="is-size-6 mb-1 has-text-weight-bold">Round # ${t[0].axisValue}</p>`,s+='<p class="is-size-7">Instances:</p>',s+=`<p class="is-family-monospace instances-list mb-2">${e.instancesId.join("<br>")}</p>`,e.merged&&(s+='<p class="is-size-7"><i class="fas fa-exclamation-triangle has-text-danger fa-fw"></i>&nbsp;Multiples instances in the same week</p>'),e.differentEntryCosts&&(s+='<p class="is-size-7"><i class="fas fa-exclamation-triangle has-text-danger fa-fw"></i>&nbsp;Mixed entry costs</p>'),e.mixedCurrencies&&(s+='<p class="is-size-7"><i class="fas fa-exclamation-triangle has-text-danger fa-fw"></i>&nbsp;Mixed currencies</p>'),s+=`<p class="is-size-6 mt-2"><i class="fas fa-calendar-alt fa-fw"></i>&nbsp;<span class="is-size-6">${e.startDatetime}</span></p>`,s+=`<p class="is-size-6"><i class="fas fa-calendar-alt fa-fw"></i>&nbsp;<span class="is-size-6">${e.endDatetime}</span></p>`,s+=`<p class="is-size-6 mt-3"><i class="fas fa-right-to-bracket fa-fw"></i>&nbsp;${e.entriesPaid} entries paid</p>`,e.differentEntryCosts?s+='<p class="is-size-6"><i class="fas fa-ticket fa-fw"></i>&nbsp;Entry cost changed...</p>':s+=`<p class="is-size-6"><i class="fas fa-ticket fa-fw"></i>&nbsp;${e.entryCost} entry cost</p>`,s+=`<p class="is-size-6"><i class="fas fa-coins fa-fw"></i>&nbsp;${e.coins} coins spent</p>`,s+=`<p class="is-size-6"><i class="fas fa-gem fa-fw"></i>&nbsp;${e.diamonds} diamonds spent</p>`,s+="</div>",s}},grid:{left:"4%",right:"7%",bottom:"80",top:"15%",containLabel:!0},xAxis:[{name:"Round #",type:"category",data:this.chartData.serieX.rounds,nameLocation:"center",nameGap:30,nameTextStyle:{fontWeight:800},splitLine:{show:!0}},{name:"Date Round",type:"category",data:this.chartData.serieX.dates,nameLocation:"center",nameGap:43,nameTextStyle:{fontWeight:800},offset:20,splitLine:{show:!0},axisLabel:{formatter:t=>t.length>10?`${t.slice(0,10)}\n${t.slice(11)}`:t}}],yAxis:[{name:"Diamond Spent",type:"value",splitArea:{show:!0},nameLocation:"center",nameGap:-20,axisLabel:{nameGap:10}},{name:"Coins Spent",type:"value",splitArea:{show:!0},nameLocation:"center",nameGap:-20,axisLabel:{nameGap:10}}],dataZoom:[{type:"inside"},{type:"slider",xAxisIndex:1,bottom:20,labelFormatter:(t,e)=>e.length>10?`${e.slice(0,10)}\n${e.slice(11)}`:e}],series:[{name:"Diamonds",data:this.chartData.serieY.diamonds,type:"line",yAxisIndex:0,symbolSize:6,symbol:"circle",color:"#fff",lineStyle:{color:"#00A0FF"}},{name:"Coins",data:this.chartData.serieY.coins,type:"line",yAxisIndex:1,symbolSize:6,symbol:"circle",color:"#fff",lineStyle:{color:"#ffcc00"}}]}}}},Re=xe,Ne=Object(u["a"])(Re,Te,Le,!1,null,null,null),Pe=Ne.exports,Ae=function(){var t=this,e=t._self._c;return e("v-chart",{staticClass:"chart-rounded",attrs:{option:t.chartOptions}})},Me=[];Object(se["a"])([ae["a"],ie["a"],ne["a"],re["a"],oe["a"],le["a"],ce["a"],ue["a"]]);var Ee={props:{title:{type:String,required:!0},chartData:{type:Object,required:!0},chartMeta:{type:Object,required:!0}},components:{VChart:de["b"]},provide:{[de["a"]]:"dark"},computed:{chartOptions(){return{backgroundColor:"#2c343c",title:{text:this.title||"Chart",textStyle:{color:"#fff"},top:15,left:"4%"},toolbox:{show:!0,feature:{saveAsImage:{show:!0,title:"Guardar"}}},legend:{data:["Coins","Diamonds","Paid Entries"],right:"7%",top:15},tooltip:{trigger:"axis",axisPointer:{type:"cross",snap:!0,label:{backgroundColor:"#42a883"}},formatter:t=>{const e=this.chartMeta[t[0].axisValue];let s='<div class="has-text-black">';return s+=`<p class="is-size-6 mb-1 has-text-weight-bold">Round # ${t[0].axisValue}</p>`,s+='<p class="is-size-7">Instances:</p>',s+=`<p class="is-family-monospace instances-list mb-2">${e.instancesId.join("<br>")}</p>`,e.merged&&(s+='<p class="is-size-7"><i class="fas fa-exclamation-triangle has-text-danger fa-fw"></i>&nbsp;Multiples instances in the same week</p>'),e.differentEntryCosts&&(s+='<p class="is-size-7"><i class="fas fa-exclamation-triangle has-text-danger fa-fw"></i>&nbsp;Mixed entry costs</p>'),e.mixedCurrencies&&(s+='<p class="is-size-7"><i class="fas fa-exclamation-triangle has-text-danger fa-fw"></i>&nbsp;Mixed currencies</p>'),s+=`<p class="is-size-6 mt-2"><i class="fas fa-calendar-alt fa-fw"></i>&nbsp;<span class="is-size-6">${e.startDatetime}</span></p>`,s+=`<p class="is-size-6"><i class="fas fa-calendar-alt fa-fw"></i>&nbsp;<span class="is-size-6">${e.endDatetime}</span></p>`,s+=`<p class="is-size-6 mt-3"><i class="fas fa-right-to-bracket fa-fw"></i>&nbsp;${e.entriesPaid} entries paid</p>`,e.differentEntryCosts?s+='<p class="is-size-6"><i class="fas fa-ticket fa-fw"></i>&nbsp;Entry cost changed...</p>':s+=`<p class="is-size-6"><i class="fas fa-ticket fa-fw"></i>&nbsp;${e.entryCost} entry cost</p>`,s+=`<p class="is-size-6"><i class="fas fa-coins fa-fw"></i>&nbsp;${e.coins} coins spent</p>`,s+=`<p class="is-size-6"><i class="fas fa-gem fa-fw"></i>&nbsp;${e.diamonds} diamonds spent</p>`,s+="</div>",s}},grid:{left:"4%",right:"7%",bottom:"80",top:"15%",containLabel:!0},xAxis:[{name:"Round #",type:"category",data:this.chartData.serieX.rounds,nameLocation:"center",nameGap:30,nameTextStyle:{fontWeight:800},splitLine:{show:!0}},{name:"Date Round",type:"category",data:this.chartData.serieX.dates,nameLocation:"center",nameGap:43,nameTextStyle:{fontWeight:800},offset:20,splitLine:{show:!0},axisLabel:{formatter:t=>t.length>10?`${t.slice(0,10)}\n${t.slice(11)}`:t}}],yAxis:[{name:"Currency Spent",type:"value",splitArea:{show:!0},nameLocation:"center",nameGap:-20,axisLabel:{nameGap:10}},{name:"Paid Entries",type:"value",splitArea:{show:!0},nameLocation:"center",nameGap:-20,axisLabel:{nameGap:10}}],dataZoom:[{type:"inside"},{type:"slider",xAxisIndex:1,bottom:20,labelFormatter:(t,e)=>(console.log(t,e),e.length>10?`${e.slice(0,10)}\n${e.slice(11)}`:e)}],series:[{name:"Diamonds",data:this.chartData.serieY.diamonds,type:"line",yAxisindex:0,symbolSize:6,symbol:"circle",color:"#fff",lineStyle:{color:"#00A0FF"}},{name:"Coins",data:this.chartData.serieY.coins,type:"line",symbolSize:6,symbol:"circle",color:"#fff",yAxisindex:0,lineStyle:{color:"#ffcc00"}},{name:"Paid Entries",data:this.chartData.serieY.entriesPaid,type:"line",symbolSize:6,symbol:"circle",color:"#fff",yAxisIndex:1,lineStyle:{color:"#42a883"}}]}}}},Oe=Ee,Be=Object(u["a"])(Oe,Ae,Me,!1,null,null,null),je=Be.exports,Ue=function(){var t=this,e=t._self._c;return e("div",[e("h1",{staticClass:"title is-3 mt-5"},[t._v(" Tournament Instances ")]),e("h5",{staticClass:"subtitle is-6 is-italic has-text-grey"},[t._v(" Do note that there might be multiple instances per round for adverse reasons. ")]),e("b-table",{staticClass:"vertical-aligned",attrs:{data:t.tableData,hoverable:"",bordered:"",narrowed:"",striped:""}},[e("b-table-column",{attrs:{field:"round",centered:"",label:"Round"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.round)+" ")]}}])}),e("b-table-column",{attrs:{field:"key",label:"Instance ID"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("p",{staticClass:"is-size-7 is-family-monospace"},[t._v(t._s(s.row.key)+" "),e("router-link",{attrs:{to:{name:"reports-tournaments-instances-overview",params:{idTournament:t.tournamentId,idInstance:s.row.key}}}},[e("i",{staticClass:"fas fa-arrow-right fa-lg fa-fw"})])],1)]}}])}),e("b-table-column",{attrs:{field:"entryCost",label:"Entry Cost",centered:""},scopedSlots:t._u([{key:"default",fn:function(s){return[e("p",[t._v(t._s(s.row.entryCost))]),e("p",{staticClass:"is-size-7"},[t._v(t._s(s.row.entryCurrencyLabel))])]}}])}),e("b-table-column",{attrs:{field:"entriesPaid",label:"Entries Paid",centered:""},scopedSlots:t._u([{key:"default",fn:function(s){return[e("p",[t._v(t._s(t.formatLargeNumber(s.row.entriesPaid||0)))])]}}])}),e("b-table-column",{attrs:{label:"Grow Rate",centered:""},scopedSlots:t._u([{key:"default",fn:function(s){return[e("p",{class:s.row.growEntriesPaid>0?"has-text-success":s.row.growEntriesPaid<0?"has-text-danger":""},[t._v(" "+t._s(t.formatLargeNumber(s.row.growEntriesPaid))+"  "),s.row.growEntriesPaid>0?e("i",{staticClass:"fas fa-arrow-up fa-lg has-text-success"}):s.row.growEntriesPaid<0?e("i",{staticClass:"fas fa-arrow-down fa-lg has-text-danger"}):e("i",{staticClass:"fas fa-minus"})])]}}])}),e("b-table-column",{attrs:{label:"Round Date",centered:""},scopedSlots:t._u([{key:"default",fn:function(s){return[e("p",{staticClass:"is-size-7"},[t._v(t._s(s.row.startDatetime))]),e("p",{staticClass:"is-size-7"},[t._v(t._s(s.row.endDatetime))])]}}])}),e("b-table-column",{attrs:{field:"coins",label:"Coins",centered:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.formatLargeNumber(e.row.coins))+" ")]}}])}),e("b-table-column",{attrs:{field:"diamonds",label:"Diamonds",centered:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.formatLargeNumber(e.row.diamonds))+" ")]}}])}),e("b-table-column",{attrs:{label:"Accumulated"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("p",[t._v("💰 "+t._s(t.formatLargeNumber(s.row.accumulatedCoins)))]),e("p",[t._v("💎 "+t._s(t.formatLargeNumber(s.row.accumulatedDiamonds)))])]}}])})],1)],1)},$e=[],Ve={name:"InstancesTable",props:{instancesTableData:{type:Array,required:!0},tournamentName:{type:String,required:!0},tournamentId:{type:[String,Number],required:!0}},data(){return{tableData:this.instancesTableData}},methods:{formatLargeNumberCompact(t){return new Intl.NumberFormat("en",{style:"decimal",notation:"compact",compactDisplay:"short",maximumSignificantDigits:3}).format(t)},formatLargeNumber(t){return new Intl.NumberFormat("en",{style:"decimal"}).format(t)}}},We=Ve,Fe=(s("221a"),Object(u["a"])(We,Ue,$e,!1,null,null,null)),Ye=Fe.exports,Ge={name:"ReportCurrencySpent",components:{CurrencySpentChart:Pe,CurrencyAccumulatedChart:je,InstancesTable:Ye,SelectTournament:Qt},data(){return{isLoading:!1,isReportReady:!1,tournaments:[],activeTournaments:[],currencyStats:{},statsTimestamp:null,availableTournamentReports:[],selectedTournament:null,selectedTournamentId:null,selectedTournamentData:{tournamentId:null,tournamentName:null,tournamentData:{},instancesId:[],instancesData:{},totalEntriesPaidInCoins:0,totalEntriesPaidInDiamonds:0,totalCoinsPaid:0,totalDiamondsPaid:0,instancesCount:0,instancesTableData:[],currencySpentChartData:{serieX:{rounds:[],dates:[]},serieY:{coins:[],diamonds:[]}},currencyAcumulatedChartData:{serieX:{rounds:[],dates:[]},serieY:{coins:[],diamonds:[],entriesPaid:[]}},chartMeta:{}}}},mounted(){this.getInitialData()},methods:{getInitialData(){this.isLoading=!0,this.startLoading(),this.$http.get("/tournaments/currencyStats").then(t=>{this.currencyStats=t.data,this.statsTimestamp=ct()(this.currencyStats.timestamp).format("YYYY-MM-DD HH:mm:ss")}).catch(t=>{console.error(t)}).finally(()=>{this.isLoading=!1,this.stopLoading()})},setTournaments(t){this.tournaments=t},setActiveTournaments(t){this.activeTournaments=t},getInstancesWithSameRoundNumber(t){return this.selectedTournamentData.instancesId.filter(e=>e.split("_")[1]===t)},getTournamentNameByTournamentId(t){const e=this.tournaments.find(e=>e.id==t);return e?this.getString(e.name):"❓ (STRING NOT FOUND)"},getEntryCurrencyLabel(t){switch(t){case 1:return"Coins";case 2:return"Diamonds";default:return"Unknown"}},getEntryCurrencyIcon(t){switch(t){case 1:return"💰";case 2:return"💎";default:return"❓"}},formatLargeNumberCompact(t){return new Intl.NumberFormat("en",{style:"decimal",notation:"compact",compactDisplay:"short",maximumSignificantDigits:3}).format(t)},formatLargeNumber(t){return new Intl.NumberFormat("en",{style:"decimal"}).format(t)},resetSelectedTournamentData(){this.selectedTournamentData={tournamentId:null,tournamentName:null,tournamentData:{},instancesId:[],instancesData:{},totalEntriesPaidInCoins:0,totalEntriesPaidInDiamonds:0,totalCoinsPaid:0,totalDiamondsPaid:0,instancesCount:0,instancesTableData:[],currencySpentChartData:{serieX:{rounds:[],dates:[]},serieY:{coins:[],diamonds:[]}},currencyAcumulatedChartData:{serieX:{rounds:[],dates:[]},serieY:{coins:[],diamonds:[],entriesPaid:[]}},chartMeta:{}}},setSelectedTournament(t){this.isReportReady=!1,this.resetSelectedTournamentData(),this.selectedTournament=t,this.selectedTournamentId=t.id,this.calculateTournamentData()},calculateTournamentData(){this.isReportReady=!1,this.selectedTournamentData.tournamentId=this.selectedTournamentId,this.selectedTournamentData.tournamentName=this.getTournamentNameByTournamentId(this.selectedTournamentId),this.selectedTournamentData.tournamentData=this.tournaments.filter(t=>t.id==this.selectedTournamentId)[0],this.selectedTournamentData.instancesId=Object.keys(this.currencyStats.data[this.selectedTournamentId]).sort((t,e)=>t-e),this.selectedTournamentData.instancesData=this.currencyStats.data[this.selectedTournamentId],this.selectedTournamentData.chartMeta={};const t=this.selectedTournamentData.instancesId.map(t=>t.split("_")[1]);let e=0,s=0,a=0,i=0,n=0,r=0;this.selectedTournamentData.instancesTableData=this.selectedTournamentData.instancesId.map(t=>{const o=this.selectedTournamentData.instancesData[t],l=t.split("_")[1],c={key:t,round:l,entryCurrency:o.entryCurrency,entryCurrencyLabel:`${this.getEntryCurrencyIcon(o.entryCurrency)} ${this.getEntryCurrencyLabel(o.entryCurrency)}`,entryCost:parseInt(o.entryCost||0),entriesPaid:parseInt(o.entriesPaid||0),growEntriesPaid:0,startDatetime:ct.a.unix(o.startTimestamp).format("YYYY-MM-DD HH:mm:ss"),endDatetime:ct.a.unix(o.endTimestamp).format("YYYY-MM-DD HH:mm:ss"),coins:0,diamonds:0,accumulatedCoins:0,accumulatedDiamonds:0};return c.growEntriesPaid=c.entriesPaid-r,r=c.entriesPaid,a+=c.entriesPaid,1===o.entryCurrency?(c.coins=parseInt(o.entryCost||0)*parseInt(o.entriesPaid||0),c.accumulatedCoins=e,e+=c.coins,i+=c.entriesPaid):2===o.entryCurrency&&(c.diamonds=parseInt(o.entryCost||0)*parseInt(o.entriesPaid||0),c.accumulatedDiamonds=s,s+=c.diamonds,n+=c.entriesPaid),c}),this.selectedTournamentData.totalEntriesPaidInCoins=i,this.selectedTournamentData.totalEntriesPaidInDiamonds=n,this.selectedTournamentData.totalCoinsPaid=e,this.selectedTournamentData.totalDiamondsPaid=s,this.selectedTournamentData.instancesCount=t.length,e=0,s=0,t.forEach(t=>{const i=this.getInstancesWithSameRoundNumber(t);let n={tournamentId:parseInt(this.selectedTournamentId),instancesId:i,round:t,coins:0,diamonds:0,entryCost:0,entryCurrency:this.selectedTournamentData.instancesData[i[0]].entryCurrency,entriesPaid:0,accumulatedCoins:0,accumulatedDiamonds:0,accumulatedEntriesPaid:a,startDatetime:ct.a.unix(this.selectedTournamentData.instancesData[i[0]].startTimestamp).format("YYYY-MM-DD HH:mm:ss"),endDatetime:ct.a.unix(this.selectedTournamentData.instancesData[i[0]].endTimestamp).format("YYYY-MM-DD HH:mm:ss"),merged:i.length>1,mixedCurrencies:!1,differentEntryCosts:!1};i.forEach(t=>{n.entryCost=parseInt(this.selectedTournamentData.instancesData[t].entryCost||0),n.entriesPaid+=parseInt(this.selectedTournamentData.instancesData[t].entriesPaid||0),a+=parseInt(this.selectedTournamentData.instancesData[t].entriesPaid||0),n.accumulatedEntriesPaid=a,1==this.selectedTournamentData.instancesData[t].entryCurrency&&(n.coins+=parseInt(this.selectedTournamentData.instancesData[t].entryCost||0)*parseInt(this.selectedTournamentData.instancesData[t].entriesPaid||0),e+=parseInt(this.selectedTournamentData.instancesData[t].entryCost||0)*parseInt(this.selectedTournamentData.instancesData[t].entriesPaid||0),n.accumulatedCoins=e),2==this.selectedTournamentData.instancesData[t].entryCurrency&&(n.diamonds+=parseInt(this.selectedTournamentData.instancesData[t].entryCost||0)*parseInt(this.selectedTournamentData.instancesData[t].entriesPaid||0),s+=parseInt(this.selectedTournamentData.instancesData[t].entryCost||0)*parseInt(this.selectedTournamentData.instancesData[t].entriesPaid||0),n.accumulatedDiamonds=s),n.endDatetime=ct.a.unix(this.selectedTournamentData.instancesData[t].endTimestamp).format("YYYY-MM-DD HH:mm:ss"),this.selectedTournamentData.instancesData[t].entryCurrency!=n.entryCurrency&&(n.mixedCurrencies=!0),this.selectedTournamentData.instancesData[t].entryCost!=n.entryCost&&(n.differentEntryCosts=!0)}),this.selectedTournamentData.chartMeta[t]=n}),this.selectedTournamentData.currencySpentChartData.serieX.rounds=[],this.selectedTournamentData.currencySpentChartData.serieX.dates=[],this.selectedTournamentData.currencySpentChartData.serieY.coins=[],this.selectedTournamentData.currencySpentChartData.serieY.diamonds=[];for(const o in this.selectedTournamentData.chartMeta)this.selectedTournamentData.currencySpentChartData.serieX.rounds.push(o),this.selectedTournamentData.currencySpentChartData.serieX.dates.push(this.selectedTournamentData.chartMeta[o].endDatetime),this.selectedTournamentData.currencySpentChartData.serieY.coins.push(this.selectedTournamentData.chartMeta[o].coins),this.selectedTournamentData.currencySpentChartData.serieY.diamonds.push(this.selectedTournamentData.chartMeta[o].diamonds);this.selectedTournamentData.currencyAcumulatedChartData.serieX.rounds=[],this.selectedTournamentData.currencyAcumulatedChartData.serieX.dates=[],this.selectedTournamentData.currencyAcumulatedChartData.serieY.coins=[],this.selectedTournamentData.currencyAcumulatedChartData.serieY.diamonds=[],this.selectedTournamentData.currencyAcumulatedChartData.serieY.entriesPaid=[];for(const o in this.selectedTournamentData.chartMeta)this.selectedTournamentData.currencyAcumulatedChartData.serieX.rounds.push(o),this.selectedTournamentData.currencyAcumulatedChartData.serieX.dates.push(this.selectedTournamentData.chartMeta[o].endDatetime),this.selectedTournamentData.currencyAcumulatedChartData.serieY.coins.push(this.selectedTournamentData.chartMeta[o].accumulatedCoins),this.selectedTournamentData.currencyAcumulatedChartData.serieY.diamonds.push(this.selectedTournamentData.chartMeta[o].accumulatedDiamonds),this.selectedTournamentData.currencyAcumulatedChartData.serieY.entriesPaid.push(this.selectedTournamentData.chartMeta[o].entriesPaid);this.isReportReady=!0}}},qe=Ge,He=Object(u["a"])(qe,we,Se,!1,null,null,null),Ke=He.exports,Xe=function(){var t=this,e=t._self._c;return e("div",{staticClass:"section"},[e("div",{staticClass:"container"},[t._m(0),e("h2",{staticClass:"subtitle is-6 is-italic has-text-grey"},[t._v("Select a tournament to list the instances")]),e("SelectTournament",{staticClass:"mb-5",on:{select:t.tournamentSelected}}),t.selectedTournament?e("div",[e("hr"),e("h1",{staticClass:"title is-4"},[t._v("Tournament definition")]),e("h2",{staticClass:"subtitle is-6 is-italic has-text-grey"},[t._v("General information about the tournament definition")]),e("div",{staticClass:"columns"},[e("div",{staticClass:"column"},[e("table",{staticClass:"table is-fullwidth is-bordered is-narrow"},[e("tbody",[e("tr",[e("th",[t._v("Tournament Name")]),e("td",[t._v(t._s(t.selectedTournament.readableName))])]),e("tr",[e("th",[t._v("Tournament Name Code")]),e("td",{staticClass:"is-family-monospace"},[t._v(t._s(t.selectedTournament.name))])]),e("tr",[e("th",[t._v("Is active?")]),e("td",[t._v(t._s(t.selectedTournament.active?"Yes 🟢":"No 🔴"))])]),e("tr",[e("th",[t._v("Start time")]),e("td",[t._v(t._s(t.selectedTournament.startTimestamp)+" (Asia/Manila)")])]),e("tr",[e("th",[t._v("End time")]),e("td",[t._v(t._s(t.selectedTournament.endTimestamp)+" (Asia/Manila)")])])])])]),e("div",{staticClass:"column"},[e("table",{staticClass:"table is-fullwidth is-bordered is-narrow"},[e("tbody",[e("tr",[e("th",[t._v("Time Offset (Hours)")]),e("td",{staticClass:"has-text-centered"},[t._v(t._s(t.selectedTournament.timeOffsetHours||"- - -"))])]),t._m(1),e("tr",[e("th",[t._v("Restart Frequency")]),e("td",{staticClass:"has-text-centered"},[t._v(t._s(t.selectedTournament.restartFrequency))])]),t._m(2),e("tr",[e("th",[t._v("Duration")]),e("td",{staticClass:"has-text-centered"},[t._v(t._s(t.selectedTournament.duration))])]),t._m(3),e("tr",[e("th",[t._v("Last Entry (In minutes)")]),e("td",{staticClass:"has-text-centered"},[t._v(t._s(t.selectedTournament.lastEntryInMinutes))])]),t._m(4)])])])]),e("hr"),e("div",{staticClass:"content"}),e("InstancesTable",{key:`tournament-${t.selectedTournament.id}-instances`,staticClass:"my-5",attrs:{tournament:t.selectedTournament}})],1):t._e()],1)])},Je=[function(){var t=this,e=t._self._c;return e("h1",{staticClass:"title is-3"},[e("i",{staticClass:"fas fa-table fa-fw"}),t._v(" Tournament Instances")])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{staticClass:"is-size-7 has-text-grey",attrs:{colspan:"2"}},[t._v("Can be between -24 and 24. If empty, by default is 0 (no offset).")])])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{staticClass:"is-size-7 has-text-grey",attrs:{colspan:"2"}},[t._v("In hours, when a new version of the tournament will start")])])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{staticClass:"is-size-7 has-text-grey",attrs:{colspan:"2"}},[t._v("In hours, how long this tournament will run once started. Must be a value equal or greater than 1")])])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{staticClass:"is-size-7 has-text-grey",attrs:{colspan:"2"}},[t._v("If empty, by default is 15")])])}],Ze=function(){var t=this,e=t._self._c;return e("div",[e("h1",{staticClass:"title is-4 mt-5"},[t._v("Tournament instances")]),e("h5",{staticClass:"subtitle is-6 is-italic has-text-grey"},[t._v(" For tournament "),e("span",{staticClass:"has-text-primary"},[t._v(t._s(t.tournament.readableName))])]),e("div",{staticClass:"content"},[t._m(0),e("p",[t._v("Total count of instances: "),t.isLoading?e("span",{staticClass:"is-italic"},[t._v("Loading...")]):e("span",[e("b",[t._v(t._s(t.instances.length))]),t._v(" instances")])])]),e("b-table",{staticClass:"vertical-aligned",attrs:{data:t.instances,loading:t.isLoading,hoverable:"",bordered:"",narrowed:"",striped:"","page-length":"10",paginated:""},scopedSlots:t._u([{key:"empty",fn:function(){return[t.isLoading?e("div",{staticClass:"has-text-centered"},[t._v("Loading...")]):e("div",{staticClass:"has-text-centered"},[t._v("No records found...")])]},proxy:!0}])},[e("b-table-column",{attrs:{field:"roundNumber",centered:"",label:"Round"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.roundNumber)+" ")]}}])}),e("b-table-column",{attrs:{field:"instanceId",label:"Instance ID"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("p",{staticClass:"is-size-7 is-family-monospace"},[t._v(t._s(s.row.instanceId))])]}}])}),e("b-table-column",{attrs:{field:"hasAwardedWinners",centered:"",label:"Winners"},scopedSlots:t._u([{key:"default",fn:function(t){return[t.row.hasAwardedWinners?e("div",[e("b-tooltip",{attrs:{label:"Winners have been awarded"}},[e("i",{staticClass:"fas fa-trophy has-text-success fa-lg"})])],1):e("div",[e("b-tooltip",{attrs:{label:"Winners have not been awarded yet"}},[e("i",{staticClass:"far fa-clock has-text-danger fa-lg"})])],1)]}}])}),e("b-table-column",{attrs:{field:"numEntrants",centered:"",label:"Entries"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.numEntrants)+" ")]}}])}),e("b-table-column",{attrs:{label:"Top User"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("div",{staticClass:"is-flex is-flex-direction-row is-align-items-center"},[e("figure",{staticClass:"image is-32x32 mr-3"},[s.row.user&&s.row.user.profile_picture?e("img",{staticClass:"is-rounded",attrs:{src:s.row.user.profile_picture,alt:"avatar",width:"32",height:"32"}}):e("div",{staticClass:"is-rounded",staticStyle:{width:"32px",height:"32px","background-color":"#CACACA","border-radius":"32px"}})]),s.row.user?e("div",[e("p",{staticClass:"has-text-weight-bold"},[t._v(t._s(s.row.user.name)+" "),e("a",{on:{click:function(e){return t.openUserModal(s.row.user.id)}}},[e("i",{staticClass:"fas fa-magnifying-glass is-size-7 fa-fw"})])]),e("p",{staticClass:"is-size-7 is-family-monospace"},[t._v("ID: "+t._s(s.row.user.id))])]):e("div",[e("p",{staticClass:"is-italic"},[t._v("No top user or no data")]),e("p",{staticClass:"is-size-7 is-family-monospace"},[t._v("ID: --------")])])])]}}])}),e("b-table-column",{attrs:{field:"topUserScore",centered:"",label:"Top User Score"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.formatNumber(e.row.topUserScore))+" ")]}}])}),e("b-table-column",{attrs:{label:"Round Dates",centered:""},scopedSlots:t._u([{key:"default",fn:function(s){return[e("p",{staticClass:"is-size-7"},[t._v(t._s(s.row.startTimestamp)+" "),e("span",{staticClass:"has-text-grey"},[t._v("(UTC+08)")])]),e("p",{staticClass:"is-size-7"},[t._v(t._s(s.row.endTimestamp)+" "),e("span",{staticClass:"has-text-grey"},[t._v("(UTC+08)")])])]}}])}),e("b-table-column",{attrs:{label:"Actions",centered:""},scopedSlots:t._u([{key:"default",fn:function(s){return[e("router-link",{staticClass:"is-size-7",attrs:{to:{name:"reports-tournaments-instances-overview",params:{idTournament:t.tournament.id,idInstance:s.row.instanceId}}}},[t._v("Overview "),e("i",{staticClass:"fas fa-arrow-right"})])]}}])})],1)],1)},Qe=[function(){var t=this,e=t._self._c;return e("p",{staticClass:"has-text-grey"},[e("u",[t._v("Note")]),t._v(": Some tournaments have rounds with multiple instances, for errors during their initializations or other issues."),e("br"),t._v("Other tournament instances could "),e("u",[t._v("also")]),t._v(" be in progress (no winners yet..)")])}],ts=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card"},[e("div",{staticClass:"card-content"},[t.isLoading?e("div",{staticClass:"has-text-centered"},[t._m(0),e("p",[t._v("Loading user data...")])]):e("div",[t.user?e("div",{staticClass:"media"},[e("div",{staticClass:"media-left"},[e("figure",{staticClass:"image is-128x128"},[t.user&&t.user.profile_picture?e("img",{staticClass:"is-rounded",staticStyle:{"border-radius":"8px"},attrs:{src:t.user.profile_picture,alt:"User avatar"}}):e("div",{staticClass:"is-rounded",staticStyle:{width:"128px",height:"128px","background-color":"#CACACA","border-radius":"8px"}})])]),e("div",{staticClass:"media-content"},[e("p",{staticClass:"title is-3"},[t._v(t._s(t.user.name))]),e("p",{staticClass:"subtitle is-6 is-family-monospace has-text-grey"},[t._v("ID: "+t._s(t.user.id))]),e("table",{staticClass:"table is-fullwidth is-bordered is-narrow"},[e("tbody",[e("tr",[e("th",[t._v("Last Login")]),e("td",[t._v(t._s(t.user.last_login)+" (Asia/Manila)")])]),e("tr",[e("th",[t._v("Blacklisted")]),e("td",[t._v(t._s(t.user.blacklisted?"Yes":"No"))])]),e("tr",[e("th",[t._v("Cheater")]),e("td",[t._v(t._s(t.user.cheater?"Yes":"No"))])]),e("tr",[e("th",[t._v("Cheater Created At")]),e("td",[t.user.cheater_created_at?e("span",[t._v(t._s(t.user.cheater_created_at))]):e("span",[t._v("N/A")])])]),e("tr",[e("th",[t._v("Login Type")]),e("td",[t._v(t._s(t.user.login))])])])])])]):t._e()]),t.errorMessage?e("div",[e("div",{staticClass:"notification is-danger"},[e("p",[e("i",{staticClass:"fas fa-exclamation-triangle fa-lg"}),t._v(" "+t._s(t.errorMessage))])])]):t._e()])])},es=[function(){var t=this,e=t._self._c;return e("p",[e("i",{staticClass:"fas fa-sync fa-spin fa-lg"})])}],ss={name:"ModalUserData",props:{userId:{type:[String,Number],required:!0}},data(){return{user:null,isLoading:!0,errorMessage:""}},mounted(){this.fetchData()},methods:{fetchData(){console.log("fetching data"),this.isLoading=!0,this.$http.get("/player/"+this.userId).then(t=>{this.user=t.data,this.isLoading=!1}).catch(t=>{const e="There was an error loading the user data. Please try again later.";this.errorMessage=e,this.showErrorNotification(e),this.isLoading=!1,console.error(t)})}}},as=ss,is=Object(u["a"])(as,ts,es,!1,null,null,null),ns=is.exports,rs={name:"InstancesTable",props:{tournament:{type:Object,required:!0}},data(){return{isLoading:!0,instances:[],selectedInstance:null}},created(){this.getInitialData()},methods:{getInitialData(){this.isLoading=!0,this.$http.get(`/tournaments/${this.tournament.id}/instances`).then(t=>{const e=t.data;e.forEach(t=>{t.readableName=this.getString(t.name)}),this.instances=e}).catch(t=>{console.error(t)}).finally(()=>{this.isLoading=!1})},instanceSelected(t){this.selectedInstance=t},openUserModal(t){this.$buefy.modal.open({parent:this,component:ns,trapFocus:!0,props:{userId:t}})}}},os=rs,ls=Object(u["a"])(os,Ze,Qe,!1,null,null,null),cs=ls.exports,us={name:"ReportStandings",data(){return{isLoading:!0,isReady:!1,selectedTournament:null}},components:{SelectTournament:Qt,InstancesTable:cs},created(){},methods:{tournamentSelected(t){this.selectedTournament=t}}},ds=us,ms=Object(u["a"])(ds,Xe,Je,!1,null,null,null),ps=ms.exports,hs=function(){var t=this,e=t._self._c;return e("div",{staticClass:"section"},[e("div",{staticClass:"container"},[t._m(0),e("h2",{staticClass:"subtitle is-6 is-italic has-text-grey"},[t._v("Tournament ID: "+t._s(t.idTournament)+" / Tournament Instance: "+t._s(t.idInstance))]),t.isLoading?e("div",{staticClass:"notification"},[t._m(1)]):t._e(),t.errorMessage?e("div",{staticClass:"notification is-warning"},[t._m(2),e("pre",{staticClass:"mt-3"},[t._v(t._s(t.errorMessage))])]):t._e(),t.tournamentInstance?e("div",[e("hr"),e("InstanceData",{key:`tournament-${t.tournamentInstance.instanceId}-data`,attrs:{tournamentInstance:t.tournamentInstance}}),e("hr"),t._m(3),t.notFinished?e("div",[t._m(4)]):t._e(),e("InstanceLeaderboard",{key:`tournament-${t.tournamentInstance.instanceId}-leaderboard`,attrs:{idTournament:t.idTournament,idInstance:t.idInstance,tournamentInstance:t.tournamentInstance}}),e("hr"),t._m(5),t.notFinished?e("div",[t._m(6)]):e("div",[e("InstanceNotifications",{key:`tournament-${t.tournamentInstance.instanceId}-standings`,attrs:{idTournament:t.idTournament,idInstance:t.idInstance,tournamentInstance:t.tournamentInstance}})],1)],1):t._e()])])},fs=[function(){var t=this,e=t._self._c;return e("h1",{staticClass:"title is-3"},[e("i",{staticClass:"fas fa-trophy fa-fw"}),e("i",{staticClass:"fas fa-table fa-fw"}),t._v(" Tournament Instance - Overview")])},function(){var t=this,e=t._self._c;return e("p",[e("i",{staticClass:"fas fa-sync fa-spin fa-lg fa-fw"}),t._v(" Loading tournament instance...")])},function(){var t=this,e=t._self._c;return e("p",[e("i",{staticClass:"fas fa-exclamation-triangle fa-lg"}),t._v(" There was an error loading the tournament instance. Please try again later.")])},function(){var t=this,e=t._self._c;return e("h1",{staticClass:"title is-4"},[e("i",{staticClass:"fas fa-table"}),t._v(" Leaderboard")])},function(){var t=this,e=t._self._c;return e("p",[e("i",{staticClass:"fas fa-exclamation-triangle fa-lg"}),t._v(" Instance is currently running. No winners have been awarded yet. This table might constantly change.")])},function(){var t=this,e=t._self._c;return e("h1",{staticClass:"title is-4"},[e("i",{staticClass:"fas fa-envelope"}),t._v(" Notifications sent")])},function(){var t=this,e=t._self._c;return e("p",[e("i",{staticClass:"fas fa-exclamation-triangle fa-lg"}),t._v(" There are no winners yet for this tournament instance.")])}],vs=function(){var t=this,e=t._self._c;return e("div",[t._m(0),e("div",{staticClass:"columns"},[e("div",{staticClass:"column"},[e("table",{staticClass:"table is-narrow is-bordered is-fullwidth is-striped"},[e("tbody",[e("tr",[e("th",[t._v("Tournament Name")]),e("td",[t._v(t._s(t.tournamentInstance.readableName))])]),e("tr",[e("th",[t._v("Instance ID")]),e("td",[t._v(t._s(t.tournamentInstance.instanceId))])]),e("tr",[e("th",[t._v("Round Number")]),e("td",[t._v(t._s(t.tournamentInstance.roundNumber))])]),e("tr",[e("th",[t._v("Number of entrants")]),e("td",[t._v(t._s(t.tournamentInstance.numEntrants))])]),e("tr",[e("th",[t._v("Score at Threshold")]),e("td",[t._v(t._s(t.tournamentInstance.scoreAtThreshold))])]),e("tr",[e("th",[t._v("Start date & time (Instance)")]),e("td",[t._v(t._s(t.tournamentInstance.startTimestamp)+" (Asia/Manila)")])]),e("tr",[e("th",[t._v("End date & time (Instance)")]),e("td",[t._v(t._s(t.tournamentInstance.endTimestamp)+" (Asia/Manila)")])]),e("tr",[e("th",[t._v("Country Blacklisted")]),e("td",[t._v(t._s(t.getCountryList(t.tournamentInstance.countryBlackList)))])]),e("tr",[e("th",[t._v("Country WhiteList")]),e("td",[t._v(t._s(t.getCountryList(t.tournamentInstance.countryWhiteList)))])]),e("tr",[e("th",[t._v("Entry Cost")]),e("td",[t._v(t._s(t.tournamentInstance.entryCost))])]),t._m(1),e("tr",[e("th",[t._v("Entry Currency")]),e("td",[t._v(t._s(t.getEntryCurrency(t.tournamentInstance.entryCurrency)))])]),e("tr",[e("th",[t._v("Is entry Free only once")]),e("td",[t._v(t._s(t.tournamentInstance.isEntryFreeOnce?"Yes":"No"))])]),e("tr",[e("th",[t._v("Player MAX Level")]),e("td",[t._v(t._s(t.tournamentInstance.playerMaxLevel))])]),e("tr",[e("th",[t._v("Player MIN Level")]),e("td",[t._v(t._s(t.tournamentInstance.playerMinLevel))])]),e("tr",[e("th",[t._v("Player MAX Race")]),e("td",[t._v(t._s(t.tournamentInstance.playerMaxRace))])]),e("tr",[e("th",[t._v("Player MIN Race")]),e("td",[t._v(t._s(t.tournamentInstance.playerMinRace))])]),e("tr",[e("th",[t._v("Bike MAX Level")]),e("td",[t._v(t._s(t.tournamentInstance.bikeMaxLevel))])]),e("tr",[e("th",[t._v("Bike MIN Level")]),e("td",[t._v(t._s(t.tournamentInstance.bikeMinLevel))])]),e("tr",[e("th",[t._v("Player starting position")]),e("td",[t._v(t._s(t.tournamentInstance.playerStartingPosition))])]),t._m(2),e("tr",[e("th",[t._v("Opponents Limit")]),e("td",[t._v(t._s(t.getOpponentsLimit(t.tournamentInstance.opponentsLimit)))])]),t._m(3),e("tr",[e("th",[t._v("Score Display")]),e("td",[t._v(t._s(t.getScoreDisplay(t.tournamentInstance.scoreDisplay)))])]),e("tr",[e("th",[t._v("Winning Condition")]),e("td",[t._v(t._s(t.getWinningCondition(t.tournamentInstance.winningCondition)))])]),e("tr",[e("th",[t._v("Sort Order")]),e("td",[t._v(t._s(t.tournamentInstance.sortOrder))])]),e("tr",[e("th",[t._v("Worst Division")]),e("td",[t._v(t._s(t.tournamentInstance.minIAP))])]),e("tr",[e("th",[t._v("Worst Division")]),e("td",[t._v(t._s(t.tournamentInstance.worstDivision))])]),e("tr",[e("th",[t._v("Best Division")]),e("td",[t._v(t._s(t.tournamentInstance.bestDivision))])]),e("tr",[e("th",[t._v("Bike Restriction")]),e("td",[t._v(t._s(t.getBikeRestriction(t.tournamentInstance.bikeRestriction)))])]),e("tr",[e("th",[t._v("Bike Provided (ID)")]),e("td",[t._v(t._s(t.tournamentInstance.bikeProvided))])]),e("tr",[e("th",[t._v("Is bike upgrades allowed?")]),e("td",[t._v(t._s(t.tournamentInstance.bikeUpgradesAllowed?"Yes":"No"))])]),e("tr",[e("th",[t._v("Is compulsives allowed?")]),e("td",[t._v(t._s(t.tournamentInstance.compulsivesAllowed?"Yes":"No"))])]),e("tr",[e("th",[t._v("Lap Limit")]),e("td",[t._v(t._s(t.tournamentInstance.lapLimit))])]),e("tr",[e("th",[t._v("Circuit Restriction")]),e("td",[t._v(t._s(t.getCircuitRestriction(t.tournamentInstance.circuitRestriction)))])])])])]),e("div",{staticClass:"column"},[e("h1",{staticClass:"title is-5"},[t._v("Prize 1")]),e("table",{staticClass:"table is-narrow is-bordered is-fullwidth is-striped"},[e("tbody",[e("tr",[e("th",[t._v("Prize Class 1 ID")]),e("td",[t._v(t._s(t.getPrizeId(t.tournamentInstance.prizeClass1ID)))])]),e("tr",[e("th",[t._v("Prize Class 1 Number")]),e("td",[t._v(t._s(t.tournamentInstance.prizeClass1Number))])]),e("tr",[e("th",[t._v("Prize Class 1 Rank")]),e("td",[t._v(t._s(t.tournamentInstance.prizeClass1Rank))])]),e("tr",[e("th",[t._v("Prize Class 1 URL")]),e("td",[t._v(t._s(t.tournamentInstance.prizeClass1URL))])]),e("tr",[e("th",[t._v("Prize Class 1 Desc")]),e("td",[t._v(t._s(t.tournamentInstance.prizeClass1Desc))])])])]),e("h1",{staticClass:"title is-5"},[t._v("Prize 2")]),e("table",{staticClass:"table is-narrow is-bordered is-fullwidth is-striped"},[e("tbody",[e("tr",[e("th",[t._v("Prize Class 2 ID")]),e("td",[t._v(t._s(t.getPrizeId(t.tournamentInstance.prizeClass2ID)))])]),e("tr",[e("th",[t._v("Prize Class 2 Number")]),e("td",[t._v(t._s(t.tournamentInstance.prizeClass2Number))])]),e("tr",[e("th",[t._v("Prize Class 2 Rank")]),e("td",[t._v(t._s(t.tournamentInstance.prizeClass2Rank))])]),e("tr",[e("th",[t._v("Prize Class 2 URL")]),e("td",[t._v(t._s(t.tournamentInstance.prizeClass2URL))])]),e("tr",[e("th",[t._v("Prize Class 2 Desc")]),e("td",[t._v(t._s(t.tournamentInstance.prizeClass2Desc))])])])]),e("h1",{staticClass:"title is-5"},[t._v("Prize 3")]),e("table",{staticClass:"table is-narrow is-bordered is-fullwidth is-striped"},[e("tbody",[e("tr",[e("th",[t._v("Prize Class 3 ID")]),e("td",[t._v(t._s(t.getPrizeId(t.tournamentInstance.prizeClass3ID)))])]),e("tr",[e("th",[t._v("Prize Class 3 Number")]),e("td",[t._v(t._s(t.tournamentInstance.prizeClass3Number))])]),e("tr",[e("th",[t._v("Prize Class 3 Rank")]),e("td",[t._v(t._s(t.tournamentInstance.prizeClass3Rank))])]),e("tr",[e("th",[t._v("Prize Class 3 URL")]),e("td",[t._v(t._s(t.tournamentInstance.prizeClass3URL))])]),e("tr",[e("th",[t._v("Prize Class 3 Desc")]),e("td",[t._v(t._s(t.tournamentInstance.prizeClass3Desc))])])])])])])])},bs=[function(){var t=this,e=t._self._c;return e("h1",{staticClass:"title is-4"},[e("i",{staticClass:"fas fa-file-alt"}),t._v(" Tournament Instance Definition")])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{staticClass:"is-size-7 has-text-grey",attrs:{colspan:"2"}},[t._v("IMPORTANT: The cost is the value times 100. Ex.: If the entry cost is 5 coins, the value to insert is 5 * 100 = 500. (The value must be a multiple of 100)")])])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{staticClass:"is-size-7 has-text-grey",attrs:{colspan:"2"}},[t._v("Min: 0 / Max: 32")])])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{staticClass:"is-size-7 has-text-grey",attrs:{colspan:"2"}},[t._v("Min: -1 / Max: 31")])])}],Cs={name:"TournamentInstanceData",props:{tournamentInstance:{type:Object,required:!0}},methods:{getCountryList(t){if(""==t)return"-";if("ALL"==t)return"All countries";let e=t.split("|"),s=[];return e.forEach(t=>{s.push(Rt.find(e=>e.code===t).name)}),s.join(", ")},getEntryCurrency(t){switch(t){case 1:return"Coins";case 2:return"Diamonds";case 3:return"Dollars";case 4:return"Race Tickets";default:return`Unknown (${t})`}},getPrizeId(t){switch(t){case 0:return"No prize";case 1:return"Coins";case 2:return"Diamonds";case 3:return"Bike";case 4:return"Physical Prize";default:return`Unknown (${t})`}},getWinningCondition(t){switch(t){case 1:return"High Score";case 2:return"Accumulated Score";case 3:return"Total Circuit Score";case 4:return"Best Daily Score";case 5:return"Lottery Tickets";default:return`Unknown (${t})`}},getScoreDisplay(t){switch(t){case 0:return"Don't display";case 1:return"Display Score";case 2:return"Display Percent Increase";default:return`Unknown (${t})`}},getOpponentsLimit(t){switch(t){case-1:return`No limit (${t})`;default:return t}},getBikeRestriction(t){switch(t){case"NONE":return"None";case"SELECT":return"Select bikes";case"OPEN":return"Open";case"TEAM":return"Team";case"PRO TEAM":return"Pro Team";case"PROVIDED":return"Provided";default:return`Unknown (${t})`}},getCircuitRestriction(t){switch(t){case"NONE":return"None";case"RANDOM":return"Random";case"LIMITED":return"Limited: "+t;default:return`Unknown (${t})`}}}},gs=Cs,_s=Object(u["a"])(gs,vs,bs,!1,null,null,null),ys=_s.exports,Is=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"content"},[e("p",{},[t._v("Total notifications sent: "),t.isLoading?e("span",{staticClass:"is-italic"},[t._v("Loading...")]):e("span",[e("b",[t._v(t._s(t.notifications.length))]),t._v(" notifications")])])]),e("b-table",{staticClass:"vertical-aligned",attrs:{data:t.notifications,hoverable:"",bordered:"",narrowed:"",striped:"",detailed:"","detail-key":"id","show-detail-icon":!0,loading:t.isLoading},scopedSlots:t._u([{key:"detail",fn:function(s){return[s.row.userMessage.error?e("div",{staticClass:"content"},[e("p",{staticClass:"has-text-danger"},[t._v("Error: "+t._s(s.row.userMessage.error))])]):e("div",{},[e("div",{staticClass:"columns"},[e("div",{staticClass:"column"},[e("h1",{staticClass:"title is-5 mb-3 is-underlined"},[t._v("Message Data")]),e("table",{staticClass:"table is-bordered is-narrow is-fullwidth"},[e("tbody",[e("tr",[e("th",[t._v("Text")]),e("td",[e("p",{staticClass:"is-size-7"},[e("span",{staticClass:"is-family-monospace"},[t._v(t._s(s.row.userMessage.message))])])])]),e("tr",[e("th",[t._v("Message ID")]),e("td",[e("p",{staticClass:"is-size-7"},[e("span",{staticClass:"is-family-monospace"},[t._v(t._s(s.row.userMessage.id))])])])]),e("tr",[e("th",[t._v("Created At")]),e("td",[e("p",{staticClass:"is-size-7"},[t._v(t._s(s.row.userMessage.created_at)+" (Asia/Manila)")])])]),e("tr",[e("th",[t._v("Updated At")]),e("td",[e("p",{staticClass:"is-size-7"},[t._v(t._s(s.row.userMessage.created_at)+" (Asia/Manila)")])])]),e("tr",[e("th",[t._v("Type Receipt")]),e("td",[e("p",{staticClass:"is-size-7"},[t._v(t._s(s.row.userMessage.typeReceipt))])])]),e("tr",[e("th",[t._v("Tournament Name")]),e("td",[e("p",{staticClass:"is-size-7"},[t._v(t._s(t.getString(s.row.userMessage.tournamentName))),e("br"),e("span",{staticClass:"is-family-monospace"},[t._v("("+t._s(s.row.userMessage.tournamentName)+")")])])])]),e("tr",[e("th",[t._v("Prize Description"),e("br"),e("span",{staticClass:"is-size-7"},[t._v("or Tournament Name")])]),e("td",[e("p",{staticClass:"is-size-7"},[t._v(t._s(s.row.userMessage.tournamentNameOrPrizeDescription))])])]),e("tr",[e("th",[t._v("Message Status")]),e("td",[s.row.userMessage.is_read?e("p",{staticClass:"is-size-7"},[t._v("Read")]):e("p",{staticClass:"is-size-7"},[t._v("Unread")])])])])])]),e("div",{staticClass:"column"},[e("h1",{staticClass:"title is-5 mb-3 is-underlined"},[t._v("User Data")]),e("table",{staticClass:"table is-bordered is-narrow is-fullwidth"},[e("tbody",[e("tr",[e("th",[t._v("Name")]),e("td",[e("p",{staticClass:"is-size-7"},[t._v(t._s(s.row.user.name)+" "),e("a",{on:{click:function(e){return t.openUserModal(s.row.user.id)}}},[e("i",{staticClass:"fas fa-magnifying-glass is-size-7 fa-fw"})])])])]),e("tr",[e("th",[t._v("ID")]),e("td",[e("p",{staticClass:"is-size-7"},[e("span",{staticClass:"is-family-monospace"},[t._v(t._s(s.row.user.id))])])])]),e("tr",[e("th",[t._v("Profile Picture")]),e("td",[e("figure",{staticClass:"image is-32x32"},[s.row.user.profile_picture?e("img",{staticClass:"is-rounded",attrs:{src:s.row.user.profile_picture,alt:"avatar",width:"64",height:"64"}}):e("div",{staticClass:"is-rounded",staticStyle:{width:"32px",height:"32px","background-color":"#CACACA","border-radius":"32px"}})])])]),e("tr",[e("th",[t._v("Last Login")]),e("td",[e("p",{staticClass:"is-size-7"},[t._v(t._s(s.row.user.last_login)+" (Asia/Manila)")])])]),e("tr",[e("th",[t._v("Blacklisted")]),e("td",[e("p",{staticClass:"is-size-7"},[t._v(t._s(s.row.user.blacklisted?"Yes":"No"))])])]),e("tr",[e("th",[t._v("Cheater")]),e("td",[e("p",{staticClass:"is-size-7"},[t._v(t._s(s.row.user.cheater?"Yes":"No"))])])]),e("tr",[e("th",[t._v("Cheater Created At")]),e("td",[s.row.user.cheater_created_at?e("p",{staticClass:"is-size-7"},[t._v(t._s(s.row.user.cheater_created_at))]):e("p",{staticClass:"is-size-7"},[t._v("N/A")])])]),e("tr",[e("th",[t._v("Login Type")]),e("td",[e("p",{staticClass:"is-size-7"},[t._v(t._s(s.row.user.login))])])])])])])])])]}},{key:"empty",fn:function(){return[t.isLoading?e("div",{staticClass:"has-text-centered"},[t._v("Loading...")]):e("div",{staticClass:"has-text-centered"},[t._v("No records")])]},proxy:!0}])},[e("b-table-column",{attrs:{field:"positionNumber",centered:"",label:"Position"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.position||"- - -")+" ")]}}])}),e("b-table-column",{attrs:{label:"User"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("div",{staticClass:"is-flex is-flex-direction-row is-align-items-center"},[e("figure",{staticClass:"image is-32x32 mr-3"},[s.row.user&&s.row.user.profile_picture?e("img",{staticClass:"is-rounded",attrs:{src:s.row.user.profile_picture,alt:"avatar",width:"32",height:"32"}}):e("div",{staticClass:"is-rounded",staticStyle:{width:"32px",height:"32px","background-color":"#CACACA","border-radius":"32px"}})]),s.row.user?e("div",[e("p",{staticClass:"has-text-weight-bold"},[t._v(t._s(s.row.user.name)+" "),e("a",{on:{click:function(e){return t.openUserModal(s.row.user.id)}}},[e("i",{staticClass:"fas fa-magnifying-glass is-size-7 fa-fw"})])]),e("p",{staticClass:"is-size-7 is-family-monospace"},[t._v("ID: "+t._s(s.row.user.id))])]):e("div",[e("p",{staticClass:"is-italic"},[t._v("No top user or no data")]),e("p",{staticClass:"is-size-7 is-family-monospace"},[t._v("ID: --------")])])])]}}])}),e("b-table-column",{attrs:{field:"receipt",label:"Receipt ID"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("span",{staticClass:"is-size-7 is-family-monospace"},[t._v(t._s(s.row.receipt))])]}}])}),e("b-table-column",{attrs:{field:"typeReceipt",label:"Receipt Type"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("span",{staticClass:"is-family-monospace"},[t._v(t._s(s.row.typeReceipt||"-"))])]}}])}),e("b-table-column",{attrs:{field:"usetMessage.is_read",label:"Read",centered:""},scopedSlots:t._u([{key:"default",fn:function(t){return[t.row.userMessage.error?e("div",[e("i",{staticClass:"fas fa-trash fa-lg"})]):e("div",[t.row.userMessage.is_read?e("i",{staticClass:"fas fa-lg fa-envelope-open-text",attrs:{alt:"Message read"}}):e("i",{staticClass:"fas fa-lg fa-envelope",attrs:{alt:""}})])]}}])})],1)],1)},zs=[],ks={name:"InstanceStandingsNotificationsTable",props:{idTournament:{type:String,required:!0},idInstance:{type:String,required:!0},tournamentInstance:{type:Object,required:!0}},data(){return{notifications:[],errorMessage:"",isLoading:!0}},created(){this.getInitialData()},methods:{getInitialData(){this.isLoading=!0,this.$http.get(`/tournaments/${this.idTournament}/instances/${this.idInstance}/notifications`).then(t=>{const e=t.data;this.notifications=e,this.isLoading=!1}).catch(t=>{this.showErrorNotification("There was an error loading the standings notifications. Please try again later."),this.errorMessage=t.response.data.message,this.isLoading=!1,console.error(t)})},openUserModal(t){this.$buefy.modal.open({parent:this,component:ns,trapFocus:!0,props:{userId:t}})}}},Ds=ks,ws=Object(u["a"])(Ds,Is,zs,!1,null,null,null),Ss=ws.exports,Ts=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"content"}),e("b-table",{staticClass:"vertical-aligned",attrs:{data:t.leaderboard,hoverable:"",bordered:"",narrowed:"",striped:"",loading:t.isLoading},scopedSlots:t._u([{key:"empty",fn:function(){return[t.isLoading?e("div",{staticClass:"has-text-centered"},[t._v("Loading...")]):e("div",{staticClass:"has-text-centered"},[t._v("No records")])]},proxy:!0}])},[e("b-table-column",{attrs:{field:"score",centered:"",label:"Score"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.score?t.formatNumber(e.row.score):"- - - ")+" ")]}}])}),e("b-table-column",{attrs:{label:"User"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("div",{staticClass:"is-flex is-flex-direction-row is-align-items-center"},[e("figure",{staticClass:"image is-32x32 mr-3"},[s.row.user&&s.row.user.profile_picture?e("img",{staticClass:"is-rounded",attrs:{src:s.row.user.profile_picture,alt:"avatar",width:"32",height:"32"}}):e("div",{staticClass:"is-rounded",staticStyle:{width:"32px",height:"32px","background-color":"#CACACA","border-radius":"32px"}})]),s.row.user?e("div",[e("p",{staticClass:"has-text-weight-bold"},[t._v(t._s(s.row.user.name)+" "),e("a",{on:{click:function(e){return t.openUserModal(s.row.user.id)}}},[e("i",{staticClass:"fas fa-magnifying-glass is-size-7 fa-fw"})])]),e("p",{staticClass:"is-size-7 is-family-monospace"},[t._v("ID: "+t._s(s.row.user.id))])]):e("div",[e("p",{staticClass:"is-italic"},[t._v("No user or no data")]),e("p",{staticClass:"is-size-7 is-family-monospace"},[t._v("ID: --------")])])])]}}])}),e("b-table-column",{attrs:{field:"receipt",centered:"",label:"Receipt"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("span",{staticClass:"is-size-7 is-family-monospace"},[t._v(t._s(s.row.receipt||"- - -"))])]}}])})],1),e("div",{staticClass:"buttons is-centered"},[e("button",{staticClass:"button is-dark is-outlined",attrs:{disabled:t.isLoading},on:{click:t.loadMoreData}},[t._v("Load more")])])],1)},Ls=[],xs={name:"InstanceStandingsLeaderboardTable",props:{idTournament:{type:String,required:!0},idInstance:{type:String,required:!0},tournamentInstance:{type:Object,required:!0}},data(){return{leaderboard:[],errorMessage:"",isLoading:!0,page:1,limit:20,totalItems:0}},created(){this.getInitialData()},methods:{getInitialData(){this.isLoading=!0,this.$http.get(`/tournaments/${this.idTournament}/instances/${this.idInstance}/leaderboard`,{params:{page:this.page,limit:this.limit}}).then(t=>{const e=t.data.leaderboard;this.leaderboard=e,this.isLoading=!1}).catch(t=>{this.showErrorNotification("There was an error loading the instance leaderboard. Please try again later."),this.errorMessage=t.response.data.message,this.isLoading=!1,console.error(t)})},loadMoreData(){this.page++,this.isLoading=!0,this.$http.get(`/tournaments/${this.idTournament}/instances/${this.idInstance}/leaderboard`,{params:{page:this.page,limit:this.limit}}).then(t=>{const e=t.data.leaderboard;this.leaderboard=this.leaderboard.concat(e),this.isLoading=!1}).catch(t=>{this.showErrorNotification("There was an error loading the instance leaderboard. Please try again later."),this.errorMessage=t.response.data.message,this.isLoading=!1,console.error(t)})},openUserModal(t){this.$buefy.modal.open({parent:this,component:ns,trapFocus:!0,props:{userId:t}})}}},Rs=xs,Ns=Object(u["a"])(Rs,Ts,Ls,!1,null,null,null),Ps=Ns.exports,As={name:"InstanceOverview",components:{InstanceData:ys,InstanceLeaderboard:Ps,InstanceNotifications:Ss},data(){return{idTournament:this.$route.params.idTournament,idInstance:this.$route.params.idInstance,isLoading:!0,notFinished:!1,errorMessage:"",tournamentInstance:null}},created(){this.fetchData()},methods:{fetchData(){this.isLoading=!0,this.$http.get(`/tournaments/${this.$route.params.idTournament}/instances/${this.$route.params.idInstance}`).then(t=>{const e=t.data;e.readableName=this.getString(e.name),this.tournamentInstance=e,0==e.hasAwardedWinners&&(this.notFinished=!0),this.isLoading=!1}).catch(t=>{this.showErrorNotification("There was an error loading the tournament instance. Please try again later."),this.errorMessage=t.message,this.isLoading=!1,console.error(t)})}}},Ms=As,Es=Object(u["a"])(Ms,hs,fs,!1,null,null,null),Os=Es.exports,Bs=function(){var t=this,e=t._self._c;return e("section",{staticClass:"hero is-white is-fullheight-with-navbar"},[e("div",{staticClass:"hero-body"},[e("div",{staticClass:"container has-text-centered"},[e("h1",{staticClass:"title is-4"},[t._v(" 🤔 Lost? ")]),e("h1",{staticClass:"subtitle is-6"},[t._v(" This page doesn't exist ")]),e("router-link",{staticClass:"button is-dark is-small",attrs:{to:{name:"tournaments"}}},[e("i",{staticClass:"fas fa-reply"}),t._v("  Back home ")])],1)])])},js=[],Us={name:"ForbiddenComponent",computed:{userRole(){return this.$store.getters.getLoggedUserRole}}},$s=Us,Vs=Object(u["a"])($s,Bs,js,!1,null,null,null),Ws=Vs.exports;a["b"].use(C["a"]);const Fs=[{path:"/",name:"home",component:k,meta:{requiresAuth:!0,roles:["admin","user"]}},{path:"/login",name:"login",component:P,meta:{requiresAuth:!1}},{path:"/users",name:"users",component:j,meta:{requiresAuth:!0,roles:["admin"]}},{path:"/users/new",name:"users-new",component:it,meta:{requiresAuth:!0,roles:["admin"]}},{path:"/tournaments",name:"tournaments",component:pt,meta:{requiresAuth:!0,roles:["admin","user"]}},{path:"/tournaments/new",name:"tournaments-new",component:jt,meta:{requiresAuth:!0,roles:["admin","user"]}},{path:"/tournaments/:id",name:"tournaments-edit",component:Yt,meta:{requiresAuth:!0,roles:["admin","user"]}},{path:"/reports/tournaments/engagement",name:"reports-tournaments-engagement",component:De,meta:{requiresAuth:!0,roles:["admin","reporter","user"]}},{path:"/reports/tournaments/currency-spent",name:"reports-tournaments-currency-spent",component:Ke,meta:{requiresAuth:!0,roles:["admin","reporter","user"]}},{path:"/reports/tournaments/instances",name:"reports-tournaments-instances",component:ps,meta:{requiresAuth:!0,roles:["admin","reporter","user"]}},{path:"/reports/tournaments/:idTournament/instances/:idInstance/overview",name:"reports-tournaments-instances-overview",component:Os,meta:{requiresAuth:!0,roles:["admin","reporter","user"]}},{path:"*",name:"not-found",component:Ws}],Ys=new C["a"]({base:"/",routes:Fs});Ys.beforeEach((t,e,s)=>{t.matched.some(t=>t.meta.requiresAuth)?L.getters.isLogged?t.meta.roles.includes(L.getters.getLoggedUserRole)?s():s({name:"not-found"}):s({name:"login"}):"login"===t.name&&L.getters.isLogged?s({name:"home"}):s()});var Gs=Ys,qs=s("cee4");qs["a"].defaults.baseURL="https://tournaments.weplay.media",qs["a"].defaults.headers.common.Accept="application/json",qs["a"].defaults.withCredentials=!0,qs["a"].defaults.timeout=6e4,qs["a"].interceptors.response.use(t=>(200===t.status&&"NOT_AUTHORIZED"===t.data.error&&L.dispatch("logout"),t),t=>(401===t.response.status&&L.dispatch("logout"),Promise.reject(t)));var Hs=qs["a"],Ks={methods:{startLoading(){L.commit("setLoading",!0)},stopLoading(){L.commit("setLoading",!1)},showErrorNotification:function(t){this.$buefy.snackbar.open({message:"⚠️&nbsp;"+t,type:"is-warning",duration:5e3,position:"is-bottom-left"})},showSuccessNotification:function(t){this.$buefy.snackbar.open({message:"✅&nbsp;"+t,duration:5e3,position:"is-bottom-left",type:"is-white"})},getValue(t){return void 0===t||null===t?null:t},isOptional(t){return null===t||""===t?null:"undefined"!==typeof t&&0===t.length?[]:t},isInputEmpty(t){return null===t||""===t||"undefined"!==typeof t&&0===t.length},isObject(t){return null!==t&&"object"===typeof t&&!1===Array.isArray(t)},isObjectEmpty(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},getString(t){if(t.startsWith("*"))return t;if(void 0===L.state.strings)return console.error("store.strings is not defined"),t;const e=L.state.strings.find(e=>e.name===t);return e?e.value:"???????????"},stringHasDigits(t){return/\d/.test(t)},formatNumber(t){return new Intl.NumberFormat({style:"decimal"}).format(t)},reloadStringsPromise(){return this.$http.get("/stringtable/list")},reloadStrings(){this.$http.get("/stringtable/list").then(t=>{L.commit("setStrings",t.data)}).catch(t=>{console.log(t)})}},computed:{apiUrl(){return"https://tournaments.weplay.media"},loggedUser(){return L.state.loggedUser}}},Xs=Ks,Js=s("4c93");Object(V["c"])("required",{...Js["i"],message:"This field is required"}),Object(V["c"])("email",{...Js["b"],message:"This field must be a valid email"}),Object(V["c"])("confirmed",{...Js["a"],message:"This field confirmation does not match"}),Object(V["c"])("length",{...Js["d"],message:"This field must have 2 options"}),Object(V["c"])("max",{...Js["e"],message:"This field must have a maximum of {length} characters"}),Object(V["c"])("max_value",{...Js["f"],message:"This field must have a maximum of {max}"}),Object(V["c"])("min_value",{...Js["g"],message:"This field must have a minimum of {min}"}),Object(V["c"])("integer",{...Js["c"],message:"This field must be an integer"}),Object(V["c"])("oneOf",{...Js["h"],message:"This field must be one of the allowed values"}),Object(V["c"])("multipleOf100",{validate(t){return t%100===0},message:"The value must be a multiple of 100"}),a["b"].use(b["a"],{defaultIconPack:"fas",defaultDialogConfirmText:"OK",defaultDialogCancelText:"Cancelar",defaultDayNames:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"],defaultMonthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"]}),a["b"].mixin(Xs),a["b"].prototype.$http=Hs,a["b"].config.productionTip=!1,Hs.get("/user/checklogin").then(t=>{200===t.status&&(L.commit("setLoggedUser",t.data),console.log("✅ Logged in"))}).then(()=>{Hs.get("/stringtable/list").then(t=>{L.commit("setStrings",t.data)}).catch(t=>{console.log(t)})}).catch(t=>{401===t.response.status&&console.log("❌ Not logged in")}).finally(()=>{const t=new a["b"]({router:Gs,store:L,http:Hs,render:t=>t(v)});t.$mount("#app")})},"59da":function(t,e,s){},8830:function(t,e,s){},"8a17":function(t,e,s){"use strict";s("4a1d")},"9c48":function(t,e,s){"use strict";s("8830")},c507:function(t,e,s){},d340:function(t,e,s){"use strict";s("c507")},fafd:function(t,e,s){}});
//# sourceMappingURL=app.1ae28e1b.js.map