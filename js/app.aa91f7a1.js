(function(e){function t(t){for(var i,r,l=t[0],o=t[1],c=t[2],d=0,p=[];d<l.length;d++)r=l[d],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&p.push(a[r][0]),a[r]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i]);u&&u(t);while(p.length)p.shift()();return n.push.apply(n,c||[]),s()}function s(){for(var e,t=0;t<n.length;t++){for(var s=n[t],i=!0,l=1;l<s.length;l++){var o=s[l];0!==a[o]&&(i=!1)}i&&(n.splice(t--,1),e=r(r.s=s[0]))}return e}var i={},a={app:0},n=[];function r(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=i,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(s,i,function(t){return e[t]}.bind(null,i));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],o=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var u=o;n.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"02b6":function(e,t,s){},"413b":function(e,t,s){},4572:function(e,t,s){"use strict";s("02b6")},"56d7":function(e,t,s){"use strict";s.r(t);var i=s("2b0e"),a=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("Navbar"),t("router-view"),t("b-loading",{ref:"loader",attrs:{active:e.isLoading,"can-cancel":!0}})],1)},n=[],r=function(){var e=this,t=e._self._c;return t("div",[t("b-navbar",{attrs:{type:"is-dark"},scopedSlots:e._u([{key:"brand",fn:function(){return[t("b-navbar-item",{attrs:{tag:"div"}},[t("div",{staticClass:"tag is-primary"},[e._v(" Tournaments API ")])])]},proxy:!0},e.loggedUser?{key:"start",fn:function(){return[t("b-navbar-item",{attrs:{tag:"router-link",to:{name:"home"}}},[t("i",{staticClass:"fas fa-home fa-fw fa-lg"}),e._v(" Home ")]),t("b-navbar-item",{attrs:{tag:"router-link",to:{name:"users"}}},[t("i",{staticClass:"fas fa-users fa-fw fa-lg"}),e._v(" Users ")]),t("b-navbar-item",{attrs:{tag:"router-link",to:{name:"tournaments"}}},[t("i",{staticClass:"fas fa-trophy fa-fw fa-lg"}),e._v(" Tournaments ")])]},proxy:!0}:{key:"start",fn:function(){},proxy:!0},{key:"end",fn:function(){return[e.loggedUser?t("b-navbar-item",{on:{click:e.logout}},[t("i",{staticClass:"fas fa-sign-out fa-lg fa-fw fa-lg"}),e._v(" Salir ")]):t("b-navbar-item",{attrs:{tag:"router-link",to:{name:"login"}}},[t("i",{staticClass:"fas fa-sign-in fa-fw fa-lg"}),e._v(" Log in ")])]},proxy:!0}],null,!0)})],1)},l=[],o={name:"TheNavbar",data(){return{}},methods:{logout(){this.$store.dispatch("logout")}}},c=o,u=s("2877"),d=Object(u["a"])(c,r,l,!1,null,null,null),p=d.exports,m={components:{Navbar:p},data(){return{checkLoginInterval:null}},mounted(){},computed:{isLoading(){return this.$store.state.isLoading},loggedUser(){return this.$store.state.loggedUser}}},h=m,f=(s("fe17"),Object(u["a"])(h,a,n,!1,null,null,null)),C=f.exports,b=s("289d"),v=s("8c4f"),g=s("bb51"),y=function(){var e=this,t=e._self._c;return t("section",{staticClass:"hero is-light is-fullheight-with-navbar"},[t("div",{staticClass:"hero-body"},[t("div",{staticClass:"container"},[t("div",{staticClass:"columns is-centered"},[t("div",{staticClass:"column is-3-fullhd is-4-desktop is-6-tablet"},[t("div",{staticClass:"box has-text-centered"},[e._m(0),t("h1",{staticClass:"subtitle is-6"},[e._v(" MotoGP Tournament Admin ")]),t("form",{on:{submit:function(t){return t.preventDefault(),e.login.apply(null,arguments)}}},[t("div",{staticClass:"field has-text-white"},[t("div",{staticClass:"control"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"input",attrs:{type:"email",placeholder:"email@company.com",required:"",disabled:e.isLoading},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})])]),t("div",{staticClass:"field has-text-white"},[t("div",{staticClass:"control"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"input",attrs:{type:"password",placeholder:"Your password",required:"",disabled:e.isLoading},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})])]),t("button",{staticClass:"button is-primary is-fullwidth",class:{"is-loading":e.isLoading}},[e._v("Enter "),t("i",{staticClass:"fas fa-paper-plane"})])])])])])])])])},k=[function(){var e=this,t=e._self._c;return t("h1",{staticClass:"title is-4"},[t("i",{staticClass:"fas fa-sign-in"}),e._v("  Sign in ")])}],z=(s("14d9"),s("2f62")),I=s("bfa9"),S=s("2c4e");i["a"].use(z["a"]);var _=new z["a"].Store({state:{isLoading:!1,loggedUser:null,lastTimeUpdated:(new Date).getTime()},mutations:{lastTimeUpdated(e,t){e.lastTimeUpdated=t},setLoading(e,t){e.isLoading=t},setLoggedUser(e,t){e.loggedUser=t},logout(e){e.loggedUser=null}},actions:{logout({commit:e}){e("logout"),e("setLoading",!1),S["a"].open({message:"You have been logged out",type:"is-warning",duration:5e3,queue:!0}),$e.replace("/login")}},getters:{},modules:{},plugins:[new I["a"]({key:"mgp-tournament-app",reducer:e=>({loggedUser:e.loggedUser})}).plugin]}),D={data(){return{isLoading:!1,email:"",password:""}},methods:{login(){this.startLoading(),this.isLoading=!0,this.$http.post("/user/login",{email:this.email,password:this.password}).then(e=>{this.$store.commit("setLoggedUser",e.data),this.$router.push("/")}).catch(e=>{console.log(e)}).finally(()=>{this.stopLoading(),this.isLoading=!1})}},beforeRouteEnter:(e,t,s)=>{_.state.loggedUser?s("/"):s()}},w=D,L=Object(u["a"])(w,y,k,!1,null,null,null),R=L.exports,N=function(){var e=this,t=e._self._c;return t("div",{staticClass:"section"},[t("div",{staticClass:"container"},[t("div",{staticClass:"columns is-centered"},[t("div",{staticClass:"column is-6"},[t("div",{staticClass:"is-clearfix"},[t("h1",{staticClass:"title is-pulled-left"},[e._v("Users")]),t("div",{staticClass:"is-pulled-right"},[t("div",{staticClass:"buttons"},[t("button",{staticClass:"button is-light",on:{click:e.getUsers}},[t("i",{staticClass:"fas fa-sync"})]),t("router-link",{staticClass:"button is-primary",attrs:{to:{name:"users-new"}}},[t("i",{staticClass:"fas fa-user-plus"})])],1)])]),t("b-table",{attrs:{data:e.users,loading:e.isLoading,paginated:!0,"per-page":10},scopedSlots:e._u([{key:"empty",fn:function(){return[t("p",{staticClass:"is-size-7 has-text-centered py-5 is-family-code"},[e._v("No users")])]},proxy:!0}])},[t("b-table-column",{attrs:{field:"email",sortable:"",label:"Email"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.email)+" ")]}}])}),t("b-table-column",{attrs:{field:"role",label:"Role",sortable:""},scopedSlots:e._u([{key:"default",fn:function(s){return[t("i",{staticClass:"fas fa-fw",class:{"fa-shield":"admin"==s.row.role,"fa-user":"user"==s.row.role}}),e._v(" "+e._s(s.row.role&&s.row.role.toUpperCase())+" ")]}}])}),t("b-table-column",{attrs:{label:"Action",centered:""},scopedSlots:e._u([{key:"default",fn:function(s){return[t("a",{staticClass:"has-text-danger",on:{click:function(t){return e.confirmDeleteUser(s.row)}}},[t("span",{staticClass:"icon"},[t("i",{staticClass:"fas fa-trash"})])])]}}])})],1)],1)])])])},P=[],x={data(){return{users:[],isLoading:!1}},methods:{getUsers(){this.isLoading=!0,this.$http.get("/user/list").then(e=>{this.users=e.data}).catch(e=>{console.error(e)}).finally(()=>{this.isLoading=!1})},confirmDeleteUser(e){this.$buefy.dialog.confirm({title:"Delete User",message:`Are you sure you want to delete user <b>${e.email}</b>?`,confirmText:"Delete",type:"is-danger",hasIcon:!0,onConfirm:()=>this.deleteUser(e.id)})},deleteUser(e){this.$http.post("/user/delete",{id:e}).then(()=>{this.showSuccessNotification("User deleted successfully"),this.getUsers()}).catch(e=>{this.showErrorNotification("Error deleting user"),console.error(e)})}},mounted(){this.getUsers()}},B=x,A=Object(u["a"])(B,N,P,!1,null,null,null),O=A.exports,M=function(){var e=this,t=e._self._c;return t("section",{staticClass:"section"},[t("div",{staticClass:"container"},[t("div",{staticClass:"columns is-centered"},[t("div",{staticClass:"column is-6"},[t("div",{staticClass:"is-clearfix"},[t("h1",{staticClass:"title is-pulled-left"},[t("router-link",{attrs:{to:{name:"users"}}},[t("i",{staticClass:"fas fa-arrow-left"})]),e._v(" New user")],1),e._m(0)]),t("br"),t("div",{staticClass:"box"},[t("ValidationObserver",{ref:"observer"},[t("BInputWithValidation",{attrs:{rules:"required|email",type:"email",label:"Email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),t("BInputWithValidation",{attrs:{rules:"required",type:"password",label:"Password",vid:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),t("BInputWithValidation",{attrs:{rules:"required|confirmed:password",name:"Password",type:"password",label:"Confirm Password"},model:{value:e.confirmation,callback:function(t){e.confirmation=t},expression:"confirmation"}}),t("BSelectWithValidation",{attrs:{rules:"required",label:"Role"},model:{value:e.role,callback:function(t){e.role=t},expression:"role"}},[t("option",{attrs:{value:""}},[e._v("None")]),t("option",{attrs:{value:"user"}},[e._v("User")]),t("option",{attrs:{value:"admin"}},[e._v("Admin")])]),t("br"),t("div",{staticClass:"buttons"},[t("button",{staticClass:"button is-success",on:{click:e.validateForm}},[t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fas fa-check"})]),t("span",[e._v("Submit")])]),t("button",{staticClass:"button",on:{click:e.resetForm}},[t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fas fa-redo"})]),t("span",[e._v("Reset")])])])],1)],1)])])])])},T=[function(){var e=this,t=e._self._c;return t("h1",{staticClass:"title is-pulled-right"},[t("i",{staticClass:"fas fa-user-plus"})])}],E=s("7bb1"),U=function(){var e=this,t=e._self._c;return t("ValidationProvider",{attrs:{vid:e.vid,name:e.$attrs.label,rules:e.rules},scopedSlots:e._u([{key:"default",fn:function({errors:s,valid:i}){return[t("b-field",e._b({attrs:{type:{"is-danger":s[0],"is-success":i},message:s}},"b-field",e.$attrs,!1),[t("b-select",{attrs:{expanded:"",placeholder:"Select an option"},model:{value:e.innerValue,callback:function(t){e.innerValue=t},expression:"innerValue"}},[e._t("default")],2)],1),e.help?t("div",{staticClass:"message mb-2"},[t("div",{staticClass:"message-body p-2"},[t("p",{staticClass:"is-size-7"},[e._v(e._s(e.help))])])]):e._e()]}}],null,!0)})},V=[],W={components:{ValidationProvider:E["b"]},props:{vid:{type:String},rules:{type:[Object,String],default:""},value:{type:null},help:{type:String,default:""}},data:()=>({innerValue:""}),watch:{innerValue(e){this.$emit("input",e)},value(e){this.innerValue=e}},created(){this.value&&(this.innerValue=this.value)}},$=W,F=Object(u["a"])($,U,V,!1,null,null,null),G=F.exports,j=function(){var e=this,t=e._self._c;return t("ValidationProvider",{attrs:{vid:e.vid,name:e.$attrs.name||e.$attrs.label,rules:e.rules},scopedSlots:e._u([{key:"default",fn:function({errors:s,valid:i}){return[t("b-field",e._b({attrs:{type:{"is-danger":s[0],"is-success":i},message:s}},"b-field",e.$attrs,!1),[t("b-input",e._b({model:{value:e.innerValue,callback:function(t){e.innerValue=t},expression:"innerValue"}},"b-input",e.$attrs,!1))],1),e.help?t("div",{staticClass:"message mb-2"},[t("div",{staticClass:"message-body p-2"},[t("p",{staticClass:"is-size-7"},[e._v(e._s(e.help))])])]):e._e()]}}])})},q=[],H={components:{ValidationProvider:E["b"]},props:{vid:{type:String},rules:{type:[Object,String],default:""},value:{type:null},help:{type:String,default:""}},data:()=>({innerValue:""}),watch:{innerValue(e){this.$emit("input",e)},value(e){this.innerValue=e}},created(){this.value&&(this.innerValue=this.value)}},K=H,Y=Object(u["a"])(K,j,q,!1,null,null,null),J=Y.exports,Z={data(){return{email:"",password:"",confirmation:"",role:"",choices:[]}},components:{ValidationObserver:E["a"],BSelectWithValidation:G,BInputWithValidation:J},methods:{validateForm(){this.startLoading(),this.$refs.observer.validate().then(e=>{e?(this.showSuccessNotification("Form is valid!"),this.submit()):this.showErrorNotification("Form is invalid!")}).catch(e=>{this.showErrorNotification("An unexpected error occurred. Please try again later."),console.error(e)}).finally(()=>{this.stopLoading()})},submit(){this.startLoading(),this.$http.post("/user/new",{email:this.email,password:this.password,role:this.role}).then(e=>{console.log(e),this.showSuccessNotification("User created successfully!"),this.$router.push({name:"users"})}).catch(e=>{this.showErrorNotification("An unexpected error occurred. Please try again later."),console.error(e)}).finally(()=>{this.stopLoading()})},resetForm(){this.email="",this.password="",this.confirmation="",this.role="",requestAnimationFrame(()=>{this.$refs.observer.reset()})}}},Q=Z,X=Object(u["a"])(Q,M,T,!1,null,null,null),ee=X.exports,te=function(){var e=this,t=e._self._c;return t("div",{staticClass:"section"},[t("div",{staticClass:"container"},[t("div",{staticClass:"is-clearfix"},[t("h1",{staticClass:"title is-pulled-left"},[e._v("Tournaments")]),t("div",{staticClass:"is-pulled-right"},[t("div",{staticClass:"buttons"},[t("button",{staticClass:"button is-light",on:{click:e.getTournaments}},[t("i",{staticClass:"fas fa-sync"})]),t("router-link",{staticClass:"button is-primary",attrs:{to:{name:"tournaments-new"}}},[t("i",{staticClass:"fas fa-plus"})])],1)])]),t("b-field",{attrs:{label:"Search by name"}},[t("b-input",{attrs:{type:"text",placeholder:"Search",clearable:""},on:{input:e.debouncedSearch},model:{value:e.searchTerm,callback:function(t){e.searchTerm=t},expression:"searchTerm"}})],1),t("div",{},[t("b-table",{attrs:{data:e.filteredTournaments,loading:e.isLoading,paginated:!0,"per-page":20,striped:"",bordered:"",hoverable:"","pagination-simple":!0},scopedSlots:e._u([{key:"empty",fn:function(){return[t("p",{staticClass:"is-size-7 has-text-centered py-5 is-family-code"},[e._v("No tournaments")])]},proxy:!0}])},[t("b-table-column",{attrs:{field:"id",sortable:"",label:"ID",centered:""},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",{staticClass:"is-family-code"},[e._v(e._s(s.row.id))])]}}])}),t("b-table-column",{attrs:{field:"name",sortable:"",label:"Name"},scopedSlots:e._u([{key:"default",fn:function(s){var i;return["*"!==s.row.name[0]?t("b-tooltip",{attrs:{label:s.row.name,position:"is-right"}},[t("i",{staticClass:"fas fa-info-circle has-text-link fa-fw"}),e._v("  ")]):e._e(),t("span",{class:"*"!==s.row.name[0]?"is-underlined":"is-italic"},[e._v(e._s(null!==(i=e.getString(s.row.name))&&void 0!==i?i:"❓ (STRING NOT FOUND)"))])]}}])}),t("b-table-column",{attrs:{field:"startTimestamp",sortable:"",label:"Start"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.startTimestamp)+" ")]}}])}),t("b-table-column",{attrs:{field:"endTimestamp",sortable:"",label:"End"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.endTimestamp)+" ")]}}])}),t("b-table-column",{attrs:{field:"timeOffsetHours",sortable:"",centered:"",numeric:"",label:"Time Offset"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.timeOffsetHours)+" ")]}}])}),t("b-table-column",{attrs:{field:"restartFrequency",sortable:"",centered:"",numeric:"",label:"Restart Frequency"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.restartFrequency)+" ")]}}])}),t("b-table-column",{attrs:{field:"duration",sortable:"",centered:"",label:"Duration"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.duration)+" ")]}}])}),t("b-table-column",{attrs:{field:"isActivated",sortable:"",centered:"",label:"Activated"},scopedSlots:e._u([{key:"default",fn:function(e){return[e.row.isActivated?t("i",{staticClass:"fas fa-check-circle is-size-5 has-text-success"}):t("i",{staticClass:"fas fa-times-circle is-size-5 has-text-danger"})]}}])}),t("b-table-column",{attrs:{label:"Actions",centered:""},scopedSlots:e._u([{key:"default",fn:function(s){return[t("div",{staticClass:"buttons is-centered"},[t("router-link",{staticClass:"has-text-primary is-size-5",attrs:{to:{name:"tournaments-edit",params:{id:s.row.id}}}},[t("i",{staticClass:"fas fa-edit"})]),e._v("    "),t("a",{staticClass:"has-text-danger is-size-5",on:{click:function(t){return e.confirmDeleteTournament(s.row)}}},[t("i",{staticClass:"fas fa-trash"})])],1)]}}])})],1)],1)],1)])},se=[],ie=s("2ef0"),ae={data(){return{strings:[],tournaments:[],filteredTournaments:[],searchTerm:"",debouncedSearch:Object(ie["debounce"])(this.search,500),isLoading:!1}},mounted(){this.getTournaments()},methods:{getTournaments(){this.isLoading=!0;const e=[this.$http.get("/tournaments/list"),this.$http.get("/stringTable/list")];Promise.all(e).then(e=>{this.tournaments=e[0].data,this.filteredTournaments=e[0].data,this.strings=e[1].data,this.searchTerm=""}).catch(e=>{console.error(e)}).finally(()=>{this.isLoading=!1})},getString(e){if(e.startsWith("*"))return e;const t=this.strings.find(t=>t.name===e);return t?t.value:"???????????"},confirmDeleteTournament(e){this.$buefy.dialog.confirm({title:"Delete Tournament",message:`Are you sure you want to delete tournament <b>${this.getString(e.name)}</b> (ID=${e.id})?`,confirmText:"Delete",type:"is-danger",hasIcon:!0,onConfirm:()=>this.deleteTournament(e.id)})},deleteTournament(e){this.$http.post("/tournament/delete/"+e).then(()=>{this.showSuccessNotification("Tournament deleted successfully"),this.getTournaments()}).catch(e=>{this.showErrorNotification("Error deleting tournament"),console.error(e)})},search(){this.searchTerm||(this.filteredTournaments=this.tournaments),this.filteredTournaments=this.tournaments.filter(e=>e.name.toLowerCase().includes(this.searchTerm.toLowerCase()))}}},ne=ae,re=Object(u["a"])(ne,te,se,!1,null,null,null),le=re.exports,oe=function(){var e=this,t=e._self._c;return t("section",{staticClass:"section"},[t("div",{staticClass:"container"},[t("div",{staticClass:"columns is-centered"},[t("div",{staticClass:"column is-8"},[t("div",{staticClass:"is-clearfix"},[t("h1",{staticClass:"title is-pulled-left"},[t("router-link",{attrs:{to:{name:"tournaments"}}},[t("i",{staticClass:"fas fa-arrow-left"})]),e._v(" New tournament")],1),e._m(0)]),t("br"),e.isLoading?t("div",{staticClass:"notification has-text-centered px-2"},[e._m(1)]):!e.isLoading&&e.cantRender?t("div",{staticClass:"notification is-warning"},[e._m(2)]):e.isLoading||e.cantRender?e._e():t("TournamentForm",{attrs:{strings:e.stringList,bikes:e.bikeList,circuits:e.circuitList},on:{submit:e.submit}})],1)])])])},ce=[function(){var e=this,t=e._self._c;return t("h1",{staticClass:"title is-pulled-right"},[t("i",{staticClass:"fas fa-plus"}),e._v(" "),t("i",{staticClass:"fas fa-trophy"})])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"block"},[t("p",{},[t("i",{staticClass:"fas fa-spin fa-sync"})]),t("p",{staticClass:"is-size-7"},[e._v("Loading")])])},function(){var e=this,t=e._self._c;return t("p",[t("i",{staticClass:"fas fa-exclamation-triangle"}),e._v(" An error ocurred")])}],ue=function(){var e=this,t=e._self._c;return t("div",[t("div",{directives:[{name:"show",rawName:"v-show",value:e.warningEdits.length>0,expression:"warningEdits.length > 0"}],staticClass:"message is-warning"},[t("div",{staticClass:"message-body is-clearfix"},[t("i",{staticClass:"fas fa-times-circle is-size-5 is-clickable is-pulled-right",on:{click:function(t){e.warningEdits=[]}}}),t("div",{staticClass:"content"},[t("p",[e._v("Please note the following warning:")]),t("ul",e._l(e.warningEdits,(function(s,i){return t("li",{key:`warning-${i}-${s.slice(0,10)}`},[e._v(e._s(s))])})),0)])])]),t("ValidationObserver",{ref:"observer"},[t("div",{staticClass:"field"},[t("label",{staticClass:"label",attrs:{for:""}},[e._v("ID tournament")]),t("div",{staticClass:"control"},[t("input",{staticClass:"input",attrs:{type:"text",disabled:"",placeholder:"Autogenerated after creation"},domProps:{value:""+(e.edit?e.id:"")}})])]),t("b-field",{staticClass:"my-4",attrs:{label:"Name"}},[t("b-autocomplete",{ref:"nameAutocomplete",attrs:{placeholder:"Start typing to find a name or create a new one","keep-first":!1,"open-on-focus":!1,data:e.filteredNameStrings,field:"value",clearable:!0},on:{select:t=>e.nameSelected=t},model:{value:e.nameInput,callback:function(t){e.nameInput=t},expression:"nameInput"}})],1),t("div",{staticClass:"columns"},[t("div",{staticClass:"column"},[t("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function({errors:s,valid:i}){return[t("b-field",{attrs:{label:"Start date & time",type:{"is-danger":s[0],"is-success":i},message:s}},[t("b-datetimepicker",{attrs:{placeholder:"Type or select a date...",icon:"calendar","icon-pack":"fas",editable:""},model:{value:e.startTimestamp,callback:function(t){e.startTimestamp=t},expression:"startTimestamp"}})],1)]}}])})],1),t("div",{staticClass:"column"},[t("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function({errors:s,valid:i}){return[t("b-field",{attrs:{label:"End date & time",type:{"is-danger":s[0],"is-success":i},message:s}},[t("b-datetimepicker",{attrs:{placeholder:"Type or select a date...",icon:"calendar","icon-pack":"fas",editable:""},model:{value:e.endTimestamp,callback:function(t){e.endTimestamp=t},expression:"endTimestamp"}})],1)]}}])})],1)]),t("div",{staticClass:"columns"},[t("div",{staticClass:"column"},[t("BInputNumberWithValidation",{attrs:{rules:"integer|max_value:24|min_value:-24",type:"number",label:"Time offset (Hours)",help:"Can be between -24 and 24. If empty, by default is 0 (no offset)."},model:{value:e.timeOffsetHours,callback:function(t){e.timeOffsetHours=t},expression:"timeOffsetHours"}})],1),t("div",{staticClass:"column"},[t("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0",type:"number",label:"Last entry (In minutes)",help:"If empty, by default is 15"},model:{value:e.lastEntryInMinutes,callback:function(t){e.lastEntryInMinutes=t},expression:"lastEntryInMinutes"}})],1)]),t("div",{staticClass:"columns"},[t("div",{staticClass:"column"},[t("BInputNumberWithValidation",{attrs:{rules:"required|integer|min_value:1",type:"number",label:"Restart Frequency",help:"In hours, when a new version of the tournament will start"},model:{value:e.restartFrequency,callback:function(t){e.restartFrequency=t},expression:"restartFrequency"}})],1),t("div",{staticClass:"column"},[t("BInputNumberWithValidation",{attrs:{rules:"required|integer|min_value:1",type:"number",label:"Duration",help:"In hours, how long this tournament will run once started. Must be a value equal or greater than 1"},model:{value:e.duration,callback:function(t){e.duration=t},expression:"duration"}})],1)]),t("BCheckboxesWithValidation",{attrs:{rules:"required|oneOf:0,1",label:"isActivated"}},[t("b-field",{staticClass:"my-4",attrs:{label:"Is tournament activated?"}},[t("b-radio",{attrs:{"native-value":"0"},model:{value:e.isActivated,callback:function(t){e.isActivated=t},expression:"isActivated"}},[e._v("Deactivated")]),t("b-radio",{attrs:{"native-value":"1"},model:{value:e.isActivated,callback:function(t){e.isActivated=t},expression:"isActivated"}},[e._v("Activated")])],1)],1),t("b-field",{staticClass:"my-4",attrs:{label:"Country Whitelist"}},[t("b-autocomplete",{attrs:{placeholder:"Search a country...","keep-first":!1,"open-on-focus":!1,data:e.filteredCountriesWhitelist,field:"name"},on:{select:t=>e.pushCountryWhitelist(t)},scopedSlots:e._u([{key:"empty",fn:function(){return[e._v('No country called "'+e._s(e.countryWhitelistInput)+'"')]},proxy:!0}]),model:{value:e.countryWhitelistInput,callback:function(t){e.countryWhitelistInput=t},expression:"countryWhitelistInput"}})],1),t("div",{staticClass:"message"},[0==e.countryWhitelistArray.length?t("div",{staticClass:"message-body"},[t("p",{staticClass:"is-size-7"},[e._v("If the country whitelist is empty, ALL countries are allowed.")])]):t("div",{staticClass:"message-body"},[t("p",{staticClass:"is-size-7 mb-3"},[e._v("The following countries are allowed:")]),t("b-taglist",e._l(e.countryWhitelistArray,(function(s){return t("b-tag",{key:"whitelist-"+s.code,attrs:{type:"is-primary",closable:!0},on:{close:function(t){return e.removeCountryFromWhitelist(s.code)}}},[e._v(" "+e._s(s.name)+" ")])})),1)],1)]),t("b-field",{staticClass:"my-4",attrs:{label:"Country Blacklist"}},[t("b-autocomplete",{attrs:{placeholder:"Start typing to find a name","keep-first":!1,"open-on-focus":!1,data:e.filteredCountriesBlacklist,field:"name"},on:{select:t=>e.pushCountryBlacklist(t)},scopedSlots:e._u([{key:"empty",fn:function(){return[e._v('No country called "'+e._s(e.countryWhitelistInput)+'"')]},proxy:!0}]),model:{value:e.countryBlacklistInput,callback:function(t){e.countryBlacklistInput=t},expression:"countryBlacklistInput"}})],1),t("div",{staticClass:"message"},[0==e.countryBlacklistArray.length?t("div",{staticClass:"message-body"},[t("p",{staticClass:"is-size-7"},[e._v("If the country blacklilst is empty, -NO- countries are blocked.")])]):t("div",{staticClass:"message-body"},[t("p",{staticClass:"is-size-7 mb-3"},[e._v("The following countries are not allowed:")]),t("b-taglist",e._l(e.countryBlacklistArray,(function(s){return t("b-tag",{key:"blacklist-"+s.code,attrs:{type:"is-danger",closable:!0},on:{close:function(t){return e.removeCountryFromBlacklist(s.code)}}},[e._v(" "+e._s(s.name)+" ")])})),1)],1)]),t("BSelectWithValidation",{attrs:{rules:"required|oneOf:NONE,OPEN,TEAM,PRO TEAM,PROVIDED,SELECT",label:"Bike restriction"},model:{value:e.bikeRestriction,callback:function(t){e.bikeRestriction=t},expression:"bikeRestriction"}},[t("option",{attrs:{value:"NONE"}},[e._v("None")]),t("option",{attrs:{value:"SELECT"}},[e._v("Select bikes")]),t("option",{attrs:{value:"OPEN"}},[e._v("Open")]),t("option",{attrs:{value:"TEAM"}},[e._v("Team")]),t("option",{attrs:{value:"PRO TEAM"}},[e._v("Pro Team")]),t("option",{attrs:{value:"PROVIDED"}},[e._v("Provided")])]),"SELECT"==e.bikeRestriction?t("div",[t("b-field",{staticClass:"my-4",attrs:{label:"Bikes to restrict (Select)"}},[t("b-autocomplete",{attrs:{placeholder:"Start typing to find a bike","keep-first":!1,"open-on-focus":!1,data:e.filteredBikeRestriction,field:"name"},on:{select:t=>e.pushBikeRestrictionArray(t)},scopedSlots:e._u([{key:"empty",fn:function(){return[e._v('No circuit found with name "'+e._s(e.bikeRestrictionInput)+'"')]},proxy:!0}],null,!1,1300342243),model:{value:e.bikeRestrictionInput,callback:function(t){e.bikeRestrictionInput=t},expression:"bikeRestrictionInput"}})],1),t("div",{staticClass:"message",class:{"is-danger":0==e.bikeRestrictionArray.length}},[0==e.bikeRestrictionArray.length?t("div",{staticClass:"message-body"},[t("p",{staticClass:"is-size-7"},[t("b",[e._v("REQUIRED")]),e._v(". Please, select at least one bike.")])]):t("div",{staticClass:"message-body"},[t("p",{staticClass:"is-size-7 mb-3"},[e._v("Restricted to the following bikes:")]),t("b-taglist",e._l(e.bikeRestrictionArray,(function(s){return t("b-tag",{key:"bike-restricted-"+s.id,attrs:{type:"is-primary",closable:!0},on:{close:function(t){return e.removeBikeFromRestriction(e.circuit.id)}}},[e._v(" "+e._s(s.name)+" ")])})),1)],1)])],1):e._e(),"PROVIDED"===e.bikeRestriction?t("div",[t("b-field",{staticClass:"my-4",attrs:{label:"Bike restriction (Provided)"}},[t("b-autocomplete",{ref:"bikeProvidedAutocomplete",attrs:{placeholder:"Start typing to find a bike","keep-first":!1,"open-on-focus":!1,data:e.filteredBikeProvided,field:"name",clearable:!0},on:{select:t=>e.bikeProvidedSelected=t},scopedSlots:e._u([{key:"empty",fn:function(){return[e._v('No bike found with name "'+e._s(e.bikeProvidedInput)+'"')]},proxy:!0}],null,!1,1673519830),model:{value:e.bikeProvidedInput,callback:function(t){e.bikeProvidedInput=t},expression:"bikeProvidedInput"}})],1)],1):e._e(),t("BCheckboxesWithValidation",{attrs:{rules:"required|oneOf:0,1",label:"isBikeUpgradesAllowed"}},[t("b-field",{staticClass:"my-4",attrs:{label:"Is bike upgrades allowed?"}},[t("b-radio",{attrs:{"native-value":"0"},model:{value:e.isBikeUpgradesAllowed,callback:function(t){e.isBikeUpgradesAllowed=t},expression:"isBikeUpgradesAllowed"}},[e._v("Don't allow bike upgrades")]),t("b-radio",{attrs:{"native-value":"1"},model:{value:e.isBikeUpgradesAllowed,callback:function(t){e.isBikeUpgradesAllowed=t},expression:"isBikeUpgradesAllowed"}},[e._v("Allow bike upgrades")])],1)],1),t("BSelectWithValidation",{attrs:{rules:"required",label:"Is compulsives allowed?"},model:{value:e.isCompulsivesAllowed,callback:function(t){e.isCompulsivesAllowed=t},expression:"isCompulsivesAllowed"}},[t("option",{attrs:{value:"ALL"}},[e._v("All")]),t("option",{attrs:{value:"NONE"}},[e._v("None")])]),t("BCheckboxesWithValidation",{attrs:{rules:"required|oneOf:1,2,3,4,5",label:"winningCondition"}},[t("b-field",{staticClass:"my-4",attrs:{label:"Winning condition"}},[t("b-radio",{attrs:{"native-value":"1"},model:{value:e.winningCondition,callback:function(t){e.winningCondition=t},expression:"winningCondition"}},[e._v("High Score")]),t("b-radio",{attrs:{"native-value":"2"},model:{value:e.winningCondition,callback:function(t){e.winningCondition=t},expression:"winningCondition"}},[e._v("Accumulated Score")]),t("b-radio",{attrs:{"native-value":"3"},model:{value:e.winningCondition,callback:function(t){e.winningCondition=t},expression:"winningCondition"}},[e._v("Total Circuit Score")]),t("b-radio",{attrs:{"native-value":"4"},model:{value:e.winningCondition,callback:function(t){e.winningCondition=t},expression:"winningCondition"}},[e._v("Best Daily Score")]),t("b-radio",{attrs:{"native-value":"5"},model:{value:e.winningCondition,callback:function(t){e.winningCondition=t},expression:"winningCondition"}},[e._v("Lottery Tickets")])],1)],1),t("BCheckboxesWithValidation",{attrs:{rules:"required|oneOf:0,1,2",label:"scoreDisplay"}},[t("b-field",{staticClass:"my-4",attrs:{label:"Display score?"}},[t("b-radio",{attrs:{"native-value":"0"},model:{value:e.scoreDisplay,callback:function(t){e.scoreDisplay=t},expression:"scoreDisplay"}},[e._v("Don't display")]),t("b-radio",{attrs:{"native-value":"1"},model:{value:e.scoreDisplay,callback:function(t){e.scoreDisplay=t},expression:"scoreDisplay"}},[e._v("Display Score")]),t("b-radio",{attrs:{"native-value":"2"},model:{value:e.scoreDisplay,callback:function(t){e.scoreDisplay=t},expression:"scoreDisplay"}},[e._v("Display Percent Increase")])],1)],1),t("BInputNumberWithValidation",{attrs:{rules:"integer|max_value:24|min_value:0",type:"number",label:"Lap limit",help:"Zero (0) is normal behaviour, otherwise enter the number of laps in race"},model:{value:e.lapLimit,callback:function(t){e.lapLimit=t},expression:"lapLimit"}}),t("BSelectWithValidation",{attrs:{rules:"required",label:"Circuit restrictions"},model:{value:e.selectedOptionCircuitRestriction,callback:function(t){e.selectedOptionCircuitRestriction=t},expression:"selectedOptionCircuitRestriction"}},[t("option",{attrs:{value:"NONE"}},[e._v("None")]),t("option",{attrs:{value:"RANDOM"}},[e._v("Random")]),t("option",{attrs:{value:"LIMITED"}},[e._v("Limited (Choose circuits...)")])]),"LIMITED"==e.selectedOptionCircuitRestriction?t("div",[t("b-field",{staticClass:"my-4",attrs:{label:"Circuit restriction (Limited)"}},[t("b-autocomplete",{attrs:{placeholder:"Start typing to find a circuit","keep-first":!1,"open-on-focus":!1,data:e.filteredCircuitRestriction,field:"name"},on:{select:t=>e.pushCircuitRestrictionArray(t)},scopedSlots:e._u([{key:"empty",fn:function(){return[e._v('No circuit found with name "'+e._s(e.circuitRestrictionInput)+'"')]},proxy:!0}],null,!1,2892632981),model:{value:e.circuitRestrictionInput,callback:function(t){e.circuitRestrictionInput=t},expression:"circuitRestrictionInput"}})],1),t("div",{staticClass:"message",class:{"is-danger":0==e.circuitRestrictionArray.length}},[0==e.circuitRestrictionArray.length?t("div",{staticClass:"message-body"},[t("p",{staticClass:"is-size-7"},[t("b",[e._v("REQUIRED")]),e._v(". Please, select at least one circuit to restrict.")])]):t("div",{staticClass:"message-body"},[t("p",{staticClass:"is-size-7 mb-3"},[e._v("Restricted to the following circuits:")]),t("b-taglist",e._l(e.circuitRestrictionArray,(function(s){return t("b-tag",{key:"circuit-"+s.id,attrs:{type:"is-primary",closable:!0},on:{close:function(t){return e.removeCircuitFromRestriction(s.id)}}},[e._v(" "+e._s(s.name)+" ")])})),1)],1)])],1):e._e(),t("div",{staticClass:"columns my-2 is-multiline"},[t("div",{staticClass:"column is-6"},[t("BInputNumberWithValidation",{attrs:{rules:"integer|max_value:32|min_value:0",type:"number",label:"Player starting position",help:"Min: 0 / Max: 32"},model:{value:e.playerStartingPosition,callback:function(t){e.playerStartingPosition=t},expression:"playerStartingPosition"}})],1),t("div",{staticClass:"column is-6"},[t("BInputNumberWithValidation",{attrs:{rules:"integer|max_value:31|min_value:-1",type:"number",label:"Opponents Limit",help:"Min: -1 / Max: 31"},model:{value:e.opponentsLimit,callback:function(t){e.opponentsLimit=t},expression:"opponentsLimit"}})],1),t("div",{staticClass:"column is-6"},[t("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0",type:"number",label:"Player MIN level"},model:{value:e.playerMinLevel,callback:function(t){e.playerMinLevel=t},expression:"playerMinLevel"}})],1),t("div",{staticClass:"column is-6"},[t("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0",type:"number",label:"Player MAX level"},model:{value:e.playerMaxLevel,callback:function(t){e.playerMaxLevel=t},expression:"playerMaxLevel"}})],1),t("div",{staticClass:"column is-6"},[t("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0",type:"number",label:"Bike MIN level"},model:{value:e.bikeMinLevel,callback:function(t){e.bikeMinLevel=t},expression:"bikeMinLevel"}})],1),t("div",{staticClass:"column is-6"},[t("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0",type:"number",label:"Bike MAX level"},model:{value:e.bikeMaxLevel,callback:function(t){e.bikeMaxLevel=t},expression:"bikeMaxLevel"}})],1),t("div",{staticClass:"column is-6"},[t("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0",type:"number",label:"Player MIN race"},model:{value:e.playerMinRace,callback:function(t){e.playerMinRace=t},expression:"playerMinRace"}})],1),t("div",{staticClass:"column is-6"},[t("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0",type:"number",label:"Player MAX race"},model:{value:e.playerMaxRace,callback:function(t){e.playerMaxRace=t},expression:"playerMaxRace"}})],1)]),t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-6"},[t("BInputNumberWithValidation",{attrs:{rules:"required|integer|min_value:0",type:"number",label:"Entry cost"},model:{value:e.entryCost,callback:function(t){e.entryCost=t},expression:"entryCost"}})],1),t("div",{staticClass:"column is-6"},[t("BSelectWithValidation",{attrs:{rules:"required",label:"Entry cost currency"},model:{value:e.entryCurrency,callback:function(t){e.entryCurrency=t},expression:"entryCurrency"}},[t("option",{attrs:{value:"1"}},[e._v("Coins")]),t("option",{attrs:{value:"2"}},[e._v("Diamons")]),t("option",{attrs:{value:"3"}},[e._v("Dollars")]),t("option",{attrs:{value:"4"}},[e._v("Race Tickets")])])],1)]),t("BCheckboxesWithValidation",{attrs:{rules:"required",label:"isEntryFeeOnlyOnce"}},[t("b-field",{staticClass:"my-4",attrs:{label:"Is entry free only one"}},[t("b-radio",{attrs:{"native-value":"0"},model:{value:e.isEntryFeeOnlyOnce,callback:function(t){e.isEntryFeeOnlyOnce=t},expression:"isEntryFeeOnlyOnce"}},[e._v("No")]),t("b-radio",{attrs:{"native-value":"1"},model:{value:e.isEntryFeeOnlyOnce,callback:function(t){e.isEntryFeeOnlyOnce=t},expression:"isEntryFeeOnlyOnce"}},[e._v("Yes")])],1)],1),t("div",{staticClass:"card my-3"},[t("div",{staticClass:"card-content"},[t("h5",{staticClass:"title is-5"},[e._v("Prize Class 1")]),t("BSelectWithValidation",{attrs:{rules:"required",label:"Prize type"},model:{value:e.prizeClass1ID,callback:function(t){e.prizeClass1ID=t},expression:"prizeClass1ID"}},[t("option",{attrs:{value:"0"}},[e._v("No prize")]),t("option",{attrs:{value:"1"}},[e._v("Coins")]),t("option",{attrs:{value:"2"}},[e._v("Diamonds")]),t("option",{attrs:{value:"3"}},[e._v("Bike (Select bike...)")]),t("option",{attrs:{value:"4"}},[e._v("Physical Prize (Upload image...)")])]),"0"!==e.prizeClass1ID?t("b-field",{staticClass:"my-4",attrs:{label:"Prize description"}},[t("b-autocomplete",{ref:"prizeClass1DescAutocomplete",attrs:{placeholder:"Start typing to find a name or create a new one","keep-first":!1,"open-on-focus":!1,data:e.filteredStringsPrizeClass1Desc,field:"value",clearable:!0},on:{select:t=>e.prizeClass1DescSelected=t},model:{value:e.prizeClass1DescInput,callback:function(t){e.prizeClass1DescInput=t},expression:"prizeClass1DescInput"}})],1):e._e(),"1"===e.prizeClass1ID||"2"===e.prizeClass1ID?t("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0",type:"number",label:"Amount to win "},model:{value:e.prizeClass1Number,callback:function(t){e.prizeClass1Number=t},expression:"prizeClass1Number"}}):e._e(),"3"===e.prizeClass1ID?t("b-field",{staticClass:"my-4",attrs:{label:"Bike to win"}},[t("b-autocomplete",{ref:"prizeClass1BikeAutocomplete",attrs:{placeholder:"Start typing to find a bike","keep-first":!1,"open-on-focus":!1,data:e.filteredPrizeClass1Bike,field:"name",clearable:!0},on:{select:t=>e.selectPrizeClass1Bike(t)},scopedSlots:e._u([{key:"empty",fn:function(){return[e._v('No bike found with name "'+e._s(e.prizeClass1BikeInput)+'"')]},proxy:!0}],null,!1,2558047978),model:{value:e.prizeClass1BikeInput,callback:function(t){e.prizeClass1BikeInput=t},expression:"prizeClass1BikeInput"}})],1):e._e(),"4"===e.prizeClass1ID&&null!=e.prizeClass1URL?t("div",{staticClass:"box"},[t("label",{staticClass:"label"},[e._v("Prize Class 1 - Picture")]),t("p",{staticClass:"is-size-7 mb-3"},[e._v("(Original picture)")]),t("img",{staticClass:"image mt-3",attrs:{src:`${e.apiUrl}/images/${e.prizeClass1URL}`}}),t("div",{staticClass:"buttons mt-3"},[t("button",{staticClass:"button is-danger is-small",on:{click:function(t){e.prizeClass1URL=null}}},[e._v("Remove")])])]):e._e(),"4"===e.prizeClass1ID&&null==e.prizeClass1URL?t("div",{staticClass:"box"},[t("label",{staticClass:"label"},[e._v("Prize Class 1 - Picture")]),t("p",{staticClass:"is-size-7 mb-3"},[e._v("Only PNG. Minimum size required: 234x129 px.")]),e.prizeClass1ImageResultData?t("div",[t("img",{staticClass:"image",attrs:{src:e.prizeClass1ImageResultData}})]):e._e(),e.prizeClass1Image.src?t("div",{staticClass:"notification-cropper is-size-7"},[e._v(" Please crop the image to the correct."),t("br"),e._v(" You can use the wheel mouse to zoom in and out. ")]):e._e(),e.prizeClass1Image.src?t("cropper",{ref:"cropperPrize1Image",staticClass:"prize-cropper",attrs:{backgroundClass:"cropper-background",canvas:e.theCanvas,"stencil-props":e.theStencil,src:e.prizeClass1Image.src,roundResult:!1},on:{error:function(t){e.prizeClass1ImageLoaded=!1},ready:function(t){e.prizeClass1ImageLoaded=!0}}}):e._e(),e.prizeClass1ImageResultData?e._e():t("div",{staticClass:"buttons mt-3"},[t("button",{staticClass:"button is-small",class:{"is-primary":!e.prizeClass1Image.src,"is-light":e.prizeClass1Image.src},on:{click:function(t){return e.$refs.prizeClass1ImageInput.click()}}},[e.prizeClass1Image.src?t("span",[t("i",{staticClass:"fas fa-undo"}),e._v(" Upload another image")]):t("span",[t("i",{staticClass:"fas fa-search"}),e._v(" Upload file")]),t("input",{ref:"prizeClass1ImageInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/png"},on:{change:function(t){return e.uploadPrizeImage(t,1)}}})]),e.prizeClass1Image.src?t("button",{staticClass:"button is-primary is-small",attrs:{disabled:!e.prizeClass1ImageLoaded},on:{click:function(t){return e.cropPrizeClassImage(1)}}},[t("i",{staticClass:"fas fa-crop"}),e._v(" Crop image")]):e._e()]),e.prizeClass1ImageResultData&&!e.prizeClass1Image.src?t("div",{staticClass:"buttons mt-3"},[t("button",{staticClass:"button is-danger is-small",on:{click:function(t){e.prizeClass1ImageResultData=null}}},[t("i",{staticClass:"fas fa-trash"}),e._v(" Remove image")])]):e._e()],1):e._e(),"0"!==e.prizeClass1ID?t("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0",type:"number",label:"Min Rank to win prize"},model:{value:e.prizeClass1Rank,callback:function(t){e.prizeClass1Rank=t},expression:"prizeClass1Rank"}}):e._e()],1)]),t("div",{staticClass:"card my-3"},[t("div",{staticClass:"card-content"},[t("h5",{staticClass:"title is-5"},[e._v("Prize Class 2")]),t("BSelectWithValidation",{attrs:{rules:"required",label:"Prize type"},model:{value:e.prizeClass2ID,callback:function(t){e.prizeClass2ID=t},expression:"prizeClass2ID"}},[t("option",{attrs:{value:"0"}},[e._v("No prize")]),t("option",{attrs:{value:"1"}},[e._v("Coins")]),t("option",{attrs:{value:"2"}},[e._v("Diamonds")]),t("option",{attrs:{value:"3"}},[e._v("Bike (Select bike...)")]),t("option",{attrs:{value:"4"}},[e._v("Physical Prize (Upload image...)")])]),"0"!==e.prizeClass2ID?t("b-field",{staticClass:"my-4",attrs:{label:"Prize description"}},[t("b-autocomplete",{ref:"prizeClass2DescAutocomplete",attrs:{placeholder:"Start typing to find a name or create a new one","keep-first":!1,"open-on-focus":!1,data:e.filteredStringsPrizeClass2Desc,field:"value",clearable:!0},on:{select:t=>e.prizeClass2DescSelected=t},model:{value:e.prizeClass2DescInput,callback:function(t){e.prizeClass2DescInput=t},expression:"prizeClass2DescInput"}})],1):e._e(),"1"===e.prizeClass2ID||"2"===e.prizeClass2ID?t("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0",type:"number",label:"Amount to win "},model:{value:e.prizeClass2Number,callback:function(t){e.prizeClass2Number=t},expression:"prizeClass2Number"}}):e._e(),"3"===e.prizeClass2ID?t("b-field",{staticClass:"my-4",attrs:{label:"Bike to win"}},[t("b-autocomplete",{ref:"prizeClass2BikeAutocomplete",attrs:{placeholder:"Start typing to find a name","keep-first":!1,"open-on-focus":!1,data:e.filteredPrizeClass2Bike,field:"name"},on:{select:t=>e.selectPrizeClass2Bike(t)},scopedSlots:e._u([{key:"empty",fn:function(){return[e._v('No bike found with name "'+e._s(e.prizeClass2BikeInput)+'"')]},proxy:!0}],null,!1,2990955177),model:{value:e.prizeClass2BikeInput,callback:function(t){e.prizeClass2BikeInput=t},expression:"prizeClass2BikeInput"}})],1):e._e(),"4"===e.prizeClass2ID&&null!=e.prizeClass2URL?t("div",{staticClass:"box"},[t("label",{staticClass:"label"},[e._v("Prize Class 2 - Picture")]),t("p",{staticClass:"is-size-7 mb-3"},[e._v("(Original picture)")]),t("img",{staticClass:"image mt-3",attrs:{src:`${e.apiUrl}/images/${e.prizeClass2URL}`}}),t("div",{staticClass:"buttons mt-3"},[t("button",{staticClass:"button is-danger is-small",on:{click:function(t){e.prizeClass2URL=null}}},[e._v("Remove")])])]):e._e(),"4"===e.prizeClass2ID&&null==e.prizeClass2URL?t("div",{staticClass:"box"},[t("label",{staticClass:"label"},[e._v("Prize Class 2 - Picture")]),t("p",{staticClass:"is-size-7 mb-3"},[e._v("Only PNG. Minimum size required: 234x129 px.")]),e.prizeClass2ImageResultData?t("div",[t("img",{staticClass:"image",attrs:{src:e.prizeClass2ImageResultData}})]):e._e(),e.prizeClass2Image.src?t("div",{staticClass:"notification-cropper is-size-7"},[e._v(" Please crop the image to the correct."),t("br"),e._v(" You can use the wheel mouse to zoom in and out. ")]):e._e(),e.prizeClass2Image.src?t("cropper",{ref:"cropperPrize2Image",staticClass:"prize-cropper",attrs:{backgroundClass:"cropper-background",canvas:e.theCanvas,"stencil-props":e.theStencil,src:e.prizeClass2Image.src,roundResult:!1},on:{error:function(t){e.prizeClass2ImageLoaded=!1},ready:function(t){e.prizeClass2ImageLoaded=!0}}}):e._e(),e.prizeClass2ImageResultData?e._e():t("div",{staticClass:"buttons mt-3"},[t("button",{staticClass:"button is-small",class:{"is-primary":!e.prizeClass2Image.src,"is-light":e.prizeClass2Image.src},on:{click:function(t){return e.$refs.prizeClass2ImageInput.click()}}},[e.prizeClass2Image.src?t("span",[t("i",{staticClass:"fas fa-undo"}),e._v(" Upload another image")]):t("span",[t("i",{staticClass:"fas fa-search"}),e._v(" Upload file")]),t("input",{ref:"prizeClass2ImageInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/png"},on:{change:function(t){return e.uploadPrizeImage(t,2)}}})]),e.prizeClass2Image.src?t("button",{staticClass:"button is-primary is-small",attrs:{disabled:!e.prizeClass2ImageLoaded},on:{click:function(t){return e.cropPrizeClassImage(2)}}},[t("i",{staticClass:"fas fa-crop"}),e._v(" Crop image")]):e._e()]),e.prizeClass2ImageResultData&&!e.prizeClass2Image.src?t("div",{staticClass:"buttons mt-3"},[t("button",{staticClass:"button is-danger is-small",on:{click:function(t){e.prizeClass2ImageResultData=null}}},[t("i",{staticClass:"fas fa-trash"}),e._v(" Remove image")])]):e._e()],1):e._e(),"0"!==e.prizeClass2ID?t("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0",type:"number",label:"Min Rank to win prize"},model:{value:e.prizeClass2Rank,callback:function(t){e.prizeClass2Rank=t},expression:"prizeClass2Rank"}}):e._e()],1)]),t("div",{staticClass:"card my-3"},[t("div",{staticClass:"card-content"},[t("h5",{staticClass:"title is-5"},[e._v("Prize Class 3")]),t("BSelectWithValidation",{attrs:{rules:"required",label:"Prize type"},model:{value:e.prizeClass3ID,callback:function(t){e.prizeClass3ID=t},expression:"prizeClass3ID"}},[t("option",{attrs:{value:"0"}},[e._v("No prize")]),t("option",{attrs:{value:"1"}},[e._v("Coins (Enter amount...)")]),t("option",{attrs:{value:"2"}},[e._v("Diamonds (Enter amount...)")]),t("option",{attrs:{value:"3"}},[e._v("Bike (Select bike...)")]),t("option",{attrs:{value:"4"}},[e._v("Physical Prize (Upload image...)")])]),"0"!==e.prizeClass3ID?t("b-field",{staticClass:"my-4",attrs:{label:"Prize description"}},[t("b-autocomplete",{ref:"prizeClass3DescAutocomplete",attrs:{placeholder:"Start typing to find a name or create a new one","keep-first":!1,"open-on-focus":!1,data:e.filteredStringsPrizeClass3Desc,field:"value",clearable:!0},on:{select:t=>e.prizeClass3DescSelected=t},model:{value:e.prizeClass3DescInput,callback:function(t){e.prizeClass3DescInput=t},expression:"prizeClass3DescInput"}})],1):e._e(),"1"===e.prizeClass3ID||"2"===e.prizeClass3ID?t("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0",type:"number",label:"Amount to win "},model:{value:e.prizeClass3Number,callback:function(t){e.prizeClass3Number=t},expression:"prizeClass3Number"}}):e._e(),"3"===e.prizeClass3ID?t("b-field",{staticClass:"my-4",attrs:{label:"Bike to win"}},[t("b-autocomplete",{ref:"prizeClass3BikeAutocomplete",attrs:{placeholder:"Start typing to find a name","keep-first":!1,"open-on-focus":!1,data:e.filteredPrizeClass3Bike,field:"name"},on:{select:t=>e.selectPrizeClass3Bike(t)},scopedSlots:e._u([{key:"empty",fn:function(){return[e._v('No bike found with name "'+e._s(e.prizeClass3BikeInput)+'"')]},proxy:!0}],null,!1,1229788776),model:{value:e.prizeClass3BikeInput,callback:function(t){e.prizeClass3BikeInput=t},expression:"prizeClass3BikeInput"}})],1):e._e(),"4"===e.prizeClass3ID&&null!=e.prizeClass3URL?t("div",{staticClass:"box"},[t("label",{staticClass:"label"},[e._v("Prize Class 3 - Picture")]),t("p",{staticClass:"is-size-7 mb-3"},[e._v("(Original picture)")]),t("img",{staticClass:"image mt-3",attrs:{src:`${e.apiUrl}/images/${e.prizeClass3URL}`}}),t("div",{staticClass:"buttons mt-3"},[t("button",{staticClass:"button is-danger is-small",on:{click:function(t){e.prizeClass3URL=null}}},[e._v("Remove")])])]):e._e(),"4"===e.prizeClass3ID&&null==e.prizeClass3URL?t("div",{staticClass:"box"},[t("label",{staticClass:"label"},[e._v("Prize Class 3 - Picture")]),t("p",{staticClass:"is-size-7 mb-3"},[e._v("Only PNG. Minimum size required: 234x129 px.")]),e.prizeClass3ImageResultData?t("div",[t("img",{staticClass:"image",attrs:{src:e.prizeClass3ImageResultData}})]):e._e(),e.prizeClass3Image.src?t("div",{staticClass:"notification-cropper is-size-7"},[e._v(" Please crop the image to the correct."),t("br"),e._v(" You can use the wheel mouse to zoom in and out. ")]):e._e(),e.prizeClass3Image.src?t("cropper",{ref:"cropperPrize3Image",staticClass:"prize-cropper",attrs:{backgroundClass:"cropper-background",canvas:e.theCanvas,"stencil-props":e.theStencil,src:e.prizeClass3Image.src,roundResult:!1},on:{error:function(t){e.prizeClass3ImageLoaded=!1},ready:function(t){e.prizeClass3ImageLoaded=!0}}}):e._e(),e.prizeClass3ImageResultData?e._e():t("div",{staticClass:"buttons mt-3"},[t("button",{staticClass:"button is-small",class:{"is-primary":!e.prizeClass3Image.src,"is-light":e.prizeClass3Image.src},on:{click:function(t){return e.$refs.prizeClass3ImageInput.click()}}},[e.prizeClass3Image.src?t("span",[t("i",{staticClass:"fas fa-undo"}),e._v(" Upload another image")]):t("span",[t("i",{staticClass:"fas fa-search"}),e._v(" Upload file")]),t("input",{ref:"prizeClass3ImageInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/png"},on:{change:function(t){return e.uploadPrizeImage(t,3)}}})]),e.prizeClass3Image.src?t("button",{staticClass:"button is-primary is-small",attrs:{disabled:!e.prizeClass3ImageLoaded},on:{click:function(t){return e.cropPrizeClassImage(3)}}},[t("i",{staticClass:"fas fa-crop"}),e._v(" Crop image")]):e._e()]),e.prizeClass3ImageResultData&&!e.prizeClass3Image.src?t("div",{staticClass:"buttons mt-3"},[t("button",{staticClass:"button is-danger is-small",on:{click:function(t){e.prizeClass3ImageResultData=null}}},[t("i",{staticClass:"fas fa-trash"}),e._v(" Remove image")])]):e._e()],1):e._e(),"0"!==e.prizeClass3ID?t("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0",type:"number",label:"Min Rank to win prize"},model:{value:e.prizeClass3Rank,callback:function(t){e.prizeClass3Rank=t},expression:"prizeClass3Rank"}}):e._e()],1)]),t("b-field",{staticClass:"my-4",attrs:{label:"Sponsor Name"}},[t("b-autocomplete",{ref:"sponsorNameAutocomplete",attrs:{placeholder:"Start typing to find a string or create a new one","keep-first":!1,"open-on-focus":!1,data:e.filteredSponsorNameStrings,field:"value"},on:{select:t=>e.sponsorNameSelected=t},scopedSlots:e._u([{key:"empty",fn:function(){return[e._v('No string in MST found with "'+e._s(e.sponsorNameInput)+'"')]},proxy:!0}]),model:{value:e.sponsorNameInput,callback:function(t){e.sponsorNameInput=t},expression:"sponsorNameInput"}})],1),t("b-field",{staticClass:"my-4",attrs:{label:"Sponsor Slogan"}},[t("b-autocomplete",{ref:"sponsorSloganAutocomplete",attrs:{placeholder:"Start typing to find a string or create a new one","keep-first":!1,"open-on-focus":!1,data:e.filteredSponsorSloganStrings,field:"value"},on:{select:t=>e.sponsorSloganSelected=t},scopedSlots:e._u([{key:"empty",fn:function(){return[e._v('No string in MST found with "'+e._s(e.sponsorSloganInput)+'"')]},proxy:!0}]),model:{value:e.sponsorSloganInput,callback:function(t){e.sponsorSloganInput=t},expression:"sponsorSloganInput"}})],1),t("BCheckboxesWithValidation",{attrs:{rules:"required|",label:"filterable"}},[t("b-field",{staticClass:"my-4",attrs:{label:"Filterable?"}},[t("b-radio",{attrs:{"native-value":"0"},model:{value:e.filterable,callback:function(t){e.filterable=t},expression:"filterable"}},[e._v("No")]),t("b-radio",{attrs:{"native-value":"1"},model:{value:e.filterable,callback:function(t){e.filterable=t},expression:"filterable"}},[e._v("Yes")])],1)],1),t("BSelectWithValidation",{attrs:{rules:"required",label:"Rules modifications"},model:{value:e.rulesModification,callback:function(t){e.rulesModification=t},expression:"rulesModification"}},[t("option",{attrs:{value:"NONE"}},[e._v("None")]),t("option",{attrs:{value:"no_coins"}},[e._v("No coins")]),t("option",{attrs:{value:"brakes_2xcombo"}},[e._v("Brakes 2x combo")])]),"4"==e.prizeClass1ID?t("div",{staticClass:"my-4"},[t("BInputWithValidation",{attrs:{rules:"",label:"Helpshift Link Display"},model:{value:e.helpshiftLinkDisplay,callback:function(t){e.helpshiftLinkDisplay=t},expression:"helpshiftLinkDisplay"}})],1):e._e(),t("div",{staticClass:"columns is-multiline my-4"},[t("div",{staticClass:"column is-6"},[t("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0",type:"number",label:"Sort Order"},model:{value:e.sortOrder,callback:function(t){e.sortOrder=t},expression:"sortOrder"}})],1),t("div",{staticClass:"column is-6"},[t("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0",type:"number",label:"Min IAP"},model:{value:e.minIAP,callback:function(t){e.minIAP=t},expression:"minIAP"}})],1),t("div",{staticClass:"column is-6"},[t("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0|max_value:10",type:"number",label:"Worst Division"},model:{value:e.worstDivision,callback:function(t){e.worstDivision=t},expression:"worstDivision"}})],1),t("div",{staticClass:"column is-6"},[t("BInputNumberWithValidation",{attrs:{rules:"integer|min_value:0|max_value:"+(e.worstDivision?e.worstDivision:"10"),type:"number",label:"Best Division"},model:{value:e.bestDivision,callback:function(t){e.bestDivision=t},expression:"bestDivision"}})],1)]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.customValidationErrors.length>0,expression:"customValidationErrors.length > 0"}],staticClass:"message is-danger"},[t("div",{staticClass:"message-body is-clearfix"},[t("i",{staticClass:"fas fa-times-circle is-size-5 is-clickable is-pulled-right",on:{click:function(t){e.customValidationErrors=[]}}}),t("div",{staticClass:"content"},[t("p",[e._v("Please note the following errors:")]),t("ul",e._l(e.customValidationErrors,(function(s,i){return t("li",{key:`error-${i}-${s.slice(0,10)}`},[e._v(e._s(s))])})),0)])])]),t("div",{staticClass:"buttons"},[t("button",{staticClass:"button is-primary is-fullwidth",on:{click:e.handleSubmit}},[t("i",{staticClass:"fas fa-save"}),e._v(" Save")])])],1)],1)},de=[],pe=(s("907a"),s("986a"),s("1d02"),s("3c5d"),s("1b3b"),s("3d71"),s("c6e3"),function(){var e=this,t=e._self._c;return t("ValidationProvider",{attrs:{vid:e.vid,name:e.$attrs.name||e.$attrs.label,rules:e.rules},scopedSlots:e._u([{key:"default",fn:function({errors:s,valid:i}){return[t("b-field",e._b({attrs:{type:{"is-danger":s[0],"is-success":i},message:s}},"b-field",e.$attrs,!1),[t("b-input",e._b({model:{value:e.innerValue,callback:function(t){e.innerValue=e._n(t)},expression:"innerValue"}},"b-input",e.$attrs,!1))],1),e.help?t("div",{staticClass:"message mb-2"},[t("div",{staticClass:"message-body p-2"},[t("p",{staticClass:"is-size-7"},[e._v(e._s(e.help))])])]):e._e()]}}])})}),me=[],he={components:{ValidationProvider:E["b"]},props:{vid:{type:String},rules:{type:[Object,String],default:""},value:{type:null},help:{type:String,default:""}},data:()=>({innerValue:""}),watch:{innerValue(e){this.$emit("input",e)},value(e){this.innerValue=e}},created(){void 0!==this.value&&(this.innerValue=this.value)}},fe=he,Ce=Object(u["a"])(fe,pe,me,!1,null,null,null),be=Ce.exports,ve=function(){var e=this,t=e._self._c;return t("ValidationProvider",{attrs:{vid:e.vid,name:e.$attrs.label,rules:e.rules},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("div",{staticClass:"block"},[e._t("default"),t("p",{staticClass:"has-text-danger"},[e._v(e._s(s[0]))])],2)]}}],null,!0)})},ge=[],ye={components:{ValidationProvider:E["b"]},props:{vid:{type:String},rules:{type:[Object,String],default:""}}},ke=ye,ze=Object(u["a"])(ke,ve,ge,!1,null,null,null),Ie=ze.exports,Se=s("a2c1");const _e=[{name:"Afghanistan",code:"AF"},{name:"Åland Islands",code:"AX"},{name:"Albania",code:"AL"},{name:"Algeria",code:"DZ"},{name:"American Samoa",code:"AS"},{name:"AndorrA",code:"AD"},{name:"Angola",code:"AO"},{name:"Anguilla",code:"AI"},{name:"Antarctica",code:"AQ"},{name:"Antigua and Barbuda",code:"AG"},{name:"Argentina",code:"AR"},{name:"Armenia",code:"AM"},{name:"Aruba",code:"AW"},{name:"Australia",code:"AU"},{name:"Austria",code:"AT"},{name:"Azerbaijan",code:"AZ"},{name:"Bahamas",code:"BS"},{name:"Bahrain",code:"BH"},{name:"Bangladesh",code:"BD"},{name:"Barbados",code:"BB"},{name:"Belarus",code:"BY"},{name:"Belgium",code:"BE"},{name:"Belize",code:"BZ"},{name:"Benin",code:"BJ"},{name:"Bermuda",code:"BM"},{name:"Bhutan",code:"BT"},{name:"Bolivia",code:"BO"},{name:"Bosnia and Herzegovina",code:"BA"},{name:"Botswana",code:"BW"},{name:"Bouvet Island",code:"BV"},{name:"Brazil",code:"BR"},{name:"British Indian Ocean Territory",code:"IO"},{name:"Brunei Darussalam",code:"BN"},{name:"Bulgaria",code:"BG"},{name:"Burkina Faso",code:"BF"},{name:"Burundi",code:"BI"},{name:"Cambodia",code:"KH"},{name:"Cameroon",code:"CM"},{name:"Canada",code:"CA"},{name:"Cape Verde",code:"CV"},{name:"Cayman Islands",code:"KY"},{name:"Central African Republic",code:"CF"},{name:"Chad",code:"TD"},{name:"Chile",code:"CL"},{name:"China",code:"CN"},{name:"Christmas Island",code:"CX"},{name:"Cocos (Keeling) Islands",code:"CC"},{name:"Colombia",code:"CO"},{name:"Comoros",code:"KM"},{name:"Congo",code:"CG"},{name:"Congo, The Democratic Republic of the",code:"CD"},{name:"Cook Islands",code:"CK"},{name:"Costa Rica",code:"CR"},{name:'Cote D"Ivoire',code:"CI"},{name:"Croatia",code:"HR"},{name:"Cuba",code:"CU"},{name:"Cyprus",code:"CY"},{name:"Czech Republic",code:"CZ"},{name:"Denmark",code:"DK"},{name:"Djibouti",code:"DJ"},{name:"Dominica",code:"DM"},{name:"Dominican Republic",code:"DO"},{name:"Ecuador",code:"EC"},{name:"Egypt",code:"EG"},{name:"El Salvador",code:"SV"},{name:"Equatorial Guinea",code:"GQ"},{name:"Eritrea",code:"ER"},{name:"Estonia",code:"EE"},{name:"Ethiopia",code:"ET"},{name:"Falkland Islands (Malvinas)",code:"FK"},{name:"Faroe Islands",code:"FO"},{name:"Fiji",code:"FJ"},{name:"Finland",code:"FI"},{name:"France",code:"FR"},{name:"French Guiana",code:"GF"},{name:"French Polynesia",code:"PF"},{name:"French Southern Territories",code:"TF"},{name:"Gabon",code:"GA"},{name:"Gambia",code:"GM"},{name:"Georgia",code:"GE"},{name:"Germany",code:"DE"},{name:"Ghana",code:"GH"},{name:"Gibraltar",code:"GI"},{name:"Greece",code:"GR"},{name:"Greenland",code:"GL"},{name:"Grenada",code:"GD"},{name:"Guadeloupe",code:"GP"},{name:"Guam",code:"GU"},{name:"Guatemala",code:"GT"},{name:"Guernsey",code:"GG"},{name:"Guinea",code:"GN"},{name:"Guinea-Bissau",code:"GW"},{name:"Guyana",code:"GY"},{name:"Haiti",code:"HT"},{name:"Heard Island and Mcdonald Islands",code:"HM"},{name:"Holy See (Vatican City State)",code:"VA"},{name:"Honduras",code:"HN"},{name:"Hong Kong",code:"HK"},{name:"Hungary",code:"HU"},{name:"Iceland",code:"IS"},{name:"India",code:"IN"},{name:"Indonesia",code:"ID"},{name:"Iran, Islamic Republic Of",code:"IR"},{name:"Iraq",code:"IQ"},{name:"Ireland",code:"IE"},{name:"Isle of Man",code:"IM"},{name:"Israel",code:"IL"},{name:"Italy",code:"IT"},{name:"Jamaica",code:"JM"},{name:"Japan",code:"JP"},{name:"Jersey",code:"JE"},{name:"Jordan",code:"JO"},{name:"Kazakhstan",code:"KZ"},{name:"Kenya",code:"KE"},{name:"Kiribati",code:"KI"},{name:'Korea, Democratic People"S Republic of',code:"KP"},{name:"Korea, Republic of",code:"KR"},{name:"Kuwait",code:"KW"},{name:"Kyrgyzstan",code:"KG"},{name:'Lao People"S Democratic Republic',code:"LA"},{name:"Latvia",code:"LV"},{name:"Lebanon",code:"LB"},{name:"Lesotho",code:"LS"},{name:"Liberia",code:"LR"},{name:"Libyan Arab Jamahiriya",code:"LY"},{name:"Liechtenstein",code:"LI"},{name:"Lithuania",code:"LT"},{name:"Luxembourg",code:"LU"},{name:"Macao",code:"MO"},{name:"Macedonia, The Former Yugoslav Republic of",code:"MK"},{name:"Madagascar",code:"MG"},{name:"Malawi",code:"MW"},{name:"Malaysia",code:"MY"},{name:"Maldives",code:"MV"},{name:"Mali",code:"ML"},{name:"Malta",code:"MT"},{name:"Marshall Islands",code:"MH"},{name:"Martinique",code:"MQ"},{name:"Mauritania",code:"MR"},{name:"Mauritius",code:"MU"},{name:"Mayotte",code:"YT"},{name:"Mexico",code:"MX"},{name:"Micronesia, Federated States of",code:"FM"},{name:"Moldova, Republic of",code:"MD"},{name:"Monaco",code:"MC"},{name:"Mongolia",code:"MN"},{name:"Montserrat",code:"MS"},{name:"Morocco",code:"MA"},{name:"Mozambique",code:"MZ"},{name:"Myanmar",code:"MM"},{name:"Namibia",code:"NA"},{name:"Nauru",code:"NR"},{name:"Nepal",code:"NP"},{name:"Netherlands",code:"NL"},{name:"Netherlands Antilles",code:"AN"},{name:"New Caledonia",code:"NC"},{name:"New Zealand",code:"NZ"},{name:"Nicaragua",code:"NI"},{name:"Niger",code:"NE"},{name:"Nigeria",code:"NG"},{name:"Niue",code:"NU"},{name:"Norfolk Island",code:"NF"},{name:"Northern Mariana Islands",code:"MP"},{name:"Norway",code:"NO"},{name:"Oman",code:"OM"},{name:"Pakistan",code:"PK"},{name:"Palau",code:"PW"},{name:"Palestinian Territory, Occupied",code:"PS"},{name:"Panama",code:"PA"},{name:"Papua New Guinea",code:"PG"},{name:"Paraguay",code:"PY"},{name:"Peru",code:"PE"},{name:"Philippines",code:"PH"},{name:"Pitcairn",code:"PN"},{name:"Poland",code:"PL"},{name:"Portugal",code:"PT"},{name:"Puerto Rico",code:"PR"},{name:"Qatar",code:"QA"},{name:"Reunion",code:"RE"},{name:"Romania",code:"RO"},{name:"Russian Federation",code:"RU"},{name:"RWANDA",code:"RW"},{name:"Saint Helena",code:"SH"},{name:"Saint Kitts and Nevis",code:"KN"},{name:"Saint Lucia",code:"LC"},{name:"Saint Pierre and Miquelon",code:"PM"},{name:"Saint Vincent and the Grenadines",code:"VC"},{name:"Samoa",code:"WS"},{name:"San Marino",code:"SM"},{name:"Sao Tome and Principe",code:"ST"},{name:"Saudi Arabia",code:"SA"},{name:"Senegal",code:"SN"},{name:"Serbia and Montenegro",code:"CS"},{name:"Seychelles",code:"SC"},{name:"Sierra Leone",code:"SL"},{name:"Singapore",code:"SG"},{name:"Slovakia",code:"SK"},{name:"Slovenia",code:"SI"},{name:"Solomon Islands",code:"SB"},{name:"Somalia",code:"SO"},{name:"South Africa",code:"ZA"},{name:"South Georgia and the South Sandwich Islands",code:"GS"},{name:"Spain",code:"ES"},{name:"Sri Lanka",code:"LK"},{name:"Sudan",code:"SD"},{name:"Suriname",code:"SR"},{name:"Svalbard and Jan Mayen",code:"SJ"},{name:"Swaziland",code:"SZ"},{name:"Sweden",code:"SE"},{name:"Switzerland",code:"CH"},{name:"Syrian Arab Republic",code:"SY"},{name:"Taiwan",code:"TW"},{name:"Tajikistan",code:"TJ"},{name:"Tanzania, United Republic of",code:"TZ"},{name:"Thailand",code:"TH"},{name:"Timor-Leste",code:"TL"},{name:"Togo",code:"TG"},{name:"Tokelau",code:"TK"},{name:"Tonga",code:"TO"},{name:"Trinidad and Tobago",code:"TT"},{name:"Tunisia",code:"TN"},{name:"Turkey",code:"TR"},{name:"Turkmenistan",code:"TM"},{name:"Turks and Caicos Islands",code:"TC"},{name:"Tuvalu",code:"TV"},{name:"Uganda",code:"UG"},{name:"Ukraine",code:"UA"},{name:"United Arab Emirates",code:"AE"},{name:"United Kingdom",code:"GB"},{name:"United States",code:"US"},{name:"United States Minor Outlying Islands",code:"UM"},{name:"Uruguay",code:"UY"},{name:"Uzbekistan",code:"UZ"},{name:"Vanuatu",code:"VU"},{name:"Venezuela",code:"VE"},{name:"Viet Nam",code:"VN"},{name:"Virgin Islands, British",code:"VG"},{name:"Virgin Islands, U.S.",code:"VI"},{name:"Wallis and Futuna",code:"WF"},{name:"Western Sahara",code:"EH"},{name:"Yemen",code:"YE"},{name:"Zambia",code:"ZM"},{name:"Zimbabwe",code:"ZW"}];var De={props:{edit:{type:Boolean,default:!1},strings:{type:Array,default:()=>[]},bikes:{type:Array,default:()=>[]},circuits:{type:Array,default:()=>[]},tournament:{type:Object,default:()=>{}}},components:{ValidationObserver:E["a"],ValidationProvider:E["b"],BSelectWithValidation:G,BInputWithValidation:J,BInputNumberWithValidation:be,BCheckboxesWithValidation:Ie,Cropper:Se["a"]},data(){return{initializated:!1,nameInput:"",nameSelected:null,countryWhitelistInput:"",countryBlacklistInput:"",countryWhitelistArray:[],countryBlacklistArray:[],bikeRestrictionInput:"",bikeRestrictionArray:[],bikeProvidedInput:"",bikeProvidedSelected:null,selectedOptionCircuitRestriction:"NONE",circuitRestrictionInput:"",circuitRestrictionArray:[],prizeClass1DescInput:"",prizeClass1DescSelected:null,prizeClass1BikeInput:"",prizeClass1BikeSelected:null,prizeClass2DescInput:"",prizeClass2DescSelected:null,prizeClass3DescInput:"",prizeClass3DescSelected:null,prizeClass1Image:{src:null,type:null},prizeClass1ImageLoaded:!1,prizeClass1ImageResultData:null,prizeClass2Image:{src:null,type:null},prizeClass2ImageLoaded:!1,prizeClass2ImageResultData:null,prizeClass3Image:{src:null,type:null},prizeClass3ImageLoaded:!1,prizeClass3ImageResultData:null,theCanvas:{minHeight:129,maxHeight:129,maxWidth:234,minWidth:234},theStencil:{aspectRatio:78/43},sponsorNameInput:"",sponsorNameSelected:null,sponsorSloganInput:"",sponsorSloganSelected:null,isLoading:!1,customValidationErrors:[],warningEdits:[],id:null,startTimestamp:null,endTimestamp:null,timeOffsetHours:null,restartFrequency:null,duration:null,lastEntryInMinutes:null,isActivated:"0",bikeRestriction:"NONE",isBikeUpgradesAllowed:"1",isCompulsivesAllowed:"ALL",winningCondition:"1",scoreDisplay:"0",lapLimit:0,playerStartingPosition:null,opponentsLimit:null,playerMaxLevel:null,playerMinLevel:null,bikeMaxLevel:null,bikeMinLevel:null,playerMaxRace:null,playerMinRace:null,entryCost:0,entryCurrency:"1",isEntryFeeOnlyOnce:"0",prizeClass1ID:"0",prizeClass1Desc:null,prizeClass1URL:null,prizeClass1Number:null,prizeClass1Rank:null,prizeClass2ID:"0",prizeClass2Desc:null,prizeClass2URL:null,prizeClass2Number:null,prizeClass2Rank:null,prizeClass3ID:"0",prizeClass3Desc:null,prizeClass3URL:null,prizeClass3Number:null,prizeClass3Rank:null,filterable:"1",rulesModification:"none",helpshiftLinkDisplay:"",sortOrder:"0",minIAP:"0",worstDivision:"10",bestDivision:"1"}},beforeMount(){this.edit?this.loadTournamentData():this.initializated=!0},mounted(){this.edit&&this.updateRefs()},destroyed(){this.prizeClass1Image.src&&URL.revokeObjectURL(this.prizeClass1Image.src),this.prizeClass2Image.src&&URL.revokeObjectURL(this.prizeClass2Image.src),this.prizeClass3Image.src&&URL.revokeObjectURL(this.prizeClass3Image.src)},methods:{handleSubmit(){this.customValidationErrors=[],this.$refs.observer.validate().then(e=>{e||(this.showErrorNotification("Some fields are invalid or missing, please check the form"),this.customValidationErrors.push("Some fields are invalid or missing, please check the form"))}).then(()=>{let e=!1;return null==this.nameSelected&&""==this.nameInput&&(this.customValidationErrors.push("Tournament name not selected or defined: You must select a string from the MST or define a new one"),e=!0),null==this.startTimestamp&&(this.customValidationErrors.push("Start date not selected: You must select a date"),e=!0),null==this.endTimestamp&&(this.customValidationErrors.push("End date not selected: You must select a date"),e=!0),"PROVIDED"===this.bikeRestriction&&(this.bikeProvidedSelected||(this.customValidationErrors.push("Bike restriction not selected: You must provide a bike to restrict"),e=!0)),"SELECT"===this.bikeRestriction&&0===this.bikeRestrictionArray.length&&(this.customValidationErrors.push("Bike restriction not selected: You must select at least one bike"),e=!0),"LIMITED"===this.selectedOptionCircuitRestriction&&0===this.circuitRestrictionArray.length&&(this.customValidationErrors.push("Circuit restriction not selected: You must select at least one circuit"),e=!0),"1"===this.prizeClass1ID||"2"===this.prizeClass1ID?this.prizeClass1Number||(this.customValidationErrors.push("Prize 1: No prize amount given - You must enter a value"),e=!0):"3"===this.prizeClass1ID&&(this.prizeClass1BikeSelected||(this.customValidationErrors.push("Prize 1: No bike selected: You must select a bike as a prize"),e=!0)),"1"===this.prizeClass2ID||"2"===this.prizeClass2ID?this.prizeClass2Number||(this.customValidationErrors.push("Prize 2: No prize amount given - You must enter a value"),e=!0):"3"===this.prizeClass2ID&&(this.prizeClass2BikeSelected||(this.customValidationErrors.push("Prize 2: No bike selected: You must select a bike as a prize"),e=!0)),"1"===this.prizeClass3ID||"2"===this.prizeClass3ID?this.prizeClass3Number||(this.customValidationErrors.push("Prize 3: No prize amount given - You must enter a value"),e=!0):"3"===this.prizeClass3ID&&(this.prizeClass3BikeSelected||(this.customValidationErrors.push("Prize 3: No bike selected: You must select a bike as a prize"),e=!0)),e}).then(e=>{e?this.showErrorNotification("Some fields are invalid or missing, please check the form"):this.makePayload()}).catch(e=>{this.showErrorNotification(e.message?e.message:"Validation failed, please check the form"),console.error(e)})},makePayload(){const e={};this.nameInput&&null==this.nameSelected?e.name="*"+this.nameInput:e.name=this.nameSelected.name,e.startTimestamp=this.startTimestamp.getTime()/1e3,e.endTimestamp=this.endTimestamp.getTime()/1e3,e.restartFrequency=parseInt(this.restartFrequency),e.duration=parseInt(this.duration),this.timeOffsetHours&&(e.timeOffsetHours=parseInt(this.timeOffsetHours)),this.lastEntryInMinutes&&(e.lastEntryInMinutes=parseInt(this.lastEntryInMinutes)),e.isActivated=parseInt(this.isActivated),this.countryWhitelistArray.length>0?e.countryWhiteList=this.countryWhitelistArray.map(e=>e.code).join("|"):e.countryWhiteList="ALL",this.countryBlacklistArray.length>0&&(e.countryBlackList=this.countryBlacklistArray.map(e=>e.code).join("|")),"SELECT"===this.bikeRestriction?e.bikeRestriction=this.bikeRestrictionArray.map(e=>e.id).join("|"):"PROVIDED"===this.bikeRestriction&&this.bikeProvidedSelected?e.bikeProvided=this.bikeProvidedSelected.id:"PRO TEAM"===this.bikeRestriction?e.bikeRestriction="Pro Team":e.bikeRestriction=this.bikeRestriction,e.isBikeUpgradesAllowed=parseInt(this.isBikeUpgradesAllowed),e.isCompulsivesAllowed=this.isCompulsivesAllowed,e.winningCondition=parseInt(this.winningCondition),e.scoreDisplay=parseInt(this.scoreDisplay),this.lapLimit&&(e.lapLimit=parseInt(this.lapLimit)),"LIMITED"===this.selectedOptionCircuitRestriction&&this.circuitRestrictionArray.length>0?e.circuitRestriction=this.circuitRestrictionArray.map(e=>e.id).join("|"):"NONE"===this.selectedOptionCircuitRestriction?e.circuitRestriction="":"RANDOM"===this.selectedOptionCircuitRestriction&&(e.circuitRestriction="RANDOM"),this.isOptional(this.playerStartingPosition)&&(e.playerStartingPosition=parseInt(this.playerStartingPosition)),this.isOptional(this.opponentsLimit)&&(e.opponentsLimit=parseInt(this.opponentsLimit)),this.isOptional(this.playerMaxLevel)&&(e.playerMaxLevel=parseInt(this.playerMaxLevel)),this.isOptional(this.playerMinLevel)&&(e.playerMinLevel=parseInt(this.playerMinLevel)),this.isOptional(this.bikeMaxLevel)&&(e.bikeMaxLevel=parseInt(this.bikeMaxLevel)),this.isOptional(this.bikeMinLevel)&&(e.bikeMinLevel=parseInt(this.bikeMinLevel)),this.isOptional(this.playerMaxRace)&&(e.playerMaxRace=parseInt(this.playerMaxRace)),this.isOptional(this.playerMinRace)&&(e.playerMinRace=parseInt(this.playerMinRace)),e.entryCost=parseInt(this.entryCost),e.entryCurrency=parseInt(this.entryCurrency),e.isEntryFeeOnlyOnce=parseInt(this.isEntryFeeOnlyOnce),e.prizeClass1ID=parseInt(this.prizeClass1ID),"0"!==this.prizeClass1ID&&(""!=this.prizeClass1DescInput&&null==this.prizeClass1DescSelected?e.prizeClass1Desc="*"+this.prizeClass1DescInput:null!=this.prizeClass1DescSelected&&(e.prizeClass1Desc=this.prizeClass1DescSelected.name),"1"===this.prizeClass1ID||"2"===this.prizeClass1ID?e.prizeClass1Number=parseInt(this.prizeClass1Number):"3"===this.prizeClass1ID?e.prizeClass1Number=parseInt(this.prizeClass1BikeSelected.id):"4"===this.prizeClass1ID&&(this.prizeClass1ImageResultData?e.prizeClass1URL=this.prizeClass1ImageResultData:this.prizeClass1URL&&(e.prizeClass1URL=this.prizeClass1URL)),this.isOptional(this.prizeClass1Rank)&&(e.prizeClass1Rank=parseInt(this.prizeClass1Rank))),e.prizeClass2ID=parseInt(this.prizeClass2ID),"0"!==this.prizeClass2ID&&(""!=this.prizeClass2DescInput&&null==this.prizeClass2DescSelected?e.prizeClass2Desc="*"+this.prizeClass2DescInput:null!=this.prizeClass2DescSelected&&(e.prizeClass2Desc=this.prizeClass2DescSelected.name),"1"===this.prizeClass2ID||"2"===this.prizeClass2ID?e.prizeClass2Number=parseInt(this.prizeClass2Number):"3"===this.prizeClass2ID?e.prizeClass2Number=parseInt(this.prizeClass2BikeSelected.id):"4"===this.prizeClass2ID&&(this.prizeClass2ImageResultData?e.prizeClass2URL=this.prizeClass2ImageResultData:this.prizeClass2URL&&(e.prizeClass2URL=this.prizeClass2URL)),this.isOptional(this.prizeClass2Rank)&&(e.prizeClass2Rank=parseInt(this.prizeClass2Rank))),e.prizeClass3ID=parseInt(this.prizeClass3ID),"0"!==this.prizeClass3ID&&(""!=this.prizeClass3DescInput&&null==this.prizeClass3DescSelected?e.prizeClass3Desc="*"+this.prizeClass3DescInput:null!=this.prizeClass3DescSelected&&(e.prizeClass3Desc=this.prizeClass3DescSelected.name),"1"===this.prizeClass3ID||"2"===this.prizeClass3ID?e.prizeClass3Number=parseInt(this.prizeClass3Number):"3"===this.prizeClass3ID?e.prizeClass3Number=parseInt(this.prizeClass3BikeSelected.id):"4"===this.prizeClass3ID&&(this.prizeClass3ImageResultData?e.prizeClass3URL=this.prizeClass3ImageResultData:this.prizeClass3URL&&(e.prizeClass3URL=this.prizeClass3URL)),this.isOptional(this.prizeClass3Rank)&&(e.prizeClass3Rank=parseInt(this.prizeClass3Rank))),null!=this.sponsorNameSelected?e.sponsorName=this.sponsorNameSelected.name:""!=this.sponsorNameInput&&null==this.sponsorNameSelected?e.sponsorName="*"+this.sponsorNameInput:e.sponsorName="",null!=this.sponsorNameSelected?e.sponsorSlogan=this.sponsorSloganSelected.name:""!=this.sponsorSloganInput||null!=this.sponsorSloganSelected?e.sponsorSlogan="*"+this.sponsorSloganInput:e.sponsorSlogan="",e.filterable=parseInt(this.filterable),e.rulesModification=this.rulesModification,"4"===this.prizeClass1ID&&this.isOptional(this.helpshiftLinkDisplay)&&(e.helpshiftLinkDisplay=this.helpshiftLinkDisplay),this.isOptional(this.sortOrder)&&(e.sortOrder=parseInt(this.sortOrder)),this.isOptional(this.minIAP)&&(e.minIAP=parseInt(this.minIAP)),this.isOptional(this.worstDivision)&&(e.worstDivision=parseInt(this.worstDivision)),this.isOptional(this.bestDivision)&&(e.bestDivision=parseInt(this.bestDivision)),this.$emit("submit",e)},loadTournamentData(){if(this.id=this.tournament.id,void 0!==this.tournament.name)if("*"===this.tournament.name[0])this.nameInput=this.tournament.name.slice(1);else{let e=this.strings.find(e=>e.name===this.tournament.name);void 0===e?this.warningEdits.push(`Tournament name "${this.tournament.name}" is not a custom string and is not in the MST list. Please assign a correct string or write a new custom name.`):(this.nameSelected=e,this.nameInput=e.value)}if(void 0!=this.tournament.isActivated&&(this.isActivated=this.tournament.isActivated.toString()),this.tournament.startTimestamp){let e=new Date(this.tournament.startTimestamp);this.startTimestamp=e}if(this.tournament.endTimestamp){let e=new Date(this.tournament.endTimestamp);this.endTimestamp=e}if(void 0!=this.tournament.timeOffsetHours&&(this.timeOffsetHours=this.tournament.timeOffsetHours.toString()),void 0!=this.tournament.lastEntryInMinutes&&(this.lastEntryInMinutes=this.tournament.lastEntryInMinutes.toString()),void 0!=this.tournament.restartFrequency&&(this.restartFrequency=this.tournament.restartFrequency.toString()),void 0!=this.tournament.duration&&(this.duration=this.tournament.duration.toString()),"ALL"!=this.tournament.countryWhiteList&&void 0!=this.tournament.countryWhiteList&&""!=this.tournament.countryWhiteList){let e=this.tournament.countryWhiteList.split("|");this.countryWhitelistArray=e.map(e=>{let t=_e.find(t=>t.code===e);return void 0===t?(this.warningEdits.push(`Country code "${e}" for the "countryWhiteList" not found. Might be a wrong country code or not in the countries list. Please check with admin.`),{code:e,name:"?????????"}):t})}if("ALL"!=this.tournament.countryBlackList&&void 0!=this.tournament.countryBlackList&&""!=this.tournament.countryBlackList){let e=this.tournament.countryBlackList.split("|");this.countryBlacklistArray=e.map(e=>{let t=_e.find(t=>t.code===e);return void 0===t?(this.warningEdits.push(`Country code "${e}" for the "countryBlackList" not found. Might be a wrong country code or not in the countries list. Please check with admin.`),{code:e,name:"?????????"}):t})}if(void 0!=this.tournament.bikeRestriction){const e=this.tournament.bikeRestriction.toUpperCase();let t=["NONE","OPEN","TEAM","PRO TEAM","PROVIDED"];if(t.includes(e)&&(this.bikeRestriction="PRO TEAM"===e?"Pro Team":e),"PROVIDED"===e&&0!==this.tournament.bikeProvided){let e=this.bikes.find(e=>e.id==this.tournament.bikeProvided);void 0===e?this.warningEdits.push(`Bike ID "${this.tournament.bikeProvided}" for the "bikeProvided" not found. Might be a wrong bike ID or not in the bikes list. Please check with admin.`):(this.bikeProvidedSelected=e,this.bikeProvidedInput=e.name)}if(this.stringHasDigits(e)){let e=this.tournament.bikeRestriction.split("|");this.bikeRestriction="SELECT",this.bikeRestrictionArray=e.map(e=>{let t=this.bikes.find(t=>t.id==e);return void 0===t?(this.warningEdits.push(`Bike ID "${e}" for the "bikeRestriction" not found. Might be a wrong bike ID or not in the bikes list. Please check with admin.`),{id:e,name:"?????????"}):t})}}if(void 0!=this.tournament.isBikeUpgradesAllowed&&(this.isBikeUpgradesAllowed=this.tournament.isBikeUpgradesAllowed.toString()),void 0!=this.tournament.isCompulsivesAllowed&&(this.isCompulsivesAllowed=this.tournament.isCompulsivesAllowed.toString()),void 0!=this.tournament.winningCondition&&(this.winningCondition=this.tournament.winningCondition.toString()),void 0!=this.tournament.scoreDisplay&&(this.scoreDisplay=this.tournament.scoreDisplay.toString()),void 0!=this.tournament.lapLimit&&(this.lapLimit=this.tournament.lapLimit.toString()),void 0!=this.tournament.circuitRestriction){let e=this.tournament.circuitRestriction.toUpperCase();if("RANDOM"===e)this.selectedOptionCircuitRestriction="RANDOM";else if(""===e)this.selectedOptionCircuitRestriction="NONE";else if(this.stringHasDigits(this.tournament.circuitRestriction)){this.selectedOptionCircuitRestriction="LIMITED";let e=this.tournament.circuitRestriction.split("|");this.circuitRestrictionArray=e.map(e=>{let t=this.circuits.find(t=>t.id==e);return void 0===t?(this.warningEdits.push(`Circuit ID "${e}" for the "circuitRestriction" not found. Might be a wrong circuit ID or not in the circuits list. Please check with admin.`),{id:e,name:"?????????"}):t})}}if(void 0!=this.tournament.playerStartingPosition&&(this.playerStartingPosition=this.tournament.playerStartingPosition.toString()),void 0!=this.tournament.opponentsLimit&&(this.opponentsLimit=this.tournament.opponentsLimit.toString()),void 0!=this.tournament.playerMinLevel&&(this.playerMinLevel=this.tournament.playerMinLevel.toString()),void 0!=this.tournament.playerMaxLevel&&(this.playerMaxLevel=this.tournament.playerMaxLevel.toString()),void 0!=this.tournament.bikeMinLevel&&(this.bikeMinLevel=this.tournament.bikeMinLevel.toString()),void 0!=this.tournament.bikeMaxLevel&&(this.bikeMaxLevel=this.tournament.bikeMaxLevel.toString()),void 0!=this.tournament.playerMinRace&&(this.playerMinRace=this.tournament.playerMinRace.toString()),void 0!=this.tournament.playerMaxRace&&(this.playerMaxRace=this.tournament.playerMaxRace.toString()),void 0!=this.tournament.entryCost&&(this.entryCost=this.tournament.entryCost.toString()),void 0!=this.tournament.entryCurrency&&(this.entryCurrency=this.tournament.entryCurrency.toString()),void 0!=this.tournament.isEntryFeeOnlyOnce&&(this.isEntryFeeOnlyOnce=this.tournament.isEntryFeeOnlyOnce.toString()),void 0!==this.tournament.prizeClass1ID){if(this.prizeClass1ID=this.tournament.prizeClass1ID.toString(),3===this.tournament.prizeClass1ID){let e=this.bikes.find(e=>e.id==this.tournament.prizeClass1Number);void 0===e?this.warningEdits.push(`Bike ID "${this.tournament.prizeClass1Number}" for the "prizeClass1Number" not found. Might be a wrong bike ID or not in the bikes list. Please check with admin.`):(this.prizeClass1BikeSelected=e,this.prizeClass1BikeInput=e.name)}4===this.tournament.prizeClass1ID&&this.tournament.prizeClass1URL&&(this.prizeClass1URL=this.tournament.prizeClass1URL)}if(void 0!==this.tournament.prizeClass1Desc)if(""===this.tournament.prizeClass1Desc)this.prizeClass1DescInput="";else if("*"===this.tournament.prizeClass1Desc[0])this.prizeClass1DescInput=this.tournament.prizeClass1Desc.slice(1);else{let e=this.strings.find(e=>e.name===this.tournament.prizeClass1Desc);void 0===e?this.warningEdits.push(`String "${this.tournament.prizeClass1Desc}" for the "prizeClass1Desc" not found. Might be a wrong string or not in the strings list. Please check with admin.`):(this.prizeClass1DescSelected=e,this.prizeClass1DescInput=e.value)}if(void 0!==this.tournament.prizeClass1Number&&(this.prizeClass1Number=this.tournament.prizeClass1Number.toString()),void 0!==this.tournament.prizeClass1Rank&&(this.prizeClass1Rank=this.tournament.prizeClass1Rank.toString()),void 0!==this.tournament.prizeClass2ID){if(this.prizeClass2ID=this.tournament.prizeClass2ID.toString(),3===this.tournament.prizeClass2ID){let e=this.bikes.find(e=>e.id==this.tournament.prizeClass1Number);void 0===e?this.warningEdits.push(`Bike ID "${this.tournament.prizeClass2Number}" for the "prizeClass2Number" not found. Might be a wrong bike ID or not in the bikes list. Please check with admin.`):(this.prizeClass2BikeSelected=e,this.prizeClass2BikeInput=e.name)}4===this.tournament.prizeClass2ID&&(this.prizeClass2URL=this.tournament.prizeClass2URL)}if(void 0!==this.tournament.prizeClass2Desc)if(""===this.tournament.prizeClass2Desc)this.prizeClass2DescInput="";else if("*"===this.tournament.prizeClass2Desc[0])this.prizeClass2DescInput=this.tournament.prizeClass2Desc.slice(1);else{let e=this.strings.find(e=>e.name===this.tournament.prizeClass2Desc);void 0===e?this.warningEdits.push(`String "${this.tournament.prizeClass2Desc}" for the "prizeClass2Desc" not found. Might be a wrong string or not in the strings list. Please check with admin.`):(this.prizeClass2DescSelected=e,this.prizeClass2DescInput=e.value)}if(void 0!==this.tournament.prizeClass2Number&&(this.prizeClass2Number=this.tournament.prizeClass2Number.toString()),void 0!==this.tournament.prizeClass2Rank&&(this.prizeClass2Rank=this.tournament.prizeClass2Rank.toString()),void 0!==this.tournament.prizeClass3ID){if(this.prizeClass3ID=this.tournament.prizeClass3ID.toString(),3===this.tournament.prizeClass3ID){let e=this.bikes.find(e=>e.id==this.tournament.prizeClass1Number);void 0===e?this.warningEdits.push(`Bike ID "${this.tournament.prizeClass3Number}" for the "prizeClass3Number" not found. Might be a wrong bike ID or not in the bikes list. Please check with admin.`):(this.prizeClass3BikeSelected=e,this.prizeClass3BikeInput=e.name)}4===this.tournament.prizeClass3ID&&(this.prizeClass3URL=this.tournament.prizeClass3URL)}if(void 0!==this.tournament.prizeClass3Desc)if(""===this.tournament.prizeClass3Desc)this.prizeClass3DescInput="";else if("*"===this.tournament.prizeClass3Desc[0])this.prizeClass3DescInput=this.tournament.prizeClass3Desc.slice(1);else{let e=this.strings.find(e=>e.name===this.tournament.prizeClass3Desc);void 0===e?this.warningEdits.push(`String "${this.tournament.prizeClass3Desc}" for the "prizeClass3Desc" not found. Might be a wrong string or not in the strings list. Please check with admin.`):(this.prizeClass3DescSelected=e,this.prizeClass3DescInput=e.value)}if(void 0!==this.tournament.prizeClass3Number&&(this.prizeClass3Number=this.tournament.prizeClass3Number.toString()),void 0!==this.tournament.prizeClass3Rank&&(this.prizeClass3Rank=this.tournament.prizeClass3Rank.toString()),void 0!==this.tournament.sponsorName)if(""===this.tournament.sponsorName)this.sponsorNameInput="";else if("*"===this.tournament.sponsorName[0])this.sponsorNameInput=this.tournament.sponsorName.slice(1);else{let e=this.strings.find(e=>e.name===this.tournament.sponsorName);void 0===e?this.warningEdits.push(`String "${this.tournament.sponsorName}" for the "sponsorName" not found. Might be a wrong string or not in the strings list. Please check with admin.`):(this.sponsorNameSelected=e,this.sponsorNameInput=e.value)}if(void 0!==this.tournament.sponsorSlogan)if(""===this.tournament.sponsorSlogan)this.sponsorSloganInput="";else if("*"===this.tournament.sponsorSlogan[0])this.sponsorSloganInput=this.tournament.sponsorSlogan.slice(1);else{let e=this.strings.find(e=>e.name===this.tournament.sponsorSlogan);void 0===e?this.warningEdits.push(`String "${this.tournament.sponsorSlogan}" for the "sponsorSlogan" not found. Might be a wrong string or not in the strings list. Please check with admin.`):(this.sponsorSloganSelected=e,this.sponsorSloganInput=e.value)}void 0!=this.tournament.filterable&&(this.filterable=this.tournament.filterable.toString()),void 0!=this.tournament.rulesModification&&("none"===this.tournament.rulesModification.toLowerCase()?this.rulesModification="NONE":this.rulesModification=this.tournament.rulesModification.toString()),void 0!=this.tournament.helpshiftLinkDisplay&&(this.helpshiftLinkDisplay=this.tournament.helpshiftLinkDisplay.toString()),void 0!=this.tournament.sortOrder&&(this.sortOrder=this.tournament.sortOrder.toString()),void 0!=this.tournament.minIAP&&(this.minIAP=this.tournament.minIAP.toString()),void 0!=this.tournament.worstDivision&&(this.worstDivision=this.tournament.worstDivision.toString()),void 0!=this.tournament.bestDivision&&(this.bestDivision=this.tournament.bestDivision.toString()),setTimeout(()=>{this.initializated=!0},3e3)},updateRefs(){this.nameSelected&&this.$refs.nameAutocomplete.setSelected(this.nameSelected),this.bikeProvidedSelected&&"PROVIDED"===this.bikeRestriction&&this.$refs.bikeProvidedAutocomplete.setSelected(this.bikeProvidedSelected),this.prizeClass1DescSelected&&"0"!==this.prizeClass1ID&&this.$refs.prizeClass1DescAutocomplete.setSelected(this.prizeClass1DescSelected),this.prizeClass2DescSelected&&"0"!==this.prizeClass2ID&&this.$refs.prizeClass2DescAutocomplete.setSelected(this.prizeClass2DescSelected),this.prizeClass3DescSelected&&"0"!==this.prizeClass3ID&&this.$refs.prizeClass3DescAutocomplete.setSelected(this.prizeClass3DescSelected),this.prizeClass1BikeSelected&&"3"===this.prizeClass1ID&&this.$refs.prizeClass1BikeAutocomplete.setSelected(this.prizeClass1BikeSelected),this.prizeClass2BikeSelected&&"3"===this.prizeClass2ID&&this.$refs.prizeClass2BikeAutocomplete.setSelected(this.prizeClass2BikeSelected),this.prizeClass3BikeSelected&&"3"===this.prizeClass3ID&&this.$refs.prizeClass3BikeAutocomplete.setSelected(this.prizeClass3BikeSelected),this.sponsorNameSelected&&this.$refs.sponsorNameAutocomplete.setSelected(this.sponsorNameSelected),this.sponsorSloganSelected&&this.$refs.sponsorSloganAutocomplete.setSelected(this.sponsorSloganSelected)},getMimeType(e,t=null){const s=new Uint8Array(e).subarray(0,4);let i="";for(let a=0;a<s.length;a++)i+=s[a].toString(16);switch(i){case"89504e47":return"image/png";case"47494638":return"image/gif";case"ffd8ffe0":case"ffd8ffe1":case"ffd8ffe2":case"ffd8ffe3":case"ffd8ffe8":return"image/jpeg";default:return t}},uploadPrizeImage(e,t){const{files:s}=e.target;if(s&&s[0]){this[`prizeClass${t}Image`].src&&URL.revokeObjectURL(this[`prizeClass${t}Image`].src);const e=URL.createObjectURL(s[0]),i=new FileReader;i.onload=i=>{this[`prizeClass${t}Image`]={src:e,type:this.getMimeType(i.target.result,s[0].type)}},i.readAsArrayBuffer(s[0])}},cropPrizeClassImage(e){const t=this.$refs[`cropperPrize${e}Image`].getResult(),s=t.canvas.toDataURL("image/png");this[`prizeClass${e}ImageResultData`]=s,this[`prizeClass${e}Image`]={src:null,type:null}},pushCountryWhitelist(e){e&&(this.countryBlacklistArray=this.countryBlacklistArray.filter(t=>t.code!==e.code),this.countryWhitelistArray.find(t=>t.code===e.code)||(this.countryWhitelistArray.push(e),this.countryWhitelistInput=""))},pushCountryBlacklist(e){e&&(this.countryWhitelistArray=this.countryWhitelistArray.filter(t=>t.code!==e.code),this.countryBlacklistArray.find(t=>t.code===e.code)||(this.countryBlacklistArray.push(e),this.countryBlacklistInput=""))},pushBikeRestrictionArray(e){e&&(this.bikeRestrictionArray.find(t=>t.id===e.id)||(this.bikeRestrictionArray.push(e),this.bikeRestrictionInput=""))},pushCircuitRestrictionArray(e){e&&(this.circuitRestrictionArray.find(t=>t.id===e.id)||(this.circuitRestrictionArray.push(e),this.circuitRestrictionInput=""))},selectPrizeClass1Bike(e){this.prizeClass1BikeSelected=e,this.prizeClass1Number=e?e.id:null},selectPrizeClass2Bike(e){this.prizeClass2BikeSelected=e,this.prizeClass2Number=e?e.id:null},selectPrizeClass3Bike(e){this.prizeClass3BikeSelected=e,this.prizeClass3Number=e?e.id:null},removeCountryFromWhitelist(e){this.countryWhitelistArray=this.countryWhitelistArray.filter(t=>t.code!==e)},removeCountryFromBlacklist(e){this.countryBlacklistArray=this.countryBlacklistArray.filter(t=>t.code!==e)},removeBikeFromRestriction(e){this.bikeRestrictionArray=this.bikeRestrictionArray.filter(t=>t.id!==e)},removeCircuitFromRestriction(e){this.circuitRestrictionArray=this.circuitRestrictionArray.filter(t=>t.id!==e)}},computed:{apiUrl:function(){return"https://tournaments.weplay.media"},filteredNameStrings:function(){return this.strings.filter(e=>e.value.toLowerCase().indexOf(this.nameInput.toLowerCase())>=0)},filteredCountriesWhitelist:function(){return _e.filter(e=>e.name.toLowerCase().indexOf(this.countryWhitelistInput.toLowerCase())>=0)},filteredCountriesBlacklist:function(){return _e.filter(e=>e.name.toLowerCase().indexOf(this.countryBlacklistInput.toLowerCase())>=0)},filteredBikeRestriction:function(){return this.bikes.filter(e=>e.name.toLowerCase().indexOf(this.bikeRestrictionInput.toLowerCase())>=0)},filteredBikeProvided:function(){return this.bikes.filter(e=>e.name.toLowerCase().indexOf(this.bikeProvidedInput.toLowerCase())>=0)},filteredCircuitRestriction:function(){return this.circuits.filter(e=>e.name.toLowerCase().indexOf(this.circuitRestrictionInput.toLowerCase())>=0)},filteredStringsPrizeClass1Desc:function(){return this.strings.filter(e=>e.value.toLowerCase().indexOf(this.prizeClass1DescInput.toLowerCase())>=0)},filteredStringsPrizeClass2Desc:function(){return this.strings.filter(e=>e.value.toLowerCase().indexOf(this.prizeClass2DescInput.toLowerCase())>=0)},filteredStringsPrizeClass3Desc:function(){return this.strings.filter(e=>e.value.toLowerCase().indexOf(this.prizeClass3DescInput.toLowerCase())>=0)},filteredPrizeClass1Bike:function(){return this.bikes.filter(e=>e.name.toLowerCase().indexOf(this.prizeClass1BikeInput.toLowerCase())>=0)},filteredPrizeClass2Bike:function(){return this.bikes.filter(e=>e.name.toLowerCase().indexOf(this.prizeClass2BikeInput.toLowerCase())>=0)},filteredPrizeClass3Bike:function(){return this.bikes.filter(e=>e.name.toLowerCase().indexOf(this.prizeClass3BikeInput.toLowerCase())>=0)},filteredSponsorNameStrings:function(){return this.strings.filter(e=>e.value.toLowerCase().indexOf(this.sponsorNameInput.toLowerCase())>=0)},filteredSponsorSloganStrings:function(){return this.strings.filter(e=>e.value.toLowerCase().indexOf(this.sponsorSloganInput.toLowerCase())>=0)}},watch:{bikeRestriction:function(e,t){this.initializated&&e!==t&&(this.bikeProvidedSelected=null,this.bikeProvidedInput="")},prizeClass1ID:function(e,t){this.initializated&&e!==t&&(this.prizeClass1Number=null,this.prizeClass1BikeInput="",this.prizeClass1BikeSelected=null,this.prizeClass1Image={src:null,type:null},this.prizeClass1ImageLoaded=!1,this.prizeClass1ImageResultData=null)},prizeClass2ID:function(e,t){this.initializated&&e!==t&&(this.prizeClass2Number=null,this.prizeClass2BikeInput="",this.prizeClass2BikeSelected=null,this.prizeClass2Image={src:null,type:null},this.prizeClass2ImageLoaded=!1,this.prizeClass2ImageResultData=null)},prizeClass3ID:function(e,t){this.initializated&&e!==t&&(this.prizeClass3Number=null,this.prizeClass3BikeInput="",this.prizeClass3BikeSelected=null,this.prizeClass3Image={src:null,type:null},this.prizeClass3ImageLoaded=!1,this.prizeClass3ImageResultData=null)}}},we=De,Le=(s("4572"),Object(u["a"])(we,ue,de,!1,null,null,null)),Re=Le.exports,Ne={components:{TournamentForm:Re},data(){return{isLoading:!1,cantRender:!1,tournament:null,stringList:[],bikeList:[],circuitList:[]}},mounted:function(){this.getData()},methods:{getData(){this.isLoading=!0,this.startLoading();const e=[this.$http.get("/stringTable/list"),this.$http.get("/bikes/list"),this.$http.get("/circuits/list")];Promise.all(e).then(e=>{this.stringList=e[0].data,this.bikeList=e[1].data,this.circuitList=e[2].data}).catch(e=>{this.cantRender=!0,this.showErrorNotification("Error fetching data from the server..."),console.error(e)}).finally(()=>{this.isLoading=!1,this.stopLoading()})},submit(e){this.startLoading(),this.$http.post("/tournaments/new",e).then(e=>{console.log(e),this.showSuccessNotification("Tournament created successfully!"),this.$router.push({name:"tournaments"})}).catch(e=>{this.showErrorNotification("An unexpected error occurred. Please try again later."),console.error(e)}).finally(()=>{this.stopLoading()})}}},Pe=Ne,xe=Object(u["a"])(Pe,oe,ce,!1,null,null,null),Be=xe.exports,Ae=function(){var e=this,t=e._self._c;return t("section",{staticClass:"section"},[t("div",{staticClass:"container"},[t("div",{staticClass:"columns is-centered"},[t("div",{staticClass:"column is-8"},[t("div",{staticClass:"is-clearfix"},[t("h1",{staticClass:"title is-pulled-left"},[t("router-link",{attrs:{to:{name:"tournaments"}}},[t("i",{staticClass:"fas fa-arrow-left"})]),e._v(" Edit tournament")],1),e._m(0)]),t("br"),e.isLoading?t("div",{staticClass:"notification has-text-centered px-2"},[e._m(1)]):!e.isLoading&&e.cantRender?t("div",{staticClass:"notification is-warning"},[e._m(2)]):e.isLoading||e.cantRender||!e.tournament?e._e():t("TournamentForm",{attrs:{strings:e.stringList,bikes:e.bikeList,circuits:e.circuitList,tournament:e.tournament,edit:!0},on:{submit:e.submit}})],1)])])])},Oe=[function(){var e=this,t=e._self._c;return t("h1",{staticClass:"title is-pulled-right"},[t("i",{staticClass:"fas fa-pencil"}),e._v(" "),t("i",{staticClass:"fas fa-trophy"})])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"block"},[t("p",{},[t("i",{staticClass:"fas fa-spin fa-sync"})]),t("p",{staticClass:"is-size-7"},[e._v("Loading")])])},function(){var e=this,t=e._self._c;return t("p",[t("i",{staticClass:"fas fa-exclamation-triangle"}),e._v(" An error ocurred")])}],Me={components:{TournamentForm:Re},data(){return{isLoading:!1,cantRender:!1,tournament:null,stringList:[],bikeList:[],circuitList:[],originalTournament:null}},mounted:function(){this.getData()},methods:{getData(){this.isLoading=!0,this.startLoading();const e=[this.$http.get("/stringTable/list"),this.$http.get("/bikes/list"),this.$http.get("/circuits/list"),this.$http.get("/tournaments/"+this.$route.params.id)];Promise.all(e).then(e=>{this.stringList=e[0].data,this.bikeList=e[1].data,this.circuitList=e[2].data,this.tournament=e[3].data}).catch(e=>{this.cantRender=!0,this.showErrorNotification("Error fetching data from the server..."),console.error(e)}).finally(()=>{this.isLoading=!1,this.stopLoading()})},submit(e){const t=JSON.parse(JSON.stringify(this.tournament));t.startTimestamp=new Date(t.startTimestamp).getTime()/1e3,t.endTimestamp=new Date(t.endTimestamp).getTime()/1e3;const s=this.getChangedValues(t,e);0!==Object.keys(s).length?(this.startLoading(),this.$http.post("/tournaments/edit/"+this.$route.params.id,s).then(()=>{this.showSuccessNotification("Tournament edited successfully!"),this.$router.push({name:"tournaments"})}).catch(e=>{this.showErrorNotification("An unexpected error occurred. Please try again later."),console.error(e)}).finally(()=>{this.stopLoading()})):this.showSuccessNotification("No changes detected")},getChangedValues(e,t){const s={};for(const i in t)e[i]!==t[i]&&(s[i]=t[i]);return s}}},Te=Me,Ee=Object(u["a"])(Te,Ae,Oe,!1,null,null,null),Ue=Ee.exports;i["a"].use(v["a"]);const Ve=[{path:"/",name:"home",component:g["default"]},{path:"/login",name:"login",component:R},{path:"/users",name:"users",component:O},{path:"/users/new",name:"users-new",component:ee},{path:"/tournaments",name:"tournaments",component:le},{path:"/tournaments/new",name:"tournaments-new",component:Be},{path:"/tournaments/:id",name:"tournaments-edit",component:Ue}],We=new v["a"]({base:"/",routes:Ve});var $e=We,Fe=s("cee4");Fe["a"].defaults.baseURL="https://tournaments.weplay.media",Fe["a"].defaults.headers.common.Accept="application/json",Fe["a"].defaults.withCredentials=!0,Fe["a"].defaults.timeout=6e4,Fe["a"].interceptors.response.use(e=>(200===e.status&&"NOT_AUTHORIZED"===e.data.error&&_.dispatch("logout"),e),e=>(401===e.response.status&&_.dispatch("logout"),Promise.reject(e)));var Ge=Fe["a"],je={methods:{startLoading(){_.commit("setLoading",!0)},stopLoading(){_.commit("setLoading",!1)},showErrorNotification:function(e){this.$buefy.snackbar.open({message:"⚠️&nbsp;"+e,type:"is-warning",duration:5e3,position:"is-bottom-left"})},showSuccessNotification:function(e){this.$buefy.snackbar.open({message:"✅&nbsp;"+e,duration:5e3,position:"is-bottom-left",type:"is-white"})},getValue(e){return void 0===e||null===e?null:e},isOptional(e){return null===e||""===e?null:"undefined"!==typeof e&&0===e.length?[]:e},isInputEmpty(e){return null===e||""===e||"undefined"!==typeof e&&0===e.length},isObject(e){return null!==e&&"object"===typeof e&&!1===Array.isArray(e)},isObjectEmpty(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},stringHasDigits(e){return/\d/.test(e)}},computed:{apiUrl(){return"https://tournaments.weplay.media"},loggedUser(){return _.state.loggedUser}}},qe=je,He=s("4c93");Object(E["c"])("required",{...He["i"],message:"This field is required"}),Object(E["c"])("email",{...He["b"],message:"This field must be a valid email"}),Object(E["c"])("confirmed",{...He["a"],message:"This field confirmation does not match"}),Object(E["c"])("length",{...He["d"],message:"This field must have 2 options"}),Object(E["c"])("max",{...He["e"],message:"This field must have a maximum of {length} characters"}),Object(E["c"])("max_value",{...He["f"],message:"This field must have a maximum of {max}"}),Object(E["c"])("min_value",{...He["g"],message:"This field must have a minimum of {min}"}),Object(E["c"])("integer",{...He["c"],message:"This field must be an integer"}),Object(E["c"])("oneOf",{...He["h"],message:"This field must be one of the allowed values"}),i["a"].use(b["a"],{defaultIconPack:"fas",defaultDialogConfirmText:"OK",defaultDialogCancelText:"Cancelar",defaultDayNames:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"],defaultMonthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"]}),i["a"].mixin(qe),i["a"].prototype.$http=Ge,i["a"].config.productionTip=!1;const Ke=new i["a"]({router:$e,store:_,http:Ge,render:e=>e(C)});Ge.get("/user/checklogin").then(e=>{200===e.status&&console.log("✅ Logged in")}).catch(e=>{401===e.response.status&&console.log("❌ Not logged in")}).finally(()=>{Ke.$mount("#app")})},"7ad4":function(e,t,s){"use strict";var i=s("9cae"),a=s.n(i);t["default"]=a.a},"898e":function(e,t,s){"use strict";s.d(t,"a",(function(){return i})),s.d(t,"b",(function(){return a}));var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("section",{staticClass:"hero is-white is-fullheight-with-navbar"},[t("div",{staticClass:"hero-body"},[t("div",{staticClass:"container has-text-centered"},[t("div",{staticClass:"columns is-centered is-mobile"},[t("div",{staticClass:"column is-6-desktop is-8-tablet is-12-mobile"},[t("h1",{staticClass:"title is-2"},[e._v(" 👋 ")]),t("h1",{staticClass:"title is-4"},[e._v(" Welcome! ")]),t("h1",{staticClass:"subtitle is-6"},[e._v(" MotoGP Tournament Admin ")]),t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-half"},[t("router-link",{staticClass:"button is-primary is-block",attrs:{to:{name:"users"}}},[t("i",{staticClass:"fas fa-users"}),e._v(" Users ")])],1),t("div",{staticClass:"column is-half"},[t("router-link",{staticClass:"button is-primary is-block",attrs:{to:{name:"tournaments"}}},[t("i",{staticClass:"fas fa-trophy"}),e._v(" Tournaments ")])],1)])])])])])])},a=[]},"9cae":function(e,t){},bb51:function(e,t,s){"use strict";var i=s("898e"),a=s("7ad4"),n=s("2877"),r=Object(n["a"])(a["default"],i["a"],i["b"],!1,null,null,null);t["default"]=r.exports},fe17:function(e,t,s){"use strict";s("413b")}});
//# sourceMappingURL=app.aa91f7a1.js.map